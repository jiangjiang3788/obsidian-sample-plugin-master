{"version":3,"file":"main.js","sources":["../src/config/schema.ts","../src/utils/regex.ts","../src/utils/date.ts","../src/config/constants.ts","../src/utils/text.ts","../src/data/parser.ts","../src/utils/timing.ts","../src/data/mark.ts","../src/services/taskService.ts","../src/data/store.ts","../node_modules/preact/dist/preact.module.js","../node_modules/preact/jsx-runtime/dist/jsxRuntime.module.js","../src/utils/obsidian.ts","../src/views/common/TaskCheckbox.tsx","../src/views/TableView.tsx","../src/config/categoryColorMap.ts","../src/views/BlockView.tsx","../src/views/TimelineView.tsx","../src/views/CalendarView.tsx","../src/views/ChartView.tsx","../src/views/ExcelView.tsx","../node_modules/preact/hooks/dist/hooks.module.js","../src/views/SettingsFormView.tsx","../src/views/index.ts","../src/ui/SettingsTab.ts","../src/core/VaultWatcher.ts","../src/views/ModulePanel.tsx","../src/views/Dashboard.tsx","../src/core/CodeblockEmbedder.ts","../src/main.ts"],"sourcesContent":["// config/schema.ts - 定义数据模型和配置的 TypeScript 接口\r\n\r\nimport type { ViewName } from '../views';\r\nexport interface Item {\r\n  id: string;            // 唯一标识: filePath#line\r\n  title: string;         // 标题\r\n  content: string;       // 全部内容（任务整行或块全文）\r\n  type: 'task' | 'block';// 类型：任务 或 文本块\r\n  status?: string;       // 状态：任务=open/done/cancelled，块=状态:: 值（若无则 undefined）\r\n  category: string;      // 类别：分类::/类别:: 值或父文件夹名\r\n  tags: string[];        // 标签列表：任务行内#tag，块主题:: 拆分\r\n  recurrence: string;    // 重复规则：如 \"every day when done\"，否则 'none'\r\n  date?: string;         // 日期：任务完成/取消日期 或 块 日期:: 值（格式 YYYY-MM-DD）\r\n  created: number;       // 创建时间（文件级，Unix ms 时间戳）\r\n  modified: number;      // 修改时间（文件级，Unix ms 时间戳）\r\n  extra: Record<string, string|number|boolean>;  // 其他键值对，如 时间/时长/优先级/图标 等\r\n  header?: string;           // 所在的 Markdown 标题文本\r\n  icon?: string;             // 图标 emoji\r\n  priority?: 'lowest' | 'low' | 'medium' | 'high' | 'highest';  // 优先级\r\n  createdDate?: string;      // 创建日期 ➕\r\n  scheduledDate?: string;    // 安排日期 ⏳\r\n  startDate?: string;        // 开始日期 🛫\r\n  dueDate?: string;          // 截止日期 📅\r\n  doneDate?: string;         // 完成日期 ✅\r\n  cancelledDate?: string;    // 取消日期 ❌\r\n  filename?: string;         // 文件名\r\n}\r\n\r\n/** 仪表盘模块配置 */\r\nexport interface ModuleConfig {\r\n  view: ViewName;\r\n  title: string;\r\n  collapsed?: boolean;\r\n  filters?: FilterRule[];\r\n  sort?: SortRule[];\r\n  group?: string;\r\n  props?: Record<string, any>;\r\n  fields?: string[];\r\n}\r\n\r\n/** 过滤条件 */\r\nexport interface FilterRule {\r\n  field: string;   // 可为 extra.xxx\r\n  op: '=' | '!=' | 'includes' | 'regex' | '>' | '<';\r\n  value: any;\r\n}\r\n\r\n/** 排序条件 */\r\nexport interface SortRule {\r\n  field: string;   // 可为 extra.xxx\r\n  dir: 'asc' | 'desc';\r\n}\r\n\r\n/** 仪表盘配置 */\r\nexport interface DashboardConfig {\r\n  name: string;\r\n  path?: string;\r\n  tags?: string[];\r\n  initialView?: string;\r\n  initialDate?: string;\r\n  modules: ModuleConfig[];\r\n}\r\n\r\n/* ================================\r\n *  字段统一维护 & 工具函数\r\n * ================================ */\r\n\r\n/** 一处维护的核心字段清单（非 extra.*） */\r\nexport const CORE_FIELDS = [\r\n  'id','title','content','type','status','category','tags','recurrence',\r\n  'date','header','icon','priority','createdDate','scheduledDate','startDate',\r\n  'dueDate','doneDate','cancelledDate','created','modified','filename'\r\n] as const;\r\n\r\nexport type CoreField = typeof CORE_FIELDS[number];\r\n\r\n/** 从 items 生成 “核心字段 + extra.xxx” 的完整字段列表 */\r\nexport function getAllFields(items: Item[]): string[] {\r\n  const set = new Set<string>(CORE_FIELDS as unknown as string[]);\r\n  for (const it of items) {\r\n    Object.keys(it.extra || {}).forEach(k => set.add('extra.' + k));\r\n  }\r\n  return Array.from(set);\r\n}\r\n\r\n/** 通用读取字段值（支持 extra.xxx） */\r\nexport function readField(item: Item, field: string): any {\r\n  if (field.startsWith('extra.')) {\r\n    const key = field.substring(6);\r\n    return item.extra?.[key];\r\n  }\r\n  // @ts-ignore\r\n  return item[field as keyof Item];\r\n}\r\n","// utils/regex.ts\r\nexport const DATE_YMD = '\\\\d{4}[-/]\\\\d{2}[-/]\\\\d{2}';\r\nexport const DATE_YMD_RE = new RegExp(DATE_YMD);\r\n\r\nexport const TAG_RE = /#([\\p{L}\\p{N}_\\/-]+)/gu;\r\nexport const KV_IN_PAREN = /\\(([^:：]+)::\\s*([^)]+)\\)/g;\r\nexport const META_BRACKET = /\\([^:：]+::\\s*[^)]+\\)/g;\r\n\r\nexport const RE_TASK_PREFIX = /^\\s*-\\s*\\[[ xX-]\\]/;\r\nexport const RE_DONE_BOX    = /^\\s*-\\s*\\[x\\]/i;\r\nexport const RE_CANCEL_BOX  = /^\\s*-\\s*\\[-\\]/;\r\nexport const RE_EMPTY_BOX   = /^\\s*-\\s*\\[ \\]/;","// utils/date.ts\r\nexport function normalizeDateStr(dateStr: string): string {\r\n  return dateStr.replace(/\\//g, '-');\r\n}\r\n\r\n/**\r\n * 计算指定视图类型下的起止日期。\r\n * \r\n * @param date      moment 实例\r\n * @param viewType  \"年\" | \"季\" | \"月\" | \"周\" | \"天\"\r\n */\r\nexport function getDateRange(date: any, viewType: string) {\r\n  let s = date.clone(),\r\n      e = date.clone();\r\n\r\n  switch (viewType) {\r\n    case '年':\r\n      s = date.clone().startOf('year');\r\n      e = date.clone().endOf('year');\r\n      break;\r\n    case '季':\r\n      s = date.clone().startOf('quarter');\r\n      e = date.clone().endOf('quarter');\r\n      break;\r\n    case '月':\r\n      s = date.clone().startOf('month');\r\n      e = date.clone().endOf('month');\r\n      break;\r\n    case '周':\r\n      s = date.clone().startOf('week');\r\n      e = date.clone().endOf('week');\r\n      break;\r\n    case '天':\r\n    default:\r\n      s = date.clone().startOf('day');\r\n      e = date.clone().endOf('day');\r\n  }\r\n  return { startDate: s, endDate: e };\r\n}","// config/constants.ts\r\nexport const CODEBLOCK_LANG = 'think';\r\n\r\nexport const OPS = ['=', '!=', 'includes', 'regex', '>', '<'] as const;\r\n\r\nexport const EMOJI = {\r\n  done: '✅',\r\n  cancelled: '❌',\r\n  due: '📅',\r\n  scheduled: '⏳',\r\n  start: '🛫',\r\n  created: '➕',\r\n  repeat: '🔁',\r\n  prio: {\r\n    highest: '🔺',\r\n    high: '⏫',\r\n    medium: '🔼',\r\n    low: '🔽',\r\n    lowest: '⏬',\r\n  },\r\n} as const;\r\n\r\nexport const EMPTY_LABEL = '无日期';\r\n\r\nexport const STYLE_TAG_ID = 'think-dashboard-style';\r\n\r\n// 将默认注入样式集中在此，便于替换/关闭\r\nexport const GLOBAL_CSS = `\r\n.think-table{width:100%;border:1px solid #ccc;border-collapse:collapse;}\r\n.think-table th,.think-table td{border:1px solid #ccc;padding:4px;}\r\n.think-table th{background:#f0f0f0;text-align:center;}\r\n.think-table td{text-align:left;}\r\n.think-table td.empty{background:#f9f9f9;}\r\n.tag-pill{background:#e0e0e0;border-radius:4px;padding:0 6px;margin-right:6px;font-size:90%;display:inline-block;}\r\n.task-done{text-decoration:line-through;color:gray;}\r\n.module-header{display:flex;align-items:center;padding:4px 8px;background:#eee;cursor:pointer;}\r\n.module-title{flex:1;font-weight:bold;}\r\n.module-toggle{margin-left:4px;}\r\n.module-content{padding:6px 8px;}\r\n.think-module a{color:black;text-decoration:none;}\r\n`.trim();","// utils/text.ts\r\n// 统一的任务标题清理工具，在 parser / 其它场景复用\r\nexport function cleanTaskText(text: string): string {\r\n  // 1. 去掉 \"- [ ]\" / \"- [x]\" 前缀\r\n  let result = text.replace(/^\\s*-\\s*\\[[ xX-]\\]\\s*/, '').trim();\r\n\r\n  // 2. 去掉所有行内 #tag\r\n  result = result.replace(/#[\\p{L}\\p{N}_-]+/gu, '');\r\n\r\n  // 3. 拆分 (  或空格，取第一个非空片段\r\n  let main = result.split(/[\\s(]/).find(s => s && s.trim());\r\n\r\n  // 4. 去掉最前面的 emoji\r\n  main = main?.replace(/^\\p{Extended_Pictographic}\\uFE0F?/u, '').trim();\r\n\r\n  return main ? main.trim() : '';\r\n}","// data/parser.ts\r\n// 统一后的任务/块解析器（去掉重复正则与日期处理，全部从 utils 与 constants 引用）\r\nimport { Item } from '../config/schema';\r\nimport {\r\n  TAG_RE,\r\n  KV_IN_PAREN,\r\n  DATE_YMD_RE,\r\n  RE_TASK_PREFIX,\r\n  RE_DONE_BOX,\r\n  RE_CANCEL_BOX,\r\n} from '../utils/regex';\r\nimport { normalizeDateStr } from '../utils/date';\r\nimport { EMOJI } from '../config/constants';\r\nimport { cleanTaskText } from '../utils/text';\r\n\r\n// 优先级\r\nfunction pickPriority(line: string): Item['priority'] | undefined {\r\n  if (line.includes('🔺')) return 'highest';\r\n  if (line.includes('⏫')) return 'high';\r\n  if (line.includes('🔼')) return 'medium';\r\n  if (line.includes('🔽')) return 'low';\r\n  if (line.includes('⏬')) return 'lowest';\r\n  return undefined;\r\n}\r\n\r\n/** 解析任务行 (以 \"- [ ]\" 或 \"- [x]\" 开头) 为 Item */\r\nexport function parseTaskLine(\r\n  filePath: string,\r\n  rawLine: string,\r\n  lineNo: number,\r\n  parentFolder: string\r\n): Item | null {\r\n  const lineText = rawLine;\r\n  if (!RE_TASK_PREFIX.test(lineText)) return null;\r\n\r\n  // 状态\r\n  let status: Item['status'] = 'open';\r\n  if (RE_DONE_BOX.test(lineText)) status = 'done';\r\n  else if (RE_CANCEL_BOX.test(lineText)) status = 'cancelled';\r\n\r\n  // 行内标签\r\n  const tagMatches = lineText.match(TAG_RE) || [];\r\n  const tags = tagMatches.map(t => t.replace('#', ''));\r\n\r\n  // 重复性\r\n  let recurrence = 'none';\r\n  const recMatch = lineText.match(/🔁\\s*([^\\n📅⏳🛫➕✅❌]*)/);\r\n  if (recMatch && recMatch[1]) recurrence = recMatch[1].trim();\r\n\r\n  // 括号 meta\r\n  const extra: Record<string, string | number | boolean> = {};\r\n  let m: RegExpExecArray | null;\r\n  while ((m = KV_IN_PAREN.exec(lineText)) !== null) {\r\n    const key = m[1].trim();\r\n    const value = m[2].trim();\r\n    const lowerKey = key.toLowerCase();\r\n    if (['主题', '标签', 'tag', 'tags'].includes(lowerKey)) {\r\n      value.split(/[,，]/).forEach(v => {\r\n        const t = v.trim().replace(/^#/, '');\r\n        if (t) tags.push(t);\r\n      });\r\n    } else {\r\n      const num = Number(value);\r\n      let parsed: any = value;\r\n      if (value !== '' && !isNaN(num)) parsed = num;\r\n      else if (/^(true|false)$/i.test(value)) parsed = value.toLowerCase() === 'true';\r\n      extra[key] = parsed;\r\n    }\r\n  }\r\n\r\n  // 日期/emoji\r\n  const pickDate = (emoji: string): string | undefined => {\r\n    const mt = lineText.match(new RegExp(`${emoji}\\\\s*(${DATE_YMD_RE.source})`));\r\n    return mt ? normalizeDateStr(mt[1]) : undefined;\r\n  };\r\n  const doneDate       = pickDate(EMOJI.done);\r\n  const cancelledDate  = pickDate(EMOJI.cancelled);\r\n  const dueDate        = pickDate(EMOJI.due);\r\n  const scheduledDate  = pickDate(EMOJI.scheduled);\r\n  const startDate      = pickDate(EMOJI.start);\r\n  const createdDate    = pickDate(EMOJI.created);\r\n\r\n  const priority = pickPriority(lineText);\r\n\r\n  // 图标: 第一个 emoji\r\n  let icon: string | undefined;\r\n  const afterPrefix = lineText.replace(RE_TASK_PREFIX, '').trim();\r\n  const iconMatch = afterPrefix.match(/^(\\p{Extended_Pictographic}\\uFE0F?)/u);\r\n  let titleSrc = afterPrefix;\r\n  if (iconMatch) {\r\n    icon = iconMatch[1];\r\n    titleSrc = titleSrc.replace(/^(?:\\p{Extended_Pictographic}\\uFE0F?\\s*)+/u, '');\r\n  }\r\n\r\n  // 使用统一 cleanTaskText\r\n  titleSrc = cleanTaskText(titleSrc);\r\n\r\n  const item: Item = {\r\n    id: `${filePath}#${lineNo}`,\r\n    title: titleSrc || '',\r\n    content: lineText.trim(),\r\n    type: 'task',\r\n    status,\r\n    category: '任务',\r\n    tags: Array.from(new Set(tags)),\r\n    recurrence,\r\n    date: undefined,\r\n    created: 0,\r\n    modified: 0,\r\n    extra: {},\r\n  };\r\n\r\n  if (icon) {\r\n    item.icon = icon;\r\n    extra['图标'] = icon;\r\n  }\r\n  if (priority) item.priority = priority;\r\n\r\n  if (createdDate) item.createdDate = createdDate;\r\n  if (scheduledDate) item.scheduledDate = scheduledDate;\r\n  if (startDate) item.startDate = startDate;\r\n  if (dueDate) item.dueDate = dueDate;\r\n  if (doneDate) {\r\n    item.doneDate = doneDate;\r\n    if (status === 'done') item.date = doneDate;\r\n  }\r\n  if (cancelledDate) {\r\n    item.cancelledDate = cancelledDate;\r\n    if (status === 'cancelled') item.date = cancelledDate;\r\n  }\r\n\r\n  if (status === 'open') {\r\n    item.date = dueDate || scheduledDate || startDate || createdDate;\r\n  }\r\n\r\n  item.extra = extra;\r\n  return item;\r\n}\r\n\r\n/** 解析块内容 (<!-- start --> ... <!-- end -->) 为 Item */\r\nexport function parseBlockContent(\r\n  filePath: string,\r\n  lines: string[],\r\n  startIdx: number,\r\n  endIdx: number,\r\n  parentFolder: string\r\n): Item | null {\r\n  const contentLines = lines.slice(startIdx + 1, endIdx);\r\n  let title = '';\r\n  let category: string | null = null;\r\n  let status: string | undefined;\r\n  let date: string | undefined;\r\n  const tags: string[] = [];\r\n  const extra: Record<string, string | number | boolean> = {};\r\n  let themeValue: string | null = null;\r\n  let contentText = '';\r\n  let contentStarted = false;\r\n  let iconVal: string | null = null;\r\n\r\n  for (let i = 0; i < contentLines.length; i++) {\r\n    const rawLine = contentLines[i];\r\n    const line = rawLine.trim();\r\n    if (!contentStarted) {\r\n      if (line === '') continue;\r\n      const kv = line.match(/^([^:：]{1,20})::\\s*(.*)$/);\r\n      if (kv) {\r\n        const key = kv[1].trim();\r\n        const value = kv[2] || '';\r\n        const lower = key.toLowerCase();\r\n        if (['分类', '类别', 'category'].includes(lower)) {\r\n          category = value.trim();\r\n        } else if (['主题', '标签', 'tag', 'tags'].includes(lower)) {\r\n          themeValue = value.trim();\r\n        } else if (['状态', 'status'].includes(lower)) {\r\n          status = value.trim();\r\n        } else if (['日期', 'date'].includes(lower)) {\r\n          date = normalizeDateStr(value.trim());\r\n        } else if (['内容', 'content'].includes(lower)) {\r\n          contentStarted = true;\r\n          contentText = value;\r\n        } else if (['图标', 'icon'].includes(lower)) {\r\n          iconVal = value.trim();\r\n          extra['图标'] = iconVal;\r\n        } else {\r\n          const num = Number(value.trim());\r\n          let parsed: any = value.trim();\r\n          if (parsed !== '' && !isNaN(num)) parsed = num;\r\n          else if (/^(true|false)$/i.test(parsed)) parsed = parsed.toLowerCase() === 'true';\r\n          extra[key] = parsed;\r\n        }\r\n      } else {\r\n        contentStarted = true;\r\n        contentText = rawLine;\r\n      }\r\n    } else {\r\n      contentText += (contentText ? '\\n' : '') + rawLine;\r\n    }\r\n  }\r\n\r\n  if (themeValue) {\r\n    themeValue\r\n      .split(/[,，]/)\r\n      .map(p => p.trim())\r\n      .filter(Boolean)\r\n      .forEach(t => tags.push(t.replace(/^#/, '')));\r\n  }\r\n\r\n  if (contentText.trim() !== '') {\r\n    title = contentText.trim().split(/\\r?\\n/)[0];\r\n  } else if (themeValue) {\r\n    title = themeValue.split(/[,，]/).map(p => p.trim()).filter(Boolean).join(', ');\r\n  }\r\n  title = title.replace(/^(?:\\p{Extended_Pictographic}\\uFE0F?\\s*)+/u, '').trim();\r\n  if (title) title = title.slice(0, 10);\r\n\r\n  if (!category) category = parentFolder || '';\r\n\r\n  const item: Item = {\r\n    id: `${filePath}#${startIdx + 1}`,\r\n    title: title || '',\r\n    content: contentText.trim(),\r\n    type: 'block',\r\n    status,\r\n    category,\r\n    tags: Array.from(new Set(tags)),\r\n    recurrence: 'none',\r\n    date,\r\n    created: 0,\r\n    modified: 0,\r\n    extra,\r\n  };\r\n  if (iconVal) item.icon = iconVal;\r\n  return item;\r\n}","// utils/timing.ts\r\nexport function throttle<T extends (...args: any[]) => void>(\r\n  fn: T,\r\n  wait = 250\r\n): T {\r\n  let last = 0, timer: any = null;\r\n  return function (...args: Parameters<T>) {\r\n    const now = Date.now();\r\n    if (now - last >= wait) {\r\n      last = now;\r\n      fn.apply(this, args);\r\n    } else {\r\n      clearTimeout(timer);\r\n      timer = setTimeout(() => {\r\n        last = Date.now();\r\n        fn.apply(this, args);\r\n      }, wait - (now - last));\r\n    }\r\n  } as T;\r\n}","// data/mark.ts\r\n// 任务状态切换与周期任务工具函数（已整合 markTaskDone 高层封装）\r\n\r\nimport { EMOJI } from '../config/constants';\r\nimport { DATE_YMD_RE } from '../utils/regex';\r\nimport { normalizeDateStr } from '../utils/date';\r\n\r\nexport interface RecurrenceInfo {\r\n  interval: number;\r\n  unit: 'day' | 'week' | 'month' | 'year';\r\n  whenDone: boolean;\r\n}\r\n\r\n/* ---------- 单行任务完成 ---------- */\r\n\r\n/** 把待办行切换为已完成，并写入 ✅ 日期与 (时间::hh:mm) */\r\nexport function toggleToDone(\r\n  rawLine: string,\r\n  todayISO: string,\r\n  nowTime: string\r\n): string {\r\n  let line = rawLine;\r\n\r\n  // 确保 (时长::x) 在括号里，同时插入时间 (时间::hh:mm)\r\n  line = line.replace(/(\\s|^)(时长::[^\\s()]+)/g, (m, pre, content) =>\r\n    m.includes('(') ? m : `${pre}(${content})`\r\n  );\r\n\r\n  if (/\\(时长::[^\\)]+\\)/.test(line)) {\r\n    line = line.replace(/\\((时长::[^\\)]+)\\)/, `(时间::${nowTime}) ($1)`);\r\n  } else if (/时长::[^\\s]+/.test(line)) {\r\n    line = line.replace(/(时长::[^\\s]+)/, `(时间::${nowTime}) ($1)`);\r\n  } else if (line.includes(EMOJI.repeat)) {\r\n    line = line.replace(EMOJI.repeat, `(时间::${nowTime}) ${EMOJI.repeat}`);\r\n  } else {\r\n    line = `${line} (时间::${nowTime})`;\r\n  }\r\n\r\n  // 方框 → [x]，若原行缺失前缀则补全\r\n  line = line.replace(/^(\\s*-\\s*)\\[[ xX-]\\]/, '$1[x]');\r\n  if (!/^-\\s*\\[x\\]/.test(line)) {\r\n    line = `- [x] ${line.replace(/^-\\s*\\[.\\]/, '').replace(/^-\\s*/, '')}`;\r\n  }\r\n\r\n  // 清理旧 ✓ 日期并写入新的\r\n  line = line.replace(\r\n    new RegExp(`\\\\s*${EMOJI.done}\\\\s*${DATE_YMD_RE.source}$`),\r\n    ''\r\n  );\r\n  return `${line.trim()} ${EMOJI.done} ${todayISO}`;\r\n}\r\n\r\n/* ---------- 周期任务 ---------- */\r\n\r\nexport function parseRecurrence(rawTask: string): RecurrenceInfo | null {\r\n  const m = rawTask.match(\r\n    /🔁\\s*every\\s+(\\d+)?\\s*(day|week|month|year)s?\\s*(when done)?/i\r\n  );\r\n  if (!m) return null;\r\n  const interval = m[1] ? parseInt(m[1], 10) : 1;\r\n  let unit = m[2].toLowerCase() as RecurrenceInfo['unit'];\r\n  if (unit.endsWith('s')) unit = unit.slice(0, -1) as any;\r\n  const whenDone = Boolean(m[3]);\r\n  return { interval, unit, whenDone };\r\n}\r\n\r\nexport function findBaseDateForRecurring(\r\n  rawTask: string,\r\n  whenDone: boolean,\r\n  todayISO: string\r\n): string {\r\n  const m = (window as any).moment;\r\n  if (whenDone) return todayISO;\r\n\r\n  const pick = (emoji: string) => {\r\n    const r = new RegExp(`${emoji}\\\\s*(${DATE_YMD_RE.source})`);\r\n    const mt = rawTask.match(r);\r\n    return mt ? normalizeDateStr(mt[1]) : null;\r\n  };\r\n  return (\r\n    pick(EMOJI.due) ||\r\n    pick(EMOJI.scheduled) ||\r\n    pick(EMOJI.start) ||\r\n    todayISO\r\n  );\r\n}\r\n\r\nexport function generateNextRecurringTask(\r\n  rawTask: string,\r\n  baseDateISO: string\r\n): string {\r\n  let next = rawTask\r\n    .replace(/^(\\s*-\\s*)\\[[ xX-]\\]/, '$1[ ]') // 复原为待办\r\n    .replace(new RegExp(`\\\\s*${EMOJI.done}\\\\s*${DATE_YMD_RE.source}`), '')\r\n    .replace(/\\(时间::\\d{2}:\\d{2}\\)/, '');\r\n\r\n  const rec = parseRecurrence(rawTask);\r\n  if (!rec) return next.trim();\r\n\r\n  const m = (window as any).moment;\r\n  const base = m(baseDateISO, ['YYYY-MM-DD', 'YYYY/MM/DD']);\r\n  const nextDate = base\r\n    .clone()\r\n    .add(rec.interval, rec.unit + (rec.interval > 1 ? 's' : ''));\r\n  const nextStr = nextDate.format('YYYY-MM-DD');\r\n\r\n  const replaceIf = (emoji: string) => {\r\n    const re = new RegExp(`${emoji}\\\\s*${DATE_YMD_RE.source}`);\r\n    if (re.test(next)) next = next.replace(re, `${emoji} ${nextStr}`);\r\n  };\r\n  replaceIf(EMOJI.due);\r\n  replaceIf(EMOJI.scheduled);\r\n  replaceIf(EMOJI.start);\r\n\r\n  return next.trim();\r\n}\r\n\r\n/* ---------- 高层 API：一次性完成标记 + 生成下一条 ---------- */\r\n\r\n/** \r\n * 将 `rawLine` 标记为完成，返回新的行文本和（若为周期任务时）下一条任务行。\r\n */\r\nexport function markTaskDone(\r\n  rawLine: string,\r\n  todayISO: string,\r\n  nowTime: string\r\n): { completedLine: string; nextTaskLine?: string } {\r\n  const completedLine = toggleToDone(rawLine, todayISO, nowTime);\r\n  const rec = parseRecurrence(rawLine);\r\n  if (!rec) return { completedLine };\r\n\r\n  const baseISO = findBaseDateForRecurring(rawLine, rec.whenDone, todayISO);\r\n  const nextTaskLine = generateNextRecurringTask(rawLine, baseISO);\r\n  return { completedLine, nextTaskLine };\r\n}","// services/taskService.ts\r\n/**\r\n * 业务服务层 —— 专管“完成任务”逻辑，\r\n * DataStore 不再直接写业务代码，避免重复。\r\n */\r\nimport { DataStore } from '../data/store';\r\nimport { markTaskDone } from '../data/mark';\r\nimport { TFile } from 'obsidian';\r\n\r\nexport class TaskService {\r\n  /**\r\n   * 标记任务完成（支持周期任务），并刷新数据存储。\r\n   */\r\n  static async completeTask(itemId: string): Promise<void> {\r\n    const ds = DataStore.instance;\r\n    if (!ds) throw new Error('DataStore not ready');\r\n\r\n    const [filePath, lineStr] = itemId.split('#');\r\n    const lineNo = Number(lineStr);\r\n    const file = ds['app'].vault.getAbstractFileByPath(filePath);\r\n    if (!(file instanceof TFile)) return;\r\n\r\n    const content = await ds['app'].vault.read(file);\r\n    const lines   = content.split(/\\r?\\n/);\r\n    if (lineNo < 1 || lineNo > lines.length) return;\r\n\r\n    const rawLine = lines[lineNo - 1];\r\n    if (!/^\\s*-\\s*\\[ \\]/.test(rawLine)) return;          // 不是未完成任务\r\n\r\n    const moment      = (window as any).moment;\r\n    const todayISO    = moment().format('YYYY-MM-DD');\r\n    const nowTime     = moment().format('HH:mm');\r\n    const { completedLine, nextTaskLine } =\r\n      markTaskDone(rawLine, todayISO, nowTime);\r\n\r\n    lines[lineNo - 1] = completedLine;\r\n    if (nextTaskLine) lines.splice(lineNo, 0, nextTaskLine);\r\n\r\n    await ds['app'].vault.modify(file, lines.join('\\n'));\r\n    await ds.scanFile(file);          // 重新解析\r\n    ds.notifyChange();                // 通知视图刷新\r\n  }\r\n}","// data/store.ts - 数据存储与查询，实现扫描 Vault、维护 Item 列表、提供查询接口 \r\n\r\nimport { App, TFile, TFolder, HeadingCache } from 'obsidian';\r\nimport { Item, FilterRule, SortRule, readField } from '../config/schema';\r\nimport { parseTaskLine, parseBlockContent } from './parser';\r\nimport { throttle } from '../utils/timing';\r\nimport { TaskService } from '../services/taskService';\r\n\r\nexport class DataStore {\r\n  static instance: DataStore;\r\n\r\n  private app: App;\r\n  private items: Item[] = [];\r\n  private fileIndex: Map<string, Item[]> = new Map();\r\n  private changeListeners: Set<() => void> = new Set();\r\n\r\n  constructor(app: App) {\r\n    this.app = app;\r\n    DataStore.instance = this;\r\n  }\r\n\r\n  /* ---------- 扫描 ---------- */\r\n\r\n  /** 初次扫描所有 Markdown 文件（新） */\r\n  async scanAll() {\r\n    this.items = [];\r\n    this.fileIndex.clear();\r\n    const files = this.app.vault.getMarkdownFiles();\r\n    for (const file of files) await this.scanFile(file);\r\n  }\r\n\r\n  /** 兼容旧调用名 */\r\n  async initialScan() {\r\n    return this.scanAll();\r\n  }\r\n\r\n  /** 扫描并解析单个文件，将该文件的 Items 更新至存储 */\r\n  async scanFile(file: TFile): Promise<Item[]> {\r\n    try {\r\n      const content = await this.app.vault.read(file);\r\n      const lines = content.split(/\\r?\\n/);\r\n      const filePath = file.path;\r\n      const parentFolder = file.parent?.name || '';\r\n      const fileItems: Item[] = [];\r\n\r\n      const cache = this.app.metadataCache.getFileCache(file);\r\n      const headingsList: HeadingCache[] = cache?.headings || [];\r\n      let nextHeadingIndex = 0;\r\n      let currentSectionTags: string[] = [];\r\n      let currentHeader: string = '';\r\n\r\n      for (let i = 0; i < lines.length; i++) {\r\n        const line = lines[i];\r\n\r\n        // 标题切换\r\n        if (nextHeadingIndex < headingsList.length && headingsList[nextHeadingIndex].position.start.line === i) {\r\n          const headingEntry = headingsList[nextHeadingIndex];\r\n          const headingText = headingEntry.heading;\r\n          const headingTags = headingText.match(/#([\\p{L}\\p{N}_\\/-]+)/gu) || [];\r\n          currentSectionTags = headingTags.map(t => t.replace('#', '')).filter(Boolean);\r\n          let cleanText = headingText;\r\n          for (const tag of headingTags) cleanText = cleanText.replace(tag, '').trim();\r\n          currentHeader = cleanText || '';\r\n          nextHeadingIndex++;\r\n          continue;\r\n        }\r\n\r\n        // 块\r\n        if (line.trim() === '<!-- start -->') {\r\n          const endIdx = lines.indexOf('<!-- end -->', i + 1);\r\n          if (endIdx !== -1) {\r\n            const blockItem = parseBlockContent(filePath, lines, i, endIdx, parentFolder);\r\n            if (blockItem) {\r\n              blockItem.created  = file.stat.ctime;\r\n              blockItem.modified = file.stat.mtime;\r\n              if (currentHeader) blockItem.header = currentHeader;\r\n              blockItem.tags = Array.from(new Set([...currentSectionTags, ...blockItem.tags]));\r\n\r\n              let name = file.name.toLowerCase().endsWith('.md') ? file.name.slice(0, -3) : file.name;\r\n              blockItem.filename = name;\r\n              fileItems.push(blockItem);\r\n            }\r\n            i = endIdx;\r\n            continue;\r\n          }\r\n        }\r\n\r\n        // 任务\r\n        const taskItem = parseTaskLine(filePath, line, i + 1, parentFolder);\r\n        if (taskItem) {\r\n          taskItem.tags     = Array.from(new Set([...currentSectionTags, ...taskItem.tags]));\r\n          taskItem.created  = file.stat.ctime;\r\n          taskItem.modified = file.stat.mtime;\r\n          if (currentHeader) taskItem.header = currentHeader;\r\n\r\n          let name = file.name.toLowerCase().endsWith('.md') ? file.name.slice(0, -3) : file.name;\r\n          taskItem.filename = name;\r\n          fileItems.push(taskItem);\r\n        }\r\n      }\r\n\r\n      // 替换旧索引\r\n      if (this.fileIndex.has(filePath)) {\r\n        this.items = this.items.filter(it => it.id && !it.id.startsWith(filePath + '#'));\r\n      }\r\n      this.fileIndex.set(filePath, fileItems);\r\n      this.items.push(...fileItems);\r\n      return fileItems;\r\n    } catch (err) {\r\n      console.error('ThinkPlugin: 扫描文件失败', file.path, err);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  /** 从存储中移除指定文件的 Items */\r\n  removeFileItems(filePath: string) {\r\n    if (this.fileIndex.has(filePath)) {\r\n      this.fileIndex.delete(filePath);\r\n      this.items = this.items.filter(it => !it.id.startsWith(filePath + '#'));\r\n    }\r\n  }\r\n\r\n  /** 兼容旧调用名 */\r\n  removeFile(path: string) {\r\n    this.removeFileItems(path);\r\n  }\r\n\r\n  /* ---------- 查询 ---------- */\r\n\r\n  queryItems(filters: FilterRule[] = [], sortRules: SortRule[] = []): Item[] {\r\n    let results = this.items.filter(item =>\r\n      (filters || []).every(rule => this._matchItem(item, rule))\r\n    );\r\n\r\n    if (sortRules.length > 0) {\r\n      results.sort((a, b) => {\r\n        for (const rule of sortRules) {\r\n          const aVal = readField(a, rule.field);\r\n          const bVal = readField(b, rule.field);\r\n          if (aVal == null && bVal == null) continue;\r\n          if (aVal == null) return rule.dir === 'asc' ? 1 : -1;\r\n          if (bVal == null) return rule.dir === 'asc' ? -1 : 1;\r\n\r\n          if (typeof aVal === 'number' && typeof bVal === 'number') {\r\n            if (aVal !== bVal) return rule.dir === 'asc' ? aVal - bVal : bVal - aVal;\r\n          } else {\r\n            const aStr = String(aVal);\r\n            const bStr = String(bVal);\r\n            if (aStr !== bStr) return rule.dir === 'asc' ? aStr.localeCompare(bStr) : bStr.localeCompare(aStr);\r\n          }\r\n        }\r\n        return 0;\r\n      });\r\n    }\r\n    return results;\r\n  }\r\n\r\n  /** 兼容旧调用名 */\r\n  query(filters: FilterRule[] = [], sortRules: SortRule[] = []) {\r\n    return this.queryItems(filters, sortRules);\r\n  }\r\n\r\n  /* ---------- 标记任务完成（统一调用 Service） ---------- */\r\n  async markItemDone(itemId: string): Promise<void> {\r\n    await TaskService.completeTask(itemId);\r\n  }\r\n\r\n  /* ---------- 订阅 ---------- */\r\n\r\n  private _emitChange() {\r\n    this.changeListeners.forEach(fn => {\r\n      try { fn(); } catch (e) { console.error('ThinkPlugin: 数据变化通知错误', e); }\r\n    });\r\n  }\r\n  private _emitThrottled = throttle(() => this._emitChange(), 250);\r\n\r\n  subscribe(listener: () => void) { this.changeListeners.add(listener); }\r\n  unsubscribe(listener: () => void) { this.changeListeners.delete(listener); }\r\n  notifyChange() { this._emitThrottled(); }\r\n\r\n  /* ---------- 过滤匹配 ---------- */\r\n  private _matchItem(item: Item, rule: FilterRule): boolean {\r\n    const fieldVal = readField(item, rule.field);\r\n    const cmpVal   = rule.value;\r\n\r\n    if (rule.op === '=' || rule.op === '!=') {\r\n      const isEqual = fieldVal != null && cmpVal != null && String(fieldVal) === String(cmpVal);\r\n      return rule.op === '=' ? isEqual : !isEqual;\r\n    }\r\n    if (rule.op === 'includes') {\r\n      if (fieldVal == null) return false;\r\n      if (Array.isArray(fieldVal)) return fieldVal.some(v => String(v).includes(String(cmpVal)));\r\n      return String(fieldVal).includes(String(cmpVal));\r\n    }\r\n    if (rule.op === 'regex') {\r\n      if (fieldVal == null) return false;\r\n      try {\r\n        const regex = new RegExp(String(cmpVal));\r\n        if (Array.isArray(fieldVal)) return fieldVal.some(v => regex.test(String(v)));\r\n        return regex.test(String(fieldVal));\r\n      } catch {\r\n        console.warn('ThinkPlugin: 无效的正则表达式', cmpVal);\r\n        return false;\r\n      }\r\n    }\r\n    if (rule.op === '>' || rule.op === '<') {\r\n      if (fieldVal == null) return false;\r\n\r\n      const itemNum = Number(fieldVal);\r\n      const cmpNum  = Number(cmpVal);\r\n      if (!isNaN(itemNum) && !isNaN(cmpNum)) return rule.op === '>' ? itemNum > cmpNum : itemNum < cmpNum;\r\n\r\n      const itemTime = Date.parse(String(fieldVal));\r\n      const cmpTime  = Date.parse(String(cmpVal));\r\n      if (!isNaN(itemTime) && !isNaN(cmpTime)) return rule.op === '>' ? itemTime > cmpTime : itemTime < cmpTime;\r\n\r\n      const aStr = String(fieldVal);\r\n      const bStr = String(cmpVal);\r\n      return rule.op === '>' ? aStr > bStr : aStr < bStr;\r\n    }\r\n    return false;\r\n  }\r\n}","var n,l,u,t,i,r,o,e,f,c,s,a,h,p={},v=[],y=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,w=Array.isArray;function d(n,l){for(var u in l)n[u]=l[u];return n}function g(n){n&&n.parentNode&&n.parentNode.removeChild(n)}function _(l,u,t){var i,r,o,e={};for(o in u)\"key\"==o?i=u[o]:\"ref\"==o?r=u[o]:e[o]=u[o];if(arguments.length>2&&(e.children=arguments.length>3?n.call(arguments,2):t),\"function\"==typeof l&&null!=l.defaultProps)for(o in l.defaultProps)void 0===e[o]&&(e[o]=l.defaultProps[o]);return m(l,e,i,r,null)}function m(n,t,i,r,o){var e={type:n,props:t,key:i,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:null==o?++u:o,__i:-1,__u:0};return null==o&&null!=l.vnode&&l.vnode(e),e}function b(){return{current:null}}function k(n){return n.children}function x(n,l){this.props=n,this.context=l}function S(n,l){if(null==l)return n.__?S(n.__,n.__i+1):null;for(var u;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e)return u.__e;return\"function\"==typeof n.type?S(n):null}function C(n){var l,u;if(null!=(n=n.__)&&null!=n.__c){for(n.__e=n.__c.base=null,l=0;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e){n.__e=n.__c.base=u.__e;break}return C(n)}}function M(n){(!n.__d&&(n.__d=!0)&&i.push(n)&&!$.__r++||r!=l.debounceRendering)&&((r=l.debounceRendering)||o)($)}function $(){for(var n,u,t,r,o,f,c,s=1;i.length;)i.length>s&&i.sort(e),n=i.shift(),s=i.length,n.__d&&(t=void 0,o=(r=(u=n).__v).__e,f=[],c=[],u.__P&&((t=d({},r)).__v=r.__v+1,l.vnode&&l.vnode(t),O(u.__P,t,r,u.__n,u.__P.namespaceURI,32&r.__u?[o]:null,f,null==o?S(r):o,!!(32&r.__u),c),t.__v=r.__v,t.__.__k[t.__i]=t,z(f,t,c),t.__e!=o&&C(t)));$.__r=0}function I(n,l,u,t,i,r,o,e,f,c,s){var a,h,y,w,d,g,_=t&&t.__k||v,m=l.length;for(f=P(u,l,_,f,m),a=0;a<m;a++)null!=(y=u.__k[a])&&(h=-1==y.__i?p:_[y.__i]||p,y.__i=a,g=O(n,y,h,i,r,o,e,f,c,s),w=y.__e,y.ref&&h.ref!=y.ref&&(h.ref&&q(h.ref,null,y),s.push(y.ref,y.__c||w,y)),null==d&&null!=w&&(d=w),4&y.__u||h.__k===y.__k?f=A(y,f,n):\"function\"==typeof y.type&&void 0!==g?f=g:w&&(f=w.nextSibling),y.__u&=-7);return u.__e=d,f}function P(n,l,u,t,i){var r,o,e,f,c,s=u.length,a=s,h=0;for(n.__k=new Array(i),r=0;r<i;r++)null!=(o=l[r])&&\"boolean\"!=typeof o&&\"function\"!=typeof o?(f=r+h,(o=n.__k[r]=\"string\"==typeof o||\"number\"==typeof o||\"bigint\"==typeof o||o.constructor==String?m(null,o,null,null,null):w(o)?m(k,{children:o},null,null,null):null==o.constructor&&o.__b>0?m(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o).__=n,o.__b=n.__b+1,e=null,-1!=(c=o.__i=L(o,u,f,a))&&(a--,(e=u[c])&&(e.__u|=2)),null==e||null==e.__v?(-1==c&&(i>s?h--:i<s&&h++),\"function\"!=typeof o.type&&(o.__u|=4)):c!=f&&(c==f-1?h--:c==f+1?h++:(c>f?h--:h++,o.__u|=4))):n.__k[r]=null;if(a)for(r=0;r<s;r++)null!=(e=u[r])&&0==(2&e.__u)&&(e.__e==t&&(t=S(e)),B(e,e));return t}function A(n,l,u){var t,i;if(\"function\"==typeof n.type){for(t=n.__k,i=0;t&&i<t.length;i++)t[i]&&(t[i].__=n,l=A(t[i],l,u));return l}n.__e!=l&&(l&&n.type&&!u.contains(l)&&(l=S(n)),u.insertBefore(n.__e,l||null),l=n.__e);do{l=l&&l.nextSibling}while(null!=l&&8==l.nodeType);return l}function H(n,l){return l=l||[],null==n||\"boolean\"==typeof n||(w(n)?n.some(function(n){H(n,l)}):l.push(n)),l}function L(n,l,u,t){var i,r,o=n.key,e=n.type,f=l[u];if(null===f&&null==n.key||f&&o==f.key&&e==f.type&&0==(2&f.__u))return u;if(t>(null!=f&&0==(2&f.__u)?1:0))for(i=u-1,r=u+1;i>=0||r<l.length;){if(i>=0){if((f=l[i])&&0==(2&f.__u)&&o==f.key&&e==f.type)return i;i--}if(r<l.length){if((f=l[r])&&0==(2&f.__u)&&o==f.key&&e==f.type)return r;r++}}return-1}function T(n,l,u){\"-\"==l[0]?n.setProperty(l,null==u?\"\":u):n[l]=null==u?\"\":\"number\"!=typeof u||y.test(l)?u:u+\"px\"}function j(n,l,u,t,i){var r,o;n:if(\"style\"==l)if(\"string\"==typeof u)n.style.cssText=u;else{if(\"string\"==typeof t&&(n.style.cssText=t=\"\"),t)for(l in t)u&&l in u||T(n.style,l,\"\");if(u)for(l in u)t&&u[l]==t[l]||T(n.style,l,u[l])}else if(\"o\"==l[0]&&\"n\"==l[1])r=l!=(l=l.replace(f,\"$1\")),o=l.toLowerCase(),l=o in n||\"onFocusOut\"==l||\"onFocusIn\"==l?o.slice(2):l.slice(2),n.l||(n.l={}),n.l[l+r]=u,u?t?u.u=t.u:(u.u=c,n.addEventListener(l,r?a:s,r)):n.removeEventListener(l,r?a:s,r);else{if(\"http://www.w3.org/2000/svg\"==i)l=l.replace(/xlink(H|:h)/,\"h\").replace(/sName$/,\"s\");else if(\"width\"!=l&&\"height\"!=l&&\"href\"!=l&&\"list\"!=l&&\"form\"!=l&&\"tabIndex\"!=l&&\"download\"!=l&&\"rowSpan\"!=l&&\"colSpan\"!=l&&\"role\"!=l&&\"popover\"!=l&&l in n)try{n[l]=null==u?\"\":u;break n}catch(n){}\"function\"==typeof u||(null==u||!1===u&&\"-\"!=l[4]?n.removeAttribute(l):n.setAttribute(l,\"popover\"==l&&1==u?\"\":u))}}function F(n){return function(u){if(this.l){var t=this.l[u.type+n];if(null==u.t)u.t=c++;else if(u.t<t.u)return;return t(l.event?l.event(u):u)}}}function O(n,u,t,i,r,o,e,f,c,s){var a,h,p,v,y,_,m,b,S,C,M,$,P,A,H,L,T,j=u.type;if(null!=u.constructor)return null;128&t.__u&&(c=!!(32&t.__u),o=[f=u.__e=t.__e]),(a=l.__b)&&a(u);n:if(\"function\"==typeof j)try{if(b=u.props,S=\"prototype\"in j&&j.prototype.render,C=(a=j.contextType)&&i[a.__c],M=a?C?C.props.value:a.__:i,t.__c?m=(h=u.__c=t.__c).__=h.__E:(S?u.__c=h=new j(b,M):(u.__c=h=new x(b,M),h.constructor=j,h.render=D),C&&C.sub(h),h.props=b,h.state||(h.state={}),h.context=M,h.__n=i,p=h.__d=!0,h.__h=[],h._sb=[]),S&&null==h.__s&&(h.__s=h.state),S&&null!=j.getDerivedStateFromProps&&(h.__s==h.state&&(h.__s=d({},h.__s)),d(h.__s,j.getDerivedStateFromProps(b,h.__s))),v=h.props,y=h.state,h.__v=u,p)S&&null==j.getDerivedStateFromProps&&null!=h.componentWillMount&&h.componentWillMount(),S&&null!=h.componentDidMount&&h.__h.push(h.componentDidMount);else{if(S&&null==j.getDerivedStateFromProps&&b!==v&&null!=h.componentWillReceiveProps&&h.componentWillReceiveProps(b,M),!h.__e&&null!=h.shouldComponentUpdate&&!1===h.shouldComponentUpdate(b,h.__s,M)||u.__v==t.__v){for(u.__v!=t.__v&&(h.props=b,h.state=h.__s,h.__d=!1),u.__e=t.__e,u.__k=t.__k,u.__k.some(function(n){n&&(n.__=u)}),$=0;$<h._sb.length;$++)h.__h.push(h._sb[$]);h._sb=[],h.__h.length&&e.push(h);break n}null!=h.componentWillUpdate&&h.componentWillUpdate(b,h.__s,M),S&&null!=h.componentDidUpdate&&h.__h.push(function(){h.componentDidUpdate(v,y,_)})}if(h.context=M,h.props=b,h.__P=n,h.__e=!1,P=l.__r,A=0,S){for(h.state=h.__s,h.__d=!1,P&&P(u),a=h.render(h.props,h.state,h.context),H=0;H<h._sb.length;H++)h.__h.push(h._sb[H]);h._sb=[]}else do{h.__d=!1,P&&P(u),a=h.render(h.props,h.state,h.context),h.state=h.__s}while(h.__d&&++A<25);h.state=h.__s,null!=h.getChildContext&&(i=d(d({},i),h.getChildContext())),S&&!p&&null!=h.getSnapshotBeforeUpdate&&(_=h.getSnapshotBeforeUpdate(v,y)),L=a,null!=a&&a.type===k&&null==a.key&&(L=N(a.props.children)),f=I(n,w(L)?L:[L],u,t,i,r,o,e,f,c,s),h.base=u.__e,u.__u&=-161,h.__h.length&&e.push(h),m&&(h.__E=h.__=null)}catch(n){if(u.__v=null,c||null!=o)if(n.then){for(u.__u|=c?160:128;f&&8==f.nodeType&&f.nextSibling;)f=f.nextSibling;o[o.indexOf(f)]=null,u.__e=f}else for(T=o.length;T--;)g(o[T]);else u.__e=t.__e,u.__k=t.__k;l.__e(n,u,t)}else null==o&&u.__v==t.__v?(u.__k=t.__k,u.__e=t.__e):f=u.__e=V(t.__e,u,t,i,r,o,e,c,s);return(a=l.diffed)&&a(u),128&u.__u?void 0:f}function z(n,u,t){for(var i=0;i<t.length;i++)q(t[i],t[++i],t[++i]);l.__c&&l.__c(u,n),n.some(function(u){try{n=u.__h,u.__h=[],n.some(function(n){n.call(u)})}catch(n){l.__e(n,u.__v)}})}function N(n){return\"object\"!=typeof n||null==n||n.__b&&n.__b>0?n:w(n)?n.map(N):d({},n)}function V(u,t,i,r,o,e,f,c,s){var a,h,v,y,d,_,m,b=i.props,k=t.props,x=t.type;if(\"svg\"==x?o=\"http://www.w3.org/2000/svg\":\"math\"==x?o=\"http://www.w3.org/1998/Math/MathML\":o||(o=\"http://www.w3.org/1999/xhtml\"),null!=e)for(a=0;a<e.length;a++)if((d=e[a])&&\"setAttribute\"in d==!!x&&(x?d.localName==x:3==d.nodeType)){u=d,e[a]=null;break}if(null==u){if(null==x)return document.createTextNode(k);u=document.createElementNS(o,x,k.is&&k),c&&(l.__m&&l.__m(t,e),c=!1),e=null}if(null==x)b===k||c&&u.data==k||(u.data=k);else{if(e=e&&n.call(u.childNodes),b=i.props||p,!c&&null!=e)for(b={},a=0;a<u.attributes.length;a++)b[(d=u.attributes[a]).name]=d.value;for(a in b)if(d=b[a],\"children\"==a);else if(\"dangerouslySetInnerHTML\"==a)v=d;else if(!(a in k)){if(\"value\"==a&&\"defaultValue\"in k||\"checked\"==a&&\"defaultChecked\"in k)continue;j(u,a,null,d,o)}for(a in k)d=k[a],\"children\"==a?y=d:\"dangerouslySetInnerHTML\"==a?h=d:\"value\"==a?_=d:\"checked\"==a?m=d:c&&\"function\"!=typeof d||b[a]===d||j(u,a,d,b[a],o);if(h)c||v&&(h.__html==v.__html||h.__html==u.innerHTML)||(u.innerHTML=h.__html),t.__k=[];else if(v&&(u.innerHTML=\"\"),I(\"template\"==t.type?u.content:u,w(y)?y:[y],t,i,r,\"foreignObject\"==x?\"http://www.w3.org/1999/xhtml\":o,e,f,e?e[0]:i.__k&&S(i,0),c,s),null!=e)for(a=e.length;a--;)g(e[a]);c||(a=\"value\",\"progress\"==x&&null==_?u.removeAttribute(\"value\"):null!=_&&(_!==u[a]||\"progress\"==x&&!_||\"option\"==x&&_!=b[a])&&j(u,a,_,b[a],o),a=\"checked\",null!=m&&m!=u[a]&&j(u,a,m,b[a],o))}return u}function q(n,u,t){try{if(\"function\"==typeof n){var i=\"function\"==typeof n.__u;i&&n.__u(),i&&null==u||(n.__u=n(u))}else n.current=u}catch(n){l.__e(n,t)}}function B(n,u,t){var i,r;if(l.unmount&&l.unmount(n),(i=n.ref)&&(i.current&&i.current!=n.__e||q(i,null,u)),null!=(i=n.__c)){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(n){l.__e(n,u)}i.base=i.__P=null}if(i=n.__k)for(r=0;r<i.length;r++)i[r]&&B(i[r],u,t||\"function\"!=typeof n.type);t||g(n.__e),n.__c=n.__=n.__e=void 0}function D(n,l,u){return this.constructor(n,u)}function E(u,t,i){var r,o,e,f;t==document&&(t=document.documentElement),l.__&&l.__(u,t),o=(r=\"function\"==typeof i)?null:i&&i.__k||t.__k,e=[],f=[],O(t,u=(!r&&i||t).__k=_(k,null,[u]),o||p,p,t.namespaceURI,!r&&i?[i]:o?null:t.firstChild?n.call(t.childNodes):null,e,!r&&i?i:o?o.__e:t.firstChild,r,f),z(e,u,f)}function G(n,l){E(n,l,G)}function J(l,u,t){var i,r,o,e,f=d({},l.props);for(o in l.type&&l.type.defaultProps&&(e=l.type.defaultProps),u)\"key\"==o?i=u[o]:\"ref\"==o?r=u[o]:f[o]=void 0===u[o]&&null!=e?e[o]:u[o];return arguments.length>2&&(f.children=arguments.length>3?n.call(arguments,2):t),m(l.type,f,i||l.key,r||l.ref,null)}function K(n){function l(n){var u,t;return this.getChildContext||(u=new Set,(t={})[l.__c]=this,this.getChildContext=function(){return t},this.componentWillUnmount=function(){u=null},this.shouldComponentUpdate=function(n){this.props.value!=n.value&&u.forEach(function(n){n.__e=!0,M(n)})},this.sub=function(n){u.add(n);var l=n.componentWillUnmount;n.componentWillUnmount=function(){u&&u.delete(n),l&&l.call(n)}}),n.children}return l.__c=\"__cC\"+h++,l.__=n,l.Provider=l.__l=(l.Consumer=function(n,l){return n.children(l)}).contextType=l,l}n=v.slice,l={__e:function(n,l,u,t){for(var i,r,o;l=l.__;)if((i=l.__c)&&!i.__)try{if((r=i.constructor)&&null!=r.getDerivedStateFromError&&(i.setState(r.getDerivedStateFromError(n)),o=i.__d),null!=i.componentDidCatch&&(i.componentDidCatch(n,t||{}),o=i.__d),o)return i.__E=i}catch(l){n=l}throw n}},u=0,t=function(n){return null!=n&&null==n.constructor},x.prototype.setState=function(n,l){var u;u=null!=this.__s&&this.__s!=this.state?this.__s:this.__s=d({},this.state),\"function\"==typeof n&&(n=n(d({},u),this.props)),n&&d(u,n),null!=n&&this.__v&&(l&&this._sb.push(l),M(this))},x.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),M(this))},x.prototype.render=k,i=[],o=\"function\"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,e=function(n,l){return n.__v.__b-l.__v.__b},$.__r=0,f=/(PointerCapture)$|Capture$/i,c=0,s=F(!1),a=F(!0),h=0;export{x as Component,k as Fragment,J as cloneElement,K as createContext,_ as createElement,b as createRef,_ as h,G as hydrate,t as isValidElement,l as options,E as render,H as toChildArray};\n//# sourceMappingURL=preact.module.js.map\n","import{options as r,Fragment as e}from\"preact\";export{Fragment}from\"preact\";var t=/[\"&<]/;function n(r){if(0===r.length||!1===t.test(r))return r;for(var e=0,n=0,o=\"\",f=\"\";n<r.length;n++){switch(r.charCodeAt(n)){case 34:f=\"&quot;\";break;case 38:f=\"&amp;\";break;case 60:f=\"&lt;\";break;default:continue}n!==e&&(o+=r.slice(e,n)),o+=f,e=n+1}return n!==e&&(o+=r.slice(e,n)),o}var o=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,f=0,i=Array.isArray;function u(e,t,n,o,i,u){t||(t={});var a,c,p=t;if(\"ref\"in p)for(c in p={},t)\"ref\"==c?a=t[c]:p[c]=t[c];var l={type:e,props:p,key:n,ref:a,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--f,__i:-1,__u:0,__source:i,__self:u};if(\"function\"==typeof e&&(a=e.defaultProps))for(c in a)void 0===p[c]&&(p[c]=a[c]);return r.vnode&&r.vnode(l),l}function a(r){var t=u(e,{tpl:r,exprs:[].slice.call(arguments,1)});return t.key=t.__v,t}var c={},p=/[A-Z]/g;function l(e,t){if(r.attr){var f=r.attr(e,t);if(\"string\"==typeof f)return f}if(t=function(r){return null!==r&&\"object\"==typeof r&&\"function\"==typeof r.valueOf?r.valueOf():r}(t),\"ref\"===e||\"key\"===e)return\"\";if(\"style\"===e&&\"object\"==typeof t){var i=\"\";for(var u in t){var a=t[u];if(null!=a&&\"\"!==a){var l=\"-\"==u[0]?u:c[u]||(c[u]=u.replace(p,\"-$&\").toLowerCase()),s=\";\";\"number\"!=typeof a||l.startsWith(\"--\")||o.test(l)||(s=\"px;\"),i=i+l+\":\"+a+s}}return e+'=\"'+n(i)+'\"'}return null==t||!1===t||\"function\"==typeof t||\"object\"==typeof t?\"\":!0===t?e:e+'=\"'+n(\"\"+t)+'\"'}function s(r){if(null==r||\"boolean\"==typeof r||\"function\"==typeof r)return null;if(\"object\"==typeof r){if(void 0===r.constructor)return r;if(i(r)){for(var e=0;e<r.length;e++)r[e]=s(r[e]);return r}}return n(\"\"+r)}export{u as jsx,l as jsxAttr,u as jsxDEV,s as jsxEscape,a as jsxTemplate,u as jsxs};\n//# sourceMappingURL=jsxRuntime.module.js.map\n","// utils/obsidian.ts\r\nimport { DataStore } from '../data/store';\r\n\r\nexport function makeObsUri(itemId: string): string {\r\n  const hashIndex = itemId.lastIndexOf('#');\r\n  const filePath = hashIndex >= 0 ? itemId.substring(0, hashIndex) : itemId;\r\n  const lineNo = hashIndex >= 0 ? itemId.substring(hashIndex + 1) : '';\r\n  const vaultName = encodeURIComponent(DataStore.instance['app'].vault.getName());\r\n  return `obsidian://advanced-uri?vault=${vaultName}&filepath=${encodeURIComponent(filePath)}${lineNo ? '&line=' + lineNo : ''}`;\r\n}","// views/common/TaskCheckbox.tsx\r\nimport { h, JSX } from 'preact';\r\n\r\ninterface TaskCheckboxProps {\r\n  done: boolean;\r\n  /** 勾选后触发（仅在未完成 → 完成时调用） */\r\n  onMarkDone?: () => void;\r\n}\r\n\r\nexport function TaskCheckbox({ done, onMarkDone }: TaskCheckboxProps) {\r\n  const base = 'task-checkbox' + (done ? ' done' : '');\r\n  const handle: JSX.GenericEventHandler<HTMLInputElement> = e => {\r\n    if (!done && onMarkDone) onMarkDone();\r\n  };\r\n\r\n  return (\r\n    <input\r\n      type=\"checkbox\"\r\n      class={base}\r\n      checked={done}\r\n      onClick={done ? e => e.preventDefault() : undefined}\r\n      onChange={handle}\r\n    />\r\n  );\r\n}","// views/TableView.tsx\r\n// 精简复选框逻辑，复用 TaskCheckbox\r\nimport { h } from 'preact';\r\nimport { JSX } from 'preact';\r\nimport { Item, readField } from '../config/schema';\r\nimport { DataStore } from '../data/store';\r\nimport { makeObsUri } from '../utils/obsidian';\r\nimport { EMPTY_LABEL } from '../config/constants';\r\nimport { TaskCheckbox } from './common/TaskCheckbox';   // ★ 新增\r\n\r\ninterface TableViewProps {\r\n  items: Item[];\r\n  rowField: string;\r\n  colField: string;\r\n}\r\n\r\nexport function TableView({ items, rowField, colField }: TableViewProps) {\r\n  if (!rowField || !colField)\r\n    return <div>（TableView 需要配置 rowField 和 colField）</div>;\r\n\r\n  const rowVals: string[] = [];\r\n  const colVals: string[] = [];\r\n  const matrix: Record<string, Record<string, Item[]>> = {};\r\n\r\n  items.forEach(it => {\r\n    const r = String(readField(it, rowField) ?? EMPTY_LABEL);\r\n    const c = String(readField(it, colField) ?? EMPTY_LABEL);\r\n    if (!matrix[r]) {\r\n      matrix[r] = {};\r\n      rowVals.push(r);\r\n    }\r\n    if (!matrix[r][c]) matrix[r][c] = [];\r\n    matrix[r][c].push(it);\r\n    if (!colVals.includes(c)) colVals.push(c);\r\n  });\r\n\r\n  rowVals.sort();\r\n  colVals.sort();\r\n\r\n  return (\r\n    <table class=\"think-table\">\r\n      <thead>\r\n        <tr>\r\n          <th>{rowField}</th>\r\n          {colVals.map(c => (\r\n            <th key={c}>{c}</th>\r\n          ))}\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {rowVals.map(r => (\r\n          <tr key={r}>\r\n            <td>\r\n              <strong>{r}</strong>\r\n            </td>\r\n            {colVals.map(c => {\r\n              const cellItems = matrix[r]?.[c] || [];\r\n              return !cellItems.length ? (\r\n                <td key={c} class=\"empty\" />\r\n              ) : (\r\n                <td key={c}>\r\n                  {cellItems.map(it => (\r\n                    <div key={it.id}>{renderCellItem(it)}</div>\r\n                  ))}\r\n                </td>\r\n              );\r\n            })}\r\n          </tr>\r\n        ))}\r\n      </tbody>\r\n    </table>\r\n  );\r\n}\r\n\r\n/* ---------- 单元格内渲染 ---------- */\r\nfunction renderCellItem(item: Item) {\r\n  if (item.type === 'task') {\r\n    const isDone = item.status === 'done';\r\n    return (\r\n      <span>\r\n        <TaskCheckbox\r\n          done={isDone}\r\n          onMarkDone={() => DataStore.instance.markItemDone(item.id)}\r\n        />\r\n        {item.icon && <span class=\"task-icon\">{item.icon}</span>}\r\n        <a href={makeObsUri(item.id)} target=\"_blank\" rel=\"noopener\">\r\n          {item.title}\r\n        </a>\r\n      </span>\r\n    );\r\n  }\r\n  return (\r\n    <a href={makeObsUri(item.id)} target=\"_blank\" rel=\"noopener\">\r\n      {item.title}\r\n    </a>\r\n  );\r\n}","// config/categoryColorMap.ts\r\n\r\n// 类别到颜色的映射\r\nexport const CATEGORY_COLOR_MAP: Record<string, string> = {\r\n  打卡: '#d2cceb',\r\n  任务: '#caebf3',\r\n  计划: '#d8ecb2',\r\n  总结: '#E5D5B9',\r\n  事件: '#94e2d6',\r\n  感受: '#93daf0',\r\n  思考: '#f09393',\r\n  // ... 其它类别\r\n};\r\n\r\nexport function getCategoryColor(category: string): string {\r\n  return CATEGORY_COLOR_MAP[category] || '#e0e0e0';\r\n}\r\n","// views/BlockView.tsx\r\n// 主要改动：使用公共 TaskCheckbox 组件，删除重复逻辑\r\nimport { h, JSX } from 'preact';\r\nimport { Item, readField } from '../config/schema';\r\nimport { getCategoryColor } from '../config/categoryColorMap';\r\nimport { DataStore } from '../data/store';\r\nimport { makeObsUri } from '../utils/obsidian';\r\nimport { TaskCheckbox } from './common/TaskCheckbox';   // ★ 新增\r\n\r\ninterface BlockViewProps {\r\n  items: Item[];\r\n  groupField?: string;\r\n  showMeta?: boolean;\r\n  fields?: string[];\r\n}\r\n\r\nexport function BlockView(props: BlockViewProps) {\r\n  const { groupField, showMeta = true, fields } = props;\r\n  let items = props.items;\r\n\r\n  /* ------------------------- 分组逻辑保持不变 ------------------------- */\r\n  let grouped: Record<string, Item[]> | null = null;\r\n  let groupKeys: string[] = [];\r\n  if (groupField) {\r\n    grouped = {};\r\n    for (const it of items) {\r\n      const key = String(readField(it, groupField) ?? '(none)');\r\n      if (!grouped[key]) {\r\n        grouped[key] = [];\r\n        groupKeys.push(key);\r\n      }\r\n      grouped[key].push(it);\r\n    }\r\n    groupKeys.sort();\r\n  }\r\n\r\n  /* ------------------------- 渲染任务 / Block ------------------------- */\r\n\r\n  const renderTaskLine = (item: Item) => {\r\n    const isDone = item.status === 'done';\r\n    return (\r\n      <div style=\"margin-bottom:4px;line-height:1.5;\">\r\n        <TaskCheckbox\r\n          done={isDone}\r\n          onMarkDone={() => DataStore.instance.markItemDone(item.id)}\r\n        />\r\n        <a\r\n          href={makeObsUri(item.id)}\r\n          target=\"_blank\"\r\n          rel=\"noopener\"\r\n          class={isDone ? 'task-done' : ''}\r\n        >\r\n          {item.title}\r\n        </a>\r\n        {item.icon && <span class=\"tag-pill\">{item.icon}</span>}\r\n        {item.tags.map(t => (\r\n          <span class=\"tag-pill\" key={t}>\r\n            {t}\r\n          </span>\r\n        ))}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const renderBlock = (item: Item) => (\r\n    <div\r\n      style=\"\r\n        display:grid;\r\n        grid-template-columns:auto minmax(180px,1fr);\r\n        align-items:start;\r\n        gap:8px;\r\n        margin-bottom:8px;\r\n      \"\r\n    >\r\n      {showMeta && (\r\n        <div style=\"font-size:90%;display:flex;flex-wrap:wrap;gap:4px;\">\r\n          <span\r\n            class=\"tag-pill\"\r\n            style={`background:${getCategoryColor(item.category)};`}\r\n          >\r\n            {item.category}\r\n          </span>\r\n          {item.date && <span class=\"tag-pill\">{item.date}</span>}\r\n          {item.extra['图标'] && (\r\n            <span class=\"tag-pill\">{item.extra['图标']}</span>\r\n          )}\r\n        </div>\r\n      )}\r\n      <div style=\"white-space:pre-wrap;line-height:1.5;\">\r\n        <a href={makeObsUri(item.id)} target=\"_blank\" rel=\"noopener\">\r\n          {item.content}\r\n        </a>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  const renderItem = (it: Item) =>\r\n    it.type === 'task' ? renderTaskLine(it) : renderBlock(it);\r\n\r\n  /* ------------------------- 输出 ------------------------- */\r\n  return (\r\n    <div>\r\n      {grouped\r\n        ? groupKeys.map(grp => (\r\n            <div key={grp}>\r\n              <h5>{grp}</h5>\r\n              {grouped![grp].map(renderItem)}\r\n            </div>\r\n          ))\r\n        : items.map(renderItem)}\r\n    </div>\r\n  );\r\n}","// views/TimelineView.tsx - 时间轴视图组件 (占位实现)\r\n\r\nexport function TimelineView(props: any) {\r\n  return <div>（Timeline 视图暂未实现）</div>;\r\n}","// views/CalendarView.tsx - 日历视图组件 (占位实现)\r\nimport { render, h } from 'preact';  // 使用 Preact 渲染 JSX 组件\r\nexport function CalendarView(props: any) {\r\n  return <div>（Calendar 日视图暂未实现）</div>;\r\n}","// views/ChartView.tsx - 图表视图组件 (占位实现)\r\nimport { render } from 'preact';  // 使用 Preact 渲染 JSX 组件\r\nexport function ChartView(props: any) {\r\n  return <div>（Chart 图表视图暂未实现）</div>;\r\n}","// views/ExcelView.tsx\r\n\r\nimport { h } from 'preact';\r\nimport { Item, getAllFields, readField } from '../config/schema';\r\n\r\ninterface ExcelViewProps {\r\n  items: Item[];\r\n  fields?: string[];\r\n}\r\n\r\nfunction toText(v: any): string {\r\n  if (Array.isArray(v)) return v.join(', ');\r\n  return v == null ? '' : String(v);\r\n}\r\n\r\nexport function ExcelView({ items, fields }: ExcelViewProps) {\r\n  const cols = (fields && fields.length) ? fields : getAllFields(items);\r\n\r\n  return (\r\n    <div>\r\n      <table class=\"think-table\" style=\"min-width:100%; white-space:nowrap;\">\r\n        <thead>\r\n          <tr>{cols.map(c => <th key={c}>{c}</th>)}</tr>\r\n        </thead>\r\n        <tbody>\r\n          {items.map(it => (\r\n            <tr key={it.id}>\r\n              {cols.map(c => <td key={c}>{toText(readField(it, c))}</td>)}\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n}\r\n","import{options as n}from\"preact\";var t,r,u,i,o=0,f=[],c=n,e=c.__b,a=c.__r,v=c.diffed,l=c.__c,m=c.unmount,s=c.__;function p(n,t){c.__h&&c.__h(r,n,o||t),o=0;var u=r.__H||(r.__H={__:[],__h:[]});return n>=u.__.length&&u.__.push({}),u.__[n]}function d(n){return o=1,h(D,n)}function h(n,u,i){var o=p(t++,2);if(o.t=n,!o.__c&&(o.__=[i?i(u):D(void 0,u),function(n){var t=o.__N?o.__N[0]:o.__[0],r=o.t(t,n);t!==r&&(o.__N=[r,o.__[1]],o.__c.setState({}))}],o.__c=r,!r.__f)){var f=function(n,t,r){if(!o.__c.__H)return!0;var u=o.__c.__H.__.filter(function(n){return!!n.__c});if(u.every(function(n){return!n.__N}))return!c||c.call(this,n,t,r);var i=o.__c.props!==n;return u.forEach(function(n){if(n.__N){var t=n.__[0];n.__=n.__N,n.__N=void 0,t!==n.__[0]&&(i=!0)}}),c&&c.call(this,n,t,r)||i};r.__f=!0;var c=r.shouldComponentUpdate,e=r.componentWillUpdate;r.componentWillUpdate=function(n,t,r){if(this.__e){var u=c;c=void 0,f(n,t,r),c=u}e&&e.call(this,n,t,r)},r.shouldComponentUpdate=f}return o.__N||o.__}function y(n,u){var i=p(t++,3);!c.__s&&C(i.__H,u)&&(i.__=n,i.u=u,r.__H.__h.push(i))}function _(n,u){var i=p(t++,4);!c.__s&&C(i.__H,u)&&(i.__=n,i.u=u,r.__h.push(i))}function A(n){return o=5,T(function(){return{current:n}},[])}function F(n,t,r){o=6,_(function(){if(\"function\"==typeof n){var r=n(t());return function(){n(null),r&&\"function\"==typeof r&&r()}}if(n)return n.current=t(),function(){return n.current=null}},null==r?r:r.concat(n))}function T(n,r){var u=p(t++,7);return C(u.__H,r)&&(u.__=n(),u.__H=r,u.__h=n),u.__}function q(n,t){return o=8,T(function(){return n},t)}function x(n){var u=r.context[n.__c],i=p(t++,9);return i.c=n,u?(null==i.__&&(i.__=!0,u.sub(r)),u.props.value):n.__}function P(n,t){c.useDebugValue&&c.useDebugValue(t?t(n):n)}function b(n){var u=p(t++,10),i=d();return u.__=n,r.componentDidCatch||(r.componentDidCatch=function(n,t){u.__&&u.__(n,t),i[1](n)}),[i[0],function(){i[1](void 0)}]}function g(){var n=p(t++,11);if(!n.__){for(var u=r.__v;null!==u&&!u.__m&&null!==u.__;)u=u.__;var i=u.__m||(u.__m=[0,0]);n.__=\"P\"+i[0]+\"-\"+i[1]++}return n.__}function j(){for(var n;n=f.shift();)if(n.__P&&n.__H)try{n.__H.__h.forEach(z),n.__H.__h.forEach(B),n.__H.__h=[]}catch(t){n.__H.__h=[],c.__e(t,n.__v)}}c.__b=function(n){r=null,e&&e(n)},c.__=function(n,t){n&&t.__k&&t.__k.__m&&(n.__m=t.__k.__m),s&&s(n,t)},c.__r=function(n){a&&a(n),t=0;var i=(r=n.__c).__H;i&&(u===r?(i.__h=[],r.__h=[],i.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(i.__h.forEach(z),i.__h.forEach(B),i.__h=[],t=0)),u=r},c.diffed=function(n){v&&v(n);var t=n.__c;t&&t.__H&&(t.__H.__h.length&&(1!==f.push(t)&&i===c.requestAnimationFrame||((i=c.requestAnimationFrame)||w)(j)),t.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),u=r=null},c.__c=function(n,t){t.some(function(n){try{n.__h.forEach(z),n.__h=n.__h.filter(function(n){return!n.__||B(n)})}catch(r){t.some(function(n){n.__h&&(n.__h=[])}),t=[],c.__e(r,n.__v)}}),l&&l(n,t)},c.unmount=function(n){m&&m(n);var t,r=n.__c;r&&r.__H&&(r.__H.__.forEach(function(n){try{z(n)}catch(n){t=n}}),r.__H=void 0,t&&c.__e(t,r.__v))};var k=\"function\"==typeof requestAnimationFrame;function w(n){var t,r=function(){clearTimeout(u),k&&cancelAnimationFrame(t),setTimeout(n)},u=setTimeout(r,35);k&&(t=requestAnimationFrame(r))}function z(n){var t=r,u=n.__c;\"function\"==typeof u&&(n.__c=void 0,u()),r=t}function B(n){var t=r;n.__c=n.__(),r=t}function C(n,t){return!n||n.length!==t.length||t.some(function(t,r){return t!==n[r]})}function D(n,t){return\"function\"==typeof t?t(n):t}export{q as useCallback,x as useContext,P as useDebugValue,y as useEffect,b as useErrorBoundary,g as useId,F as useImperativeHandle,_ as useLayoutEffect,T as useMemo,h as useReducer,A as useRef,d as useState};\n//# sourceMappingURL=hooks.module.js.map\n","// views/SettingsFormView.tsx\r\nimport { useState } from 'preact/hooks';\r\nimport ThinkPlugin from '../main';\r\n\r\ninterface SettingsFormViewProps {\r\n  /** 设置的 key，默认 'inputSettings' */\r\n  storageKey?: string;\r\n  /** plugin 实例由 Dashboard 注入 */\r\n  plugin: ThinkPlugin;\r\n}\r\n\r\nexport function SettingsFormView({ storageKey = 'inputSettings', plugin }: SettingsFormViewProps) {\r\n  const init = (plugin as any)[storageKey] || {};\r\n  const [form, setForm] = useState<Record<string, any>>(\r\n    typeof structuredClone === 'function' ? structuredClone(init) : JSON.parse(JSON.stringify(init))\r\n  );\r\n\r\n  const change = (k: string, v: any) => setForm(f => ({ ...f, [k]: v }));\r\n\r\n  const save = async () => {\r\n    (plugin as any)[storageKey] = form; // 写入内存\r\n    // 写回 dashboards + inputSettings（保持其它字段不丢）\r\n    await plugin.persistAll();\r\n    alert('已保存配置');\r\n  };\r\n\r\n  /* —— 下面是你需要的字段；可继续加 —— */\r\n  return (\r\n    <div style=\"display:flex;flex-direction:column;gap:6px;max-width:420px;\">\r\n      <label>\r\n        主题 (可层级“生活/健康”)：\r\n        <input\r\n          value={form.topic || ''}\r\n          onInput={e => change('topic', (e.target as HTMLInputElement).value)}\r\n        />\r\n      </label>\r\n\r\n      <label>\r\n        图标 (emoji)：\r\n        <input\r\n          value={form.icon || ''}\r\n          onInput={e => change('icon', (e.target as HTMLInputElement).value)}\r\n          placeholder=\"✨\"\r\n        />\r\n      </label>\r\n\r\n      <label>\r\n        任务字段清单 (逗号分隔)：\r\n        <input\r\n          value={form.taskFields || ''}\r\n          onInput={e => change('taskFields', (e.target as HTMLInputElement).value)}\r\n          placeholder=\"status,icon,repeat,…\"\r\n        />\r\n      </label>\r\n\r\n      <label>\r\n        Block 字段清单 (逗号分隔)：\r\n        <input\r\n          value={form.blockFields || ''}\r\n          onInput={e => change('blockFields', (e.target as HTMLInputElement).value)}\r\n          placeholder=\"分类,周期,日期,主题,图标,内容\"\r\n        />\r\n      </label>\r\n\r\n      <button style=\"margin-top:8px;\" onClick={save}>💾 保存配置</button>\r\n    </div>\r\n  );\r\n}\r\n","// views/index.ts - 视图组件注册表，将视图名称映射到组件\r\nimport { TableView }    from './TableView';\r\nimport { BlockView }    from './BlockView';\r\nimport { TimelineView } from './TimelineView';\r\nimport { CalendarView } from './CalendarView';\r\nimport { ChartView }    from './ChartView';\r\nimport { ExcelView }    from './ExcelView';\r\nimport { SettingsFormView } from './SettingsFormView'; \r\n/** 唯一维护的清单 */\r\nexport const VIEW_REGISTRY = {\r\n  TableView,\r\n  BlockView,\r\n  TimelineView,\r\n  CalendarView,\r\n  ChartView,\r\n  ExcelView,\r\n  SettingsFormView, \r\n} as const;\r\n\r\nexport const ViewComponents = VIEW_REGISTRY;\r\nexport type ViewName = keyof typeof VIEW_REGISTRY;\r\nexport const VIEW_OPTIONS: ViewName[] = Object.keys(VIEW_REGISTRY) as ViewName[];\r\n","// ui/SettingsTab.ts - 设置面板，提供仪表盘配置的可视化编辑\r\nimport { App, PluginSettingTab, Setting, Notice } from 'obsidian';\r\nimport {\r\n  DashboardConfig, ModuleConfig, FilterRule, SortRule,\r\n  getAllFields\r\n} from '../config/schema';\r\nimport ThinkPlugin from '../main';\r\nimport { VIEW_OPTIONS } from '../views';\r\nimport { OPS } from '../config/constants';  \r\n\r\nexport class SettingsTab extends PluginSettingTab {\r\n  plugin: ThinkPlugin;\r\n  private selectedDashName: string = '';\r\n\r\n  constructor(app: App, plugin: ThinkPlugin) {\r\n    super(app, plugin);\r\n    this.plugin = plugin;\r\n    if (plugin.dashboards.length > 0) {\r\n      this.selectedDashName = plugin.dashboards[0].name;\r\n    }\r\n  }\r\n\r\n  display(): void {\r\n    const { containerEl } = this;\r\n    containerEl.empty();\r\n    containerEl.createEl('h2', { text: 'Think 仪表盘 配置编辑' });\r\n\r\n    /* ---------- 字段/值建议 ---------- */\r\n    const allItems = this.plugin.dataStore.queryItems();\r\n    const fieldOptions = getAllFields(allItems); // 一处维护\r\n\r\n    const tagSet = new Set<string>();\r\n    const categorySet = new Set<string>();\r\n    const statusSet = new Set<string>();\r\n    const recurrenceSet = new Set<string>();\r\n    const typeSet = new Set<string>();\r\n\r\n    for (const item of allItems) {\r\n      (item.tags || []).forEach(t => t && tagSet.add(t));\r\n      if (item.category) categorySet.add(item.category);\r\n      if (item.status) statusSet.add(item.status);\r\n      if (item.recurrence) recurrenceSet.add(item.recurrence);\r\n      if (item.type) typeSet.add(item.type);\r\n    }\r\n\r\n    const tagsList = containerEl.createEl('datalist');\r\n    tagsList.id = 'think-tags-list';\r\n    Array.from(tagSet).forEach(opt => tagsList.createEl('option', { value: opt }));\r\n\r\n    const categoryList = containerEl.createEl('datalist');\r\n    categoryList.id = 'think-category-list';\r\n    Array.from(categorySet).forEach(opt => categoryList.createEl('option', { value: opt }));\r\n\r\n    const statusList = containerEl.createEl('datalist');\r\n    statusList.id = 'think-status-list';\r\n    Array.from(statusSet).forEach(opt => statusList.createEl('option', { value: opt }));\r\n\r\n    const recurrenceList = containerEl.createEl('datalist');\r\n    recurrenceList.id = 'think-recurrence-list';\r\n    Array.from(recurrenceSet).forEach(opt => recurrenceList.createEl('option', { value: opt }));\r\n\r\n    const typeList = containerEl.createEl('datalist');\r\n    typeList.id = 'think-type-list';\r\n    Array.from(typeSet).forEach(opt => typeList.createEl('option', { value: opt }));\r\n\r\n    const fieldsList = containerEl.createEl('datalist');\r\n    fieldsList.id = 'think-fields-list';\r\n    fieldOptions.forEach(opt => fieldsList.createEl('option', { value: opt }));\r\n\r\n    /* ---------- 当前仪表盘选择 ---------- */\r\n    const selectDash = containerEl.createEl('select');\r\n    for (const dash of this.plugin.dashboards) {\r\n      const opt = selectDash.createEl('option', { text: dash.name });\r\n      opt.value = dash.name;\r\n      if (dash.name === this.selectedDashName) opt.selected = true;\r\n    }\r\n    selectDash.onchange = () => {\r\n      this.selectedDashName = selectDash.value;\r\n      this.display();\r\n    };\r\n\r\n    const btnAdd = containerEl.createEl('button', { text: '新建仪表盘' });\r\n    btnAdd.style.marginLeft = '8px';\r\n    btnAdd.onclick = () => {\r\n      let baseName = '新仪表盘';\r\n      let newName = baseName;\r\n      let count = 1;\r\n      while (this.plugin.dashboards.find(d => d.name === newName)) {\r\n        newName = baseName + count++;\r\n      }\r\n      const newDash: DashboardConfig = { name: newName, modules: [] };\r\n      this.plugin.dashboards.push(newDash);\r\n      this.selectedDashName = newName;\r\n      this.plugin.saveData({ dashboards: this.plugin.dashboards });\r\n      new Notice('已添加新仪表盘配置');\r\n      this.display();\r\n    };\r\n\r\n    if (this.plugin.dashboards.length > 0) {\r\n      const btnDel = containerEl.createEl('button', { text: '删除当前仪表盘' });\r\n      btnDel.style.marginLeft = '8px';\r\n      btnDel.onclick = () => {\r\n        const idx = this.plugin.dashboards.findIndex(d => d.name === this.selectedDashName);\r\n        if (idx >= 0) {\r\n          this.plugin.dashboards.splice(idx, 1);\r\n          new Notice(`已删除配置：${this.selectedDashName}`);\r\n          this.selectedDashName = this.plugin.dashboards.length ? this.plugin.dashboards[0].name : '';\r\n          this.plugin.saveData({ dashboards: this.plugin.dashboards });\r\n          this.display();\r\n        }\r\n      };\r\n    }\r\n    containerEl.createEl('hr');\r\n\r\n    const dash = this.plugin.dashboards.find(d => d.name === this.selectedDashName);\r\n    if (!dash) return;\r\n\r\n    /* ---------- 基础设置 ---------- */\r\n    const baseFieldset = containerEl.createEl('fieldset');\r\n    baseFieldset.createEl('legend', { text: '基础设置' });\r\n    new Setting(baseFieldset).setName('仪表盘名称').addText(text => {\r\n      text.setValue(dash.name).onChange(val => {\r\n        dash.name = val.trim();\r\n      });\r\n    });\r\n    new Setting(baseFieldset).setName('数据源路径').addText(text => {\r\n      text.setValue(dash.path || '').onChange(val => {\r\n        dash.path = val.trim();\r\n      });\r\n    });\r\n    new Setting(baseFieldset).setName('标签 (用逗号分隔)').addText(text => {\r\n      const tagStr = Array.isArray(dash.tags) ? dash.tags.join(',') : (dash.tags || '');\r\n      text.setValue(tagStr).onChange(val => {\r\n        dash.tags = val.split(/[,，]/).map(t => t.trim()).filter(t => t);\r\n      });\r\n    });\r\n    new Setting(baseFieldset).setName('初始视图').addDropdown(drop => {\r\n      const views = ['年', '季', '月', '周', '天'];\r\n      views.forEach(v => drop.addOption(v, v));\r\n      drop.setValue(dash.initialView || '月');\r\n      drop.onChange(val => { dash.initialView = val; });\r\n    });\r\n    const now = new Date();\r\n    const todayStr = `${now.getFullYear()}-${String(now.getMonth()+1).padStart(2, '0')}-${String(now.getDate()).padStart(2, '0')}`;\r\n    const initialDateStr = dash.initialDate || todayStr;\r\n    if (!dash.initialDate) dash.initialDate = initialDateStr;\r\n    new Setting(baseFieldset).setName('初始日期').addText(text => {\r\n      text.inputEl.type = 'date';\r\n      text.setValue(initialDateStr).onChange(val => {\r\n        dash.initialDate = val;\r\n      });\r\n    });\r\n\r\n    containerEl.createEl('h3', { text: '模块列表' });\r\n\r\n    /* ---------- 模块编辑 ---------- */\r\n    dash.modules.forEach((mod, idx) => {\r\n      const modFieldset = containerEl.createEl('fieldset');\r\n      modFieldset.style.border = '1px solid #ccc';\r\n      modFieldset.style.padding = '8px';\r\n      modFieldset.style.marginBottom = '8px';\r\n      modFieldset.dataset.index = idx.toString();\r\n\r\n      modFieldset.createEl('legend', { text: `${mod.title || '模块'} (${mod.view})` });\r\n\r\n      new Setting(modFieldset).setName('模块标题').addText(t => {\r\n        t.setValue(mod.title).onChange(val => mod.title = val);\r\n      });\r\n\r\n      new Setting(modFieldset).setName('视图类型').addDropdown(dd => {\r\n        VIEW_OPTIONS.forEach(v => dd.addOption(v, v));\r\n        dd.setValue(mod.view);\r\n        dd.onChange(val => {\r\n          mod.view = val as ModuleConfig['view'];\r\n          this.display();\r\n        });\r\n      });\r\n\r\n      new Setting(modFieldset).addToggle(cb => {\r\n        cb.setValue(!!mod.collapsed).onChange(val => { mod.collapsed = val; });\r\n      }).setName('默认折叠');\r\n\r\n      if (mod.view === 'TableView') {\r\n        new Setting(modFieldset).setName('行字段 (rowField)').addText(t => {\r\n          t.setValue(mod.props?.rowField || '').onChange(val => {\r\n            if (!mod.props) mod.props = {};\r\n            mod.props.rowField = val.trim();\r\n          });\r\n          t.inputEl.setAttr('list','think-fields-list');\r\n        });\r\n        new Setting(modFieldset).setName('列字段 (colField)').addText(t => {\r\n          t.setValue(mod.props?.colField || '').onChange(val => {\r\n            if (!mod.props) mod.props = {};\r\n            mod.props.colField = val.trim();\r\n          });\r\n          t.inputEl.setAttr('list','think-fields-list');\r\n        });\r\n      }\r\n      if (mod.view === 'BlockView' || mod.view === 'TimelineView') {\r\n        new Setting(modFieldset).setName('分组字段').addText(t => {\r\n          t.setValue(mod.group || '').onChange(val => {\r\n            mod.group = val.trim() || undefined;\r\n          });\r\n          t.inputEl.setAttr('list','think-fields-list');\r\n        });\r\n      }\r\n      if (mod.view !== 'TableView' && mod.view !== 'ChartView' && mod.view !== 'CalendarView') {\r\n        new Setting(modFieldset).setName('显示字段 (用逗号分隔)').addText(t => {\r\n          const fieldStr = mod.fields ? mod.fields.join(',') : '';\r\n          t.setPlaceholder('如 title,tags,date').setValue(fieldStr).onChange(val => {\r\n            const fieldsArr = val.split(/[,，]/).map(f => f.trim()).filter(f => f);\r\n            mod.fields = fieldsArr.length > 0 ? fieldsArr : undefined;\r\n          });\r\n          t.inputEl.setAttr('list','think-fields-list');\r\n        });\r\n      }\r\n\r\n      // 过滤\r\n      const filterDiv = modFieldset.createDiv();\r\n      filterDiv.style.borderTop = '1px dashed #ccc';\r\n      filterDiv.style.marginTop = '6px';\r\n      filterDiv.style.paddingTop = '6px';\r\n      filterDiv.createEl('strong', { text: '过滤规则' });\r\n      (mod.filters || []).forEach((rule, ridx) => {\r\n        const rowDiv = filterDiv.createDiv({ cls: 'filter-row' });\r\n        rowDiv.style.display = 'flex';\r\n        rowDiv.style.marginBottom = '4px';\r\n\r\n        const fieldInput = rowDiv.createEl('input');\r\n        fieldInput.type = 'text';\r\n        fieldInput.style.flex = '0 0 30%';\r\n        fieldInput.value = rule.field;\r\n        fieldInput.setAttr('list', 'think-fields-list');\r\n\r\n        const opSelect = rowDiv.createEl('select');\r\n        OPS.forEach(op => {\r\n          opSelect.add(new Option(op, op, false, op === rule.op));\r\n        });\r\n      \r\n        opSelect.onchange = () => { rule.op = opSelect.value as FilterRule['op']; };\r\n\r\n        const valueInput = rowDiv.createEl('input');\r\n        valueInput.type = 'text';\r\n        valueInput.style.flex = '0 0 30%';\r\n        valueInput.value = String(rule.value);\r\n\r\n        const updateValueDatalist = () => {\r\n          valueInput.removeAttribute('list');\r\n          const f = fieldInput.value.trim();\r\n          if (f === 'tags') valueInput.setAttr('list','think-tags-list');\r\n          else if (f === 'category') valueInput.setAttr('list','think-category-list');\r\n          else if (f === 'status') valueInput.setAttr('list','think-status-list');\r\n          else if (f === 'recurrence') valueInput.setAttr('list','think-recurrence-list');\r\n          else if (f === 'type') valueInput.setAttr('list','think-type-list');\r\n        };\r\n        updateValueDatalist();\r\n\r\n        fieldInput.onchange = () => {\r\n          rule.field = fieldInput.value.trim();\r\n          updateValueDatalist();\r\n        };\r\n        valueInput.onchange = () => { rule.value = valueInput.value; };\r\n\r\n        const delBtn = rowDiv.createEl('button', { text: '删除' });\r\n        delBtn.onclick = () => {\r\n          mod.filters!.splice(ridx, 1);\r\n          this.display();\r\n        };\r\n      });\r\n      const addFilterBtn = filterDiv.createEl('button', { text: '+ 添加过滤条件' });\r\n      addFilterBtn.onclick = () => {\r\n        if (!mod.filters) mod.filters = [];\r\n        mod.filters.push({ field: '', op: '=', value: '' });\r\n        this.display();\r\n      };\r\n\r\n      // 排序\r\n      const sortDiv = modFieldset.createDiv();\r\n      sortDiv.style.borderTop = '1px dashed #ccc';\r\n      sortDiv.style.marginTop = '6px';\r\n      sortDiv.style.paddingTop = '6px';\r\n      sortDiv.createEl('strong', { text: '排序规则' });\r\n      (mod.sort || []).forEach((rule, ridx) => {\r\n        const rowDiv = sortDiv.createDiv({ cls: 'sort-row' });\r\n        rowDiv.style.display = 'flex';\r\n        rowDiv.style.marginBottom = '4px';\r\n\r\n        const fieldInput = rowDiv.createEl('input');\r\n        fieldInput.type = 'text';\r\n        fieldInput.style.flex = '0 0 40%';\r\n        fieldInput.value = rule.field;\r\n        fieldInput.setAttr('list', 'think-fields-list');\r\n        fieldInput.onchange = () => rule.field = fieldInput.value.trim();\r\n\r\n        const dirSelect = rowDiv.createEl('select');\r\n        [['asc','升序'], ['desc','降序']].forEach(([val,label]) => {\r\n          dirSelect.add(new Option(label, val, false, val === rule.dir));\r\n        });\r\n        dirSelect.onchange = () => { rule.dir = dirSelect.value as SortRule['dir']; };\r\n\r\n        const delBtn = rowDiv.createEl('button', { text: '删除' });\r\n        delBtn.style.marginLeft = '4px';\r\n        delBtn.onclick = () => {\r\n          mod.sort!.splice(ridx, 1);\r\n          this.display();\r\n        };\r\n      });\r\n      const addSortBtn = sortDiv.createEl('button', { text: '+ 添加排序条件' });\r\n      addSortBtn.onclick = () => {\r\n        if (!mod.sort) mod.sort = [];\r\n        mod.sort.push({ field: '', dir: 'asc' });\r\n        this.display();\r\n      };\r\n\r\n      // 上移/下移/删除模块\r\n      const actionsDiv = modFieldset.createDiv({ cls: 'module-actions' });\r\n      actionsDiv.style.textAlign = 'right';\r\n      if (idx > 0) {\r\n        const upBtn = actionsDiv.createEl('button', { text: '↑ 上移' });\r\n        upBtn.onclick = () => {\r\n          const mods = dash.modules;\r\n          [mods[idx-1], mods[idx]] = [mods[idx], mods[idx-1]];\r\n          this.display();\r\n        };\r\n      }\r\n      if (idx < dash.modules.length - 1) {\r\n        const downBtn = actionsDiv.createEl('button', { text: '↓ 下移' });\r\n        downBtn.onclick = () => {\r\n          const mods = dash.modules;\r\n          [mods[idx+1], mods[idx]] = [mods[idx], mods[idx+1]];\r\n          this.display();\r\n        };\r\n      }\r\n      const delBtn = actionsDiv.createEl('button', { text: '删除模块' });\r\n      delBtn.onclick = () => {\r\n        dash.modules.splice(idx, 1);\r\n        this.display();\r\n      };\r\n    });\r\n\r\n    // 添加新模块\r\n    const newModDiv = containerEl.createDiv();\r\n    const newSelect = newModDiv.createEl('select');\r\n    VIEW_OPTIONS.forEach(v => {\r\n      newSelect.add(new Option(v, v));\r\n    });\r\n    const addModBtn = newModDiv.createEl('button', { text: '添加模块' });\r\n    addModBtn.style.marginLeft = '6px';\r\n    addModBtn.onclick = () => {\r\n      const viewType = newSelect.value as ModuleConfig['view'];\r\n      const newModule: ModuleConfig = {\r\n        view: viewType,\r\n        title: '新模块',\r\n        collapsed: false,\r\n        filters: [],\r\n        sort: [],\r\n        props: {}\r\n      };\r\n      dash.modules.push(newModule);\r\n      this.display();\r\n    };\r\n\r\n    // 保存\r\n    containerEl.createEl('hr');\r\n    const saveBtn = containerEl.createEl('button', { text: '保存配置' });\r\n    saveBtn.onclick = () => {\r\n      if (dash.name !== this.selectedDashName) {\r\n        if (this.plugin.dashboards.some(d => d !== dash && d.name === dash.name)) {\r\n          new Notice('配置名称已存在，请更换名称');\r\n          return;\r\n        }\r\n      }\r\n      this.plugin.saveData({ dashboards: this.plugin.dashboards }).then(() => {\r\n        new Notice('仪表盘配置已保存');\r\n        this.plugin.refreshAllDashboards();\r\n        this.selectedDashName = dash.name;\r\n        this.display();\r\n      });\r\n    };\r\n  }\r\n}","// core/VaultWatcher.ts\r\nimport { Plugin, TFile } from 'obsidian';\r\nimport { DataStore } from '../data/store';\r\n\r\n/** 监听 Vault 变化并与 DataStore 联动（节流由 DataStore 内部处理） */\r\nexport class VaultWatcher {\r\n  private plugin: Plugin;\r\n  private dataStore: DataStore;\r\n\r\n  constructor(plugin: Plugin, dataStore: DataStore) {\r\n    this.plugin    = plugin;\r\n    this.dataStore = dataStore;\r\n    this.registerEvents();\r\n  }\r\n\r\n  private registerEvents() {\r\n    const { app } = this.plugin;\r\n    const onVault = app.vault.on.bind(app.vault);\r\n    const rescan  = (f: TFile) =>\r\n      this.dataStore.scanFile(f).then(() => this.dataStore.notifyChange());\r\n\r\n    this.plugin.registerEvent(onVault('modify', f => {\r\n      if (f instanceof TFile && f.extension === 'md') rescan(f);\r\n    }));\r\n    this.plugin.registerEvent(onVault('create', f => {\r\n      if (f instanceof TFile && f.extension === 'md') rescan(f);\r\n    }));\r\n    this.plugin.registerEvent(onVault('delete', f => {\r\n      if (f instanceof TFile && f.extension === 'md') {\r\n        this.dataStore.removeFileItems(f.path);\r\n        this.dataStore.notifyChange();\r\n      }\r\n    }));\r\n    this.plugin.registerEvent(onVault('rename', (f, old) => {\r\n      if (f instanceof TFile && f.extension === 'md') {\r\n        this.dataStore.removeFileItems(old);\r\n        rescan(f);\r\n      }\r\n    }));\r\n  }\r\n}","// views/ModulePanel.tsx\r\n\r\n\r\n// 折叠组件：支持 Ctrl/⌘ + 点击标题一键折叠/展开全部模块\r\nimport { h } from 'preact';\r\nimport { useState, useRef, useEffect } from 'preact/hooks';\r\nimport { ModuleConfig } from '../config/schema';\r\n\r\ninterface ModulePanelProps {\r\n  module: ModuleConfig;\r\n  children: any;\r\n}\r\n\r\nexport function ModulePanel({ module, children }: ModulePanelProps) {\r\n  const [collapsed, setCollapsed] = useState<boolean>(!!module.collapsed);\r\n  const rootRef = useRef<HTMLDivElement>(null);\r\n\r\n  const toggleCollapsed = () => setCollapsed(v => !v);\r\n\r\n  const onHeaderClick = (e: MouseEvent) => {\r\n    if (e.metaKey || e.ctrlKey) {\r\n      // 广播事件给所有模块\r\n      const want = !collapsed;\r\n      const ev = new CustomEvent('think-toggle-all', { detail: want });\r\n      document.querySelectorAll('.think-module').forEach(el => el.dispatchEvent(ev));\r\n    } else {\r\n      toggleCollapsed();\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const handler = (ev: any) => {\r\n      const want: boolean = ev.detail;\r\n      setCollapsed(want);\r\n    };\r\n    const el = rootRef.current;\r\n    if (!el) return;\r\n    el.addEventListener('think-toggle-all', handler as any);\r\n    return () => el.removeEventListener('think-toggle-all', handler as any);\r\n  }, []);\r\n\r\n  return (\r\n    <div class=\"think-module\" ref={rootRef}>\r\n      <div class=\"module-header\" onClick={onHeaderClick as any} title=\"点击折叠/展开；Ctrl/⌘ + 点击：全部折叠/展开\">\r\n        <span class=\"module-title\">{module.title}</span>\r\n        <span class=\"module-toggle\">{collapsed ? '▶' : '▼'}</span>\r\n      </div>\r\n      {!collapsed && <div class=\"module-content\">{children}</div>}\r\n    </div>\r\n  );\r\n}\r\n","// views/Dashboard.tsx\r\n// 顶栏增加快速过滤；与 DataStore 拆分兼容；显示配置区域保留\r\nimport { h } from 'preact';\r\nimport { useState, useEffect } from 'preact/hooks';\r\nimport { DataStore } from '../data/store';\r\nimport { DashboardConfig, ModuleConfig, getAllFields } from '../config/schema';\r\nimport { ModulePanel } from './ModulePanel';\r\nimport type ThinkPlugin from '../main';\r\nimport { TFile, TFolder, Notice } from 'obsidian';\r\nimport { ViewComponents } from './index';\r\nimport { getDateRange } from '../utils/date';   // \r\n\r\nconst QUARTER_TEXT = ['一', '二', '三', '四'];\r\n\r\ninterface DashboardProps {\r\n  config: DashboardConfig;\r\n  dataStore: DataStore;\r\n  plugin: ThinkPlugin;\r\n}\r\n\r\nexport function Dashboard({ config, dataStore, plugin }: DashboardProps) {\r\n  const moment = (window as any).moment;\r\n  const initialView = config.initialView || '月';\r\n  const initialDateMoment = config.initialDate\r\n    ? moment(config.initialDate, 'YYYY-MM-DD')\r\n    : moment();\r\n\r\n  const [currentView, setCurrentView] = useState(initialView);\r\n  const [currentDate, setCurrentDate] = useState(initialDateMoment);\r\n  const [showConfig, setShowConfig] = useState(false);\r\n  const [tempConfig, setTempConfig] = useState<DashboardConfig | null>(null);\r\n  const [newViewType, setNewViewType] = useState('TableView');\r\n  const [dataVersion, setDataVersion] = useState(0);\r\n  const [keyword, setKeyword] = useState('');\r\n\r\n  useEffect(() => {\r\n    const onData = () => setDataVersion(v => v + 1);\r\n    dataStore.subscribe(onData);\r\n    return () => dataStore.unsubscribe(onData);\r\n  }, [dataStore]);\r\n\r\n  useEffect(() => {\r\n    if (showConfig) {\r\n      const clone = (cfg: DashboardConfig) =>\r\n        typeof structuredClone === 'function'\r\n          ? structuredClone(cfg)\r\n          : JSON.parse(JSON.stringify(cfg));\r\n      setTempConfig(clone(config));\r\n      setNewViewType('TableView');\r\n    } else {\r\n      setTempConfig(null);\r\n    }\r\n  }, [showConfig, config]);\r\n\r\n  const { startDate, endDate } = getDateRange(currentDate, currentView);\r\n  \r\n\r\n  const formattedDate = (date: any, viewType: string) => {\r\n    switch (viewType) {\r\n      case '年':\r\n        return date.format('YYYY年');\r\n      case '季': {\r\n        const q = date.quarter();\r\n        return `${date.year()}年${QUARTER_TEXT[q - 1]}季度`;\r\n      }\r\n      case '月':\r\n        return date.format('YYYY-MM');\r\n      case '周':\r\n        return date.format('YYYY-[W]WW');\r\n      case '天':\r\n        return date.format('YYYY-MM-DD');\r\n      default:\r\n        return date.format('YYYY-MM-DD');\r\n    }\r\n  };\r\n\r\n  const prevPeriod = () => {\r\n    switch (currentView) {\r\n      case '年':\r\n        setCurrentDate(currentDate.clone().subtract(1, 'year'));\r\n        break;\r\n      case '季':\r\n        setCurrentDate(currentDate.clone().subtract(1, 'quarter'));\r\n        break;\r\n      case '月':\r\n        setCurrentDate(currentDate.clone().subtract(1, 'month'));\r\n        break;\r\n      case '周':\r\n        setCurrentDate(currentDate.clone().subtract(1, 'week'));\r\n        break;\r\n      case '天':\r\n        setCurrentDate(currentDate.clone().subtract(1, 'day'));\r\n        break;\r\n    }\r\n  };\r\n  const nextPeriod = () => {\r\n    switch (currentView) {\r\n      case '年':\r\n        setCurrentDate(currentDate.clone().add(1, 'year'));\r\n        break;\r\n      case '季':\r\n        setCurrentDate(currentDate.clone().add(1, 'quarter'));\r\n        break;\r\n      case '月':\r\n        setCurrentDate(currentDate.clone().add(1, 'month'));\r\n        break;\r\n      case '周':\r\n        setCurrentDate(currentDate.clone().add(1, 'week'));\r\n        break;\r\n      case '天':\r\n        setCurrentDate(currentDate.clone().add(1, 'day'));\r\n        break;\r\n    }\r\n  };\r\n  const resetToday = () => setCurrentDate(moment());\r\n\r\n  const renderModule = (mod: ModuleConfig) => {\r\n    // ★★★ 先特判 SettingsFormView：它不需要 items，需要 plugin\r\n    if (mod.view === 'SettingsFormView') {\r\n      const ViewComp: any = ViewComponents[mod.view];\r\n      return (\r\n        <ModulePanel module={mod}>\r\n          <ViewComp plugin={plugin} storageKey=\"inputSettings\" />\r\n        </ModulePanel>\r\n      );\r\n    }\r\n\r\n    // 其他视图照旧\r\n    let items = dataStore.queryItems(mod.filters || [], mod.sort || []);\r\n\r\n    // 仪表盘级 tag/path 过滤\r\n    if (config.tags?.length) {\r\n      items = items.filter(it =>\r\n        it.tags.some(tag => config.tags!.some(t => tag.includes(t))),\r\n      );\r\n    }\r\n    if (config.path && config.path.trim() !== '') {\r\n      const target = config.path.trim();\r\n      const af = (DataStore.instance as any)['app'].vault.getAbstractFileByPath(target);\r\n      if (af) {\r\n        if (af instanceof TFolder) {\r\n          const prefix = target.endsWith('/') ? target : target + '/';\r\n          items = items.filter(it => it.id.startsWith(prefix));\r\n        } else if (af instanceof TFile) {\r\n          const prefix = target + '#';\r\n          items = items.filter(it => it.id.startsWith(prefix));\r\n        }\r\n      } else {\r\n        const prefix = target.endsWith('/') ? target : target + '/';\r\n        items = items.filter(it => it.id.startsWith(prefix));\r\n      }\r\n    }\r\n\r\n    // 时间范围过滤\r\n    if (currentView && currentDate) {\r\n    const { startDate, endDate } = getDateRange(currentDate, currentView);\r\n    items = items.filter(it => {\r\n      if (!it.date) return true; // 🟢 显示无日期项\r\n      const d = moment(it.date, 'YYYY-MM-DD');\r\n      return d.isSameOrAfter(startDate) && d.isSameOrBefore(endDate);\r\n    });\r\n    }\r\n\r\n    // 关键字过滤\r\n    if (keyword.trim()) {\r\n      const kw = keyword.toLowerCase();\r\n      items = items.filter(it =>\r\n        (it.title + ' ' + it.content).toLowerCase().includes(kw),\r\n      );\r\n    }\r\n\r\n    const ViewComp = (ViewComponents as any)[mod.view];\r\n    if (!ViewComp) {\r\n      return (\r\n        <ModulePanel module={mod}>\r\n          <div>未知视图: {mod.view}</div>\r\n        </ModulePanel>\r\n      );\r\n    }\r\n    const viewProps: any = { ...(mod.props || {}) };\r\n    if (mod.group) viewProps.groupField = mod.group;\r\n    if (mod.fields) viewProps.fields = mod.fields;\r\n\r\n    return (\r\n      <ModulePanel module={mod}>\r\n        <ViewComp items={items} {...viewProps} />\r\n      </ModulePanel>\r\n    );\r\n  };\r\n\r\n  /* ---------- 配置保存 ---------- */\r\n  const saveConfig = () => {\r\n    if (!tempConfig) return;\r\n    const oldName = config.name;\r\n    const newName = tempConfig.name.trim();\r\n    if (newName === '') {\r\n      new Notice('名称不能为空');\r\n      return;\r\n    }\r\n    if (newName !== oldName && plugin.dashboards.some(d => d !== config && d.name === newName)) {\r\n      new Notice('配置名称已存在，请更换名称');\r\n      return;\r\n    }\r\n\r\n    config.name         = newName;\r\n    config.path         = tempConfig.path || '';\r\n    config.tags         = tempConfig.tags || [];\r\n    config.initialView  = tempConfig.initialView || '月';\r\n    config.initialDate  = tempConfig.initialDate || moment().format('YYYY-MM-DD');\r\n    config.modules      = tempConfig.modules;\r\n\r\n    if (newName !== oldName) {\r\n      plugin.activeDashboards.forEach(e => {\r\n        if (e.configName === oldName) e.configName = newName;\r\n      });\r\n    }\r\n\r\n    // ⚠️ 这里也要把 inputSettings 一并存回，最保险的做法是调用 persistAll（如果有）\r\n    const saved = (plugin as any).persistAll\r\n      ? (plugin as any).persistAll()\r\n      : plugin.saveData({ dashboards: plugin.dashboards, inputSettings: (plugin as any).inputSettings });\r\n\r\n    Promise.resolve(saved).then(() => {\r\n      new Notice('仪表盘配置已保存');\r\n      plugin.refreshAllDashboards();\r\n    });\r\n    setShowConfig(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {/* 顶部工具栏 */}\r\n      <div class=\"tp-toolbar\" style=\"margin-bottom:8px;\">\r\n        {['年', '季', '月', '周', '天'].map(v => (\r\n          <button\r\n            onClick={() => setCurrentView(v)}\r\n            class={v === currentView ? 'active' : ''}\r\n          >\r\n            {v}\r\n          </button>\r\n        ))}\r\n        <button disabled style=\"font-weight:bold;margin:0 4px;background:#fff;cursor:default;\">\r\n          {formattedDate(currentDate, currentView)}\r\n        </button>\r\n        <button onClick={prevPeriod}>←</button>\r\n        <button onClick={nextPeriod}>→</button>\r\n        <button onClick={resetToday}>＝</button>\r\n        <input\r\n          placeholder=\"快速过滤…\"\r\n          style=\"margin-left:4px;\"\r\n          value={keyword}\r\n          onInput={e => setKeyword((e.target as HTMLInputElement).value)}\r\n        />\r\n        <button onClick={() => setShowConfig(!showConfig)} style=\"margin-left:4px;\">⚙︎</button>\r\n      </div>\r\n\r\n      {/* 配置面板（原样保留） */}\r\n      {showConfig && tempConfig && (\r\n        <div\r\n          style=\"border:1px solid #eee;padding:12px;margin-bottom:12px;border-radius:8px;background:#fcfcfc;\"\r\n        >\r\n          <h3 style=\"margin-top:0;\">编辑配置</h3>\r\n          <fieldset style=\"margin-bottom:10px;\">\r\n            <legend>基础设置</legend>\r\n            <label>\r\n              配置名称:\r\n              <input\r\n                type=\"text\"\r\n                value={tempConfig.name}\r\n                onInput={e =>\r\n                  setTempConfig({ ...tempConfig, name: (e.target as HTMLInputElement).value })\r\n                }\r\n              />\r\n            </label>\r\n            <br />\r\n            <label>\r\n              数据源路径:\r\n              <input\r\n                type=\"text\"\r\n                value={tempConfig.path || ''}\r\n                onInput={e =>\r\n                  setTempConfig({ ...tempConfig, path: (e.target as HTMLInputElement).value })\r\n                }\r\n              />\r\n            </label>\r\n            <br />\r\n            <label>\r\n              标签(逗号分隔):\r\n              <input\r\n                type=\"text\"\r\n                value={Array.isArray(tempConfig.tags) ? tempConfig.tags.join(',') : (tempConfig.tags || '')}\r\n                onInput={e => {\r\n                  const val = (e.target as HTMLInputElement).value;\r\n                  const tags = val.split(/[,，]/).map(t => t.trim()).filter(Boolean);\r\n                  setTempConfig({ ...tempConfig, tags });\r\n                }}\r\n              />\r\n            </label>\r\n            <br />\r\n            <label>\r\n              初始视图:\r\n              <select\r\n                value={tempConfig.initialView || '月'}\r\n                onChange={e =>\r\n                  setTempConfig({\r\n                    ...tempConfig,\r\n                    initialView: (e.target as HTMLSelectElement).value,\r\n                  })\r\n                }\r\n              >\r\n                {['年', '季', '月', '周', '天'].map(v => (\r\n                  <option value={v}>{v}</option>\r\n                ))}\r\n              </select>\r\n            </label>\r\n            <br />\r\n            <label>\r\n              初始日期:\r\n              <input\r\n                type=\"date\"\r\n                value={tempConfig.initialDate || moment().format('YYYY-MM-DD')}\r\n                onChange={e =>\r\n                  setTempConfig({\r\n                    ...tempConfig,\r\n                    initialDate: (e.target as HTMLInputElement).value,\r\n                  })\r\n                }\r\n              />\r\n            </label>\r\n            <br />\r\n          </fieldset>\r\n\r\n          <div id=\"modulesArea\">\r\n            {tempConfig.modules.map((mod, idx) => (\r\n              <fieldset style=\"border:1px solid #ccc;padding:8px;margin-bottom:8px;\">\r\n                <legend>\r\n                  {mod.title || '模块'} ({mod.view})\r\n                </legend>\r\n                <div>\r\n                  <label>\r\n                    模块标题:\r\n                    <input\r\n                      type=\"text\"\r\n                      value={mod.title}\r\n                      onInput={e => {\r\n                        const arr = [...tempConfig.modules];\r\n                        arr[idx] = { ...mod, title: (e.target as HTMLInputElement).value };\r\n                        setTempConfig({ ...tempConfig, modules: arr });\r\n                      }}\r\n                    />\r\n                  </label>\r\n                </div>\r\n                <div>\r\n                  <label>\r\n                    视图类型:\r\n                    <select\r\n                      value={mod.view}\r\n                      onChange={e => {\r\n                        const arr = [...tempConfig.modules];\r\n                        arr[idx] = { ...mod, view: (e.target as HTMLSelectElement).value as any };\r\n                        setTempConfig({ ...tempConfig, modules: arr });\r\n                      }}\r\n                    >\r\n                      {Object.keys(ViewComponents).map(v => (\r\n                        <option value={v}>{v}</option>\r\n                      ))}\r\n                    </select>\r\n                  </label>\r\n                </div>\r\n                <div>\r\n                  <label>\r\n                    默认折叠:\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      checked={!!mod.collapsed}\r\n                      onChange={e => {\r\n                        const arr = [...tempConfig.modules];\r\n                        arr[idx] = { ...mod, collapsed: (e.target as HTMLInputElement).checked };\r\n                        setTempConfig({ ...tempConfig, modules: arr });\r\n                      }}\r\n                    />\r\n                  </label>\r\n                </div>\r\n\r\n                {mod.view === 'TableView' && (\r\n                  <div>\r\n                    <label>\r\n                      行字段:\r\n                      <input\r\n                        type=\"text\"\r\n                        value={mod.props?.rowField || ''}\r\n                        onInput={e => {\r\n                          const arr = [...tempConfig.modules];\r\n                          arr[idx] = {\r\n                            ...mod,\r\n                            props: { ...mod.props, rowField: (e.target as HTMLInputElement).value },\r\n                          };\r\n                          setTempConfig({ ...tempConfig, modules: arr });\r\n                        }}\r\n                      />\r\n                    </label>\r\n                    <br />\r\n                    <label>\r\n                      列字段:\r\n                      <input\r\n                        type=\"text\"\r\n                        value={mod.props?.colField || ''}\r\n                        onInput={e => {\r\n                          const arr = [...tempConfig.modules];\r\n                          arr[idx] = {\r\n                            ...mod,\r\n                            props: { ...mod.props, colField: (e.target as HTMLInputElement).value },\r\n                          };\r\n                          setTempConfig({ ...tempConfig, modules: arr });\r\n                        }}\r\n                      />\r\n                    </label>\r\n                  </div>\r\n                )}\r\n\r\n                {(mod.view === 'BlockView' || mod.view === 'TimelineView') && (\r\n                  <div>\r\n                    <label>\r\n                      分组字段:\r\n                      <input\r\n                        type=\"text\"\r\n                        value={mod.group || ''}\r\n                        onInput={e => {\r\n                          const arr = [...tempConfig.modules];\r\n                          arr[idx] = { ...mod, group: (e.target as HTMLInputElement).value || undefined };\r\n                          setTempConfig({ ...tempConfig, modules: arr });\r\n                        }}\r\n                      />\r\n                    </label>\r\n                  </div>\r\n                )}\r\n\r\n                {mod.view !== 'TableView' &&\r\n                  mod.view !== 'ChartView' &&\r\n                  mod.view !== 'CalendarView' && (\r\n                    <div>\r\n                      <label>\r\n                        显示字段(逗号分隔 / * 为动态):\r\n                        <input\r\n                          type=\"text\"\r\n                          placeholder=\"如 title,tags,date 或 *\"\r\n                          value={mod.fields ? mod.fields.join(',') : ''}\r\n                          onInput={e => {\r\n                            const val = (e.target as HTMLInputElement).value;\r\n                            const arrFields =\r\n                              val.trim() === '*'\r\n                                ? ['*']\r\n                                : val.split(/[,，]/).map(f => f.trim()).filter(Boolean);\r\n                            const arr = [...tempConfig.modules];\r\n                            arr[idx] = { ...mod, fields: arrFields.length ? arrFields : undefined };\r\n                            setTempConfig({ ...tempConfig, modules: arr });\r\n                          }}\r\n                        />\r\n                      </label>\r\n                    </div>\r\n                  )}\r\n\r\n                {/* 过滤规则 */}\r\n                <div style=\"border-top:1px dashed #ccc;margin-top:6px;padding-top:6px;\">\r\n                  <strong>过滤规则</strong>\r\n                  {(mod.filters || []).map((rule, ridx) => (\r\n                    <div style=\"display:flex;margin-bottom:4px;\">\r\n                      <input\r\n                        type=\"text\"\r\n                        style=\"flex:0 0 30%;\"\r\n                        value={rule.field}\r\n                        onInput={e => {\r\n                          const nf = (e.target as HTMLInputElement).value;\r\n                          const nfils = [...(mod.filters || [])];\r\n                          nfils[ridx] = { ...rule, field: nf };\r\n                          const arr = [...tempConfig.modules];\r\n                          arr[idx] = { ...mod, filters: nfils };\r\n                          setTempConfig({ ...tempConfig, modules: arr });\r\n                        }}\r\n                      />\r\n                      <select\r\n                        value={rule.op}\r\n                        onChange={e => {\r\n                          const op = (e.target as HTMLSelectElement).value as typeof rule.op;\r\n                          const nfils = [...(mod.filters || [])];\r\n                          nfils[ridx] = { ...rule, op };\r\n                          const arr = [...tempConfig.modules];\r\n                          arr[idx] = { ...mod, filters: nfils };\r\n                          setTempConfig({ ...tempConfig, modules: arr });\r\n                        }}\r\n                      >\r\n                        {['=', '!=', 'includes', 'regex', '>', '<'].map(op => (\r\n                          <option value={op}>{op}</option>\r\n                        ))}\r\n                      </select>\r\n                      <input\r\n                        type=\"text\"\r\n                        style=\"flex:0 0 30%;\"\r\n                        value={String(rule.value)}\r\n                        onInput={e => {\r\n                          const nv = (e.target as HTMLInputElement).value;\r\n                          const nfils = [...(mod.filters || [])];\r\n                          nfils[ridx] = { ...rule, value: nv };\r\n                          const arr = [...tempConfig.modules];\r\n                          arr[idx] = { ...mod, filters: nfils };\r\n                          setTempConfig({ ...tempConfig, modules: arr });\r\n                        }}\r\n                      />\r\n                      <button\r\n                        onClick={() => {\r\n                          const nfils = [...(mod.filters || [])];\r\n                          nfils.splice(ridx, 1);\r\n                          const arr = [...tempConfig.modules];\r\n                          arr[idx] = { ...mod, filters: nfils };\r\n                          setTempConfig({ ...tempConfig, modules: arr });\r\n                        }}\r\n                      >\r\n                        删除\r\n                      </button>\r\n                    </div>\r\n                  ))}\r\n                  <button\r\n                    onClick={() => {\r\n                      const nfils = [...(mod.filters || []), { field: '', op: '=', value: '' }];\r\n                      const arr = [...tempConfig.modules];\r\n                      arr[idx] = { ...mod, filters: nfils };\r\n                      setTempConfig({ ...tempConfig, modules: arr });\r\n                    }}\r\n                  >\r\n                    + 添加过滤条件\r\n                  </button>\r\n                </div>\r\n\r\n                {/* 排序规则 */}\r\n                <div style=\"border-top:1px dashed #ccc;margin-top:6px;padding-top:6px;\">\r\n                  <strong>排序规则</strong>\r\n                  {(mod.sort || []).map((rule, ridx) => (\r\n                    <div style=\"display:flex;margin-bottom:4px;\">\r\n                      <input\r\n                        type=\"text\"\r\n                        style=\"flex:0 0 40%;\"\r\n                        value={rule.field}\r\n                        onInput={e => {\r\n                          const nf = (e.target as HTMLInputElement).value;\r\n                          const ns = [...(mod.sort || [])];\r\n                          ns[ridx] = { ...rule, field: nf };\r\n                          const arr = [...tempConfig.modules];\r\n                          arr[idx] = { ...mod, sort: ns };\r\n                          setTempConfig({ ...tempConfig, modules: arr });\r\n                        }}\r\n                      />\r\n                      <select\r\n                        value={rule.dir}\r\n                        onChange={e => {\r\n                          const d = (e.target as HTMLSelectElement).value as typeof rule.dir;\r\n                          const ns = [...(mod.sort || [])];\r\n                          ns[ridx] = { ...rule, dir: d };\r\n                          const arr = [...tempConfig.modules];\r\n                          arr[idx] = { ...mod, sort: ns };\r\n                          setTempConfig({ ...tempConfig, modules: arr });\r\n                        }}\r\n                      >\r\n                        <option value=\"asc\">升序</option>\r\n                        <option value=\"desc\">降序</option>\r\n                      </select>\r\n                      <button\r\n                        style=\"margin-left:4px;\"\r\n                        onClick={() => {\r\n                          const ns = [...(mod.sort || [])];\r\n                          ns.splice(ridx, 1);\r\n                          const arr = [...tempConfig.modules];\r\n                          arr[idx] = { ...mod, sort: ns };\r\n                          setTempConfig({ ...tempConfig, modules: arr });\r\n                        }}\r\n                      >\r\n                        删除\r\n                      </button>\r\n                    </div>\r\n                  ))}\r\n                  <button\r\n                    onClick={() => {\r\n                      const ns = [...(mod.sort || []), { field: '', dir: 'asc' }];\r\n                      const arr = [...tempConfig.modules];\r\n                      arr[idx] = { ...mod, sort: ns };\r\n                      setTempConfig({ ...tempConfig, modules: arr });\r\n                    }}\r\n                  >\r\n                    + 添加排序条件\r\n                  </button>\r\n                </div>\r\n\r\n                <div style=\"text-align:right;\">\r\n                  {idx > 0 && (\r\n                    <button\r\n                      onClick={() => {\r\n                        const arr = [...tempConfig.modules];\r\n                        [arr[idx - 1], arr[idx]] = [arr[idx], arr[idx - 1]];\r\n                        setTempConfig({ ...tempConfig, modules: arr });\r\n                      }}\r\n                    >\r\n                      ↑ 上移\r\n                    </button>\r\n                  )}\r\n                  {idx < tempConfig.modules.length - 1 && (\r\n                    <button\r\n                      onClick={() => {\r\n                        const arr = [...tempConfig.modules];\r\n                        [arr[idx], arr[idx + 1]] = [arr[idx + 1], arr[idx]];\r\n                        setTempConfig({ ...tempConfig, modules: arr });\r\n                      }}\r\n                    >\r\n                      ↓ 下移\r\n                    </button>\r\n                  )}\r\n                  <button\r\n                    onClick={() => {\r\n                      const arr = [...tempConfig.modules];\r\n                      arr.splice(idx, 1);\r\n                      setTempConfig({ ...tempConfig, modules: arr });\r\n                    }}\r\n                  >\r\n                    删除模块\r\n                  </button>\r\n                </div>\r\n              </fieldset>\r\n            ))}\r\n            <div>\r\n              <select value={newViewType} onChange={e => setNewViewType((e.target as HTMLSelectElement).value)}>\r\n                {Object.keys(ViewComponents).map(v => (\r\n                  <option value={v}>{v}</option>\r\n                ))}\r\n              </select>\r\n              <button\r\n                style=\"margin-left:6px;\"\r\n                onClick={() => {\r\n                  const mod: ModuleConfig = {\r\n                    view: newViewType as any,\r\n                    title: '新模块',\r\n                    collapsed: false,\r\n                    filters: [],\r\n                    sort: [],\r\n                    props: {},\r\n                  };\r\n                  setTempConfig({ ...tempConfig!, modules: [...tempConfig!.modules, mod] });\r\n                }}\r\n              >\r\n                添加模块\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          <hr />\r\n          <button onClick={saveConfig}>保存配置</button>\r\n          <button style=\"margin-left:8px;\" onClick={() => setShowConfig(false)}>\r\n            取消\r\n          </button>\r\n\r\n          <datalist id=\"fields-list\">\r\n            {getAllFields(dataStore.query()).map(f => (\r\n              <option value={f} />\r\n            ))}\r\n          </datalist>\r\n        </div>\r\n      )}\r\n\r\n      {!showConfig && config.modules.map(mod => renderModule(mod))}\r\n    </div>\r\n  );\r\n}","// core/CodeblockEmbedder.ts\r\nimport { DashboardConfig } from '../config/schema';\r\nimport { CODEBLOCK_LANG } from '../config/constants';\r\nimport { render, h } from 'preact';\r\nimport { Dashboard } from '../views/Dashboard';\r\nimport type ThinkPlugin from '../main';\r\nimport { DataStore } from '../data/store';\r\n\r\n/** 负责处理 ```think 代码块并渲染 Dashboard */\r\nexport class CodeblockEmbedder {\r\n  private plugin: ThinkPlugin;\r\n  private dataStore: DataStore;\r\n\r\n  constructor(plugin: ThinkPlugin, dataStore: DataStore) {\r\n    this.plugin    = plugin;\r\n    this.dataStore = dataStore;\r\n    this.registerProcessor();\r\n  }\r\n\r\n  private registerProcessor() {\r\n    this.plugin.registerMarkdownCodeBlockProcessor(\r\n      CODEBLOCK_LANG,\r\n      (source, el) => {\r\n        let configName: string | undefined;\r\n        let inlineDash: DashboardConfig | undefined;\r\n\r\n        try {\r\n          const input = source.trim() ? JSON.parse(source) : {};\r\n          if (Array.isArray(input.modules)) {\r\n            // ② 内联模式\r\n            inlineDash = {\r\n              name: input.name || '__inline__',\r\n              path: input.path || '',\r\n              tags: input.tags || [],\r\n              initialView: input.initialView || '月',\r\n              initialDate: input.initialDate || '',\r\n              modules: input.modules,\r\n            };\r\n          } else {\r\n            // ① 引用持久化\r\n            configName = input.config || input.dashboard || input.name;\r\n          }\r\n        } catch (e) {\r\n          console.warn('ThinkPlugin: 仪表盘代码块 JSON 解析失败', e);\r\n        }\r\n\r\n        if (inlineDash) return this.mount(el, inlineDash);\r\n\r\n        if (!configName && this.plugin.dashboards.length)\r\n          configName = this.plugin.dashboards[0].name;\r\n\r\n        const dash = this.plugin.dashboards.find(d => d.name === configName);\r\n        if (!dash) {\r\n          el.createDiv({ text: `找不到名称为 \"${configName}\" 的仪表盘配置` });\r\n          return;\r\n        }\r\n        this.mount(el, dash);\r\n      },\r\n    );\r\n  }\r\n\r\n  private mount(el: HTMLElement, dash: DashboardConfig) {\r\n    render(\r\n      h(Dashboard, {\r\n        config: dash,\r\n        dataStore: this.dataStore,\r\n        plugin:   this.plugin,\r\n      }),\r\n      el,\r\n    );\r\n    this.plugin.activeDashboards.push({ container: el, configName: dash.name });\r\n  }\r\n}","// src/main.ts\r\nimport { Plugin } from 'obsidian';\r\nimport { DataStore } from './data/store';\r\nimport { DashboardConfig } from './config/schema';\r\nimport { SettingsTab } from './ui/SettingsTab';\r\nimport { STYLE_TAG_ID, GLOBAL_CSS } from './config/constants';\r\nimport { VaultWatcher } from './core/VaultWatcher';\r\nimport { CodeblockEmbedder } from './core/CodeblockEmbedder';\r\n\r\nexport interface PersistData {\r\n  dashboards: DashboardConfig[];\r\n  inputSettings?: Record<string, any>;\r\n}\r\n\r\nexport default class ThinkPlugin extends Plugin {\r\n  dataStore!: DataStore;\r\n  dashboards: DashboardConfig[] = [];\r\n  activeDashboards: Array<{ container: HTMLElement; configName: string }> = [];\r\n  inputSettings: Record<string, any> = {};\r\n\r\n  /* ---------- 生命周期 ---------- */\r\n  async onload() {\r\n    console.log('ThinkPlugin 加载 - 重构版');\r\n\r\n    /* — 读取持久化 — */\r\n    const saved = (await this.loadData()) as PersistData | undefined;\r\n    if (saved?.dashboards) this.dashboards = saved.dashboards;\r\n    if (!this.dashboards.length) this._createDefaultDashboard();\r\n    this.inputSettings = saved?.inputSettings ?? {};\r\n\r\n    /* — 向后兼容旧视图名 — */\r\n    this.dashboards.forEach(d =>\r\n      d.modules.forEach(m => { if ((m.view as any) === 'ListView') m.view = 'BlockView'; }),\r\n    );\r\n\r\n    /* — 初始化数据层 & 监听 / 渲染 — */\r\n    this.dataStore = new DataStore(this.app);\r\n    await this.dataStore.scanAll();\r\n    new VaultWatcher(this, this.dataStore);\r\n    new CodeblockEmbedder(this, this.dataStore);\r\n\r\n    this._injectStyles();\r\n    this.addSettingTab(new SettingsTab(this.app, this));\r\n  }\r\n\r\n  onunload() {\r\n    document.getElementById(STYLE_TAG_ID)?.remove();\r\n    console.log('ThinkPlugin 卸载');\r\n  }\r\n\r\n  /* ---------- 公共 API ---------- */\r\n  async persistAll() {\r\n    await this.saveData({\r\n      dashboards: this.dashboards,\r\n      inputSettings: this.inputSettings,\r\n    });\r\n  }\r\n\r\n  /* ---------- 内部工具 ---------- */\r\n  private _createDefaultDashboard() {\r\n    const now   = new Date();\r\n    const today = `${now.getFullYear()}-${String(now.getMonth() + 1).padStart(2, '0')}-${String(now.getDate()).padStart(2, '0')}`;\r\n\r\n    const def: DashboardConfig = {\r\n      name: '默认仪表盘',\r\n      path: '',\r\n      tags: [],\r\n      initialView: '月',\r\n      initialDate: today,\r\n      modules: [\r\n        {\r\n          view: 'BlockView',\r\n          title: '未完成任务',\r\n          filters: [{ field:'type',op:'=',value:'task' },{ field:'status',op:'=',value:'open' }],\r\n          sort: [],\r\n          collapsed: false,\r\n          props: {},\r\n        },\r\n        {\r\n          view: 'BlockView',\r\n          title: '已完成任务',\r\n          filters: [{ field:'type',op:'=',value:'task' },{ field:'status',op:'=',value:'done' }],\r\n          sort : [{ field:'date',dir:'desc' }],\r\n          collapsed: true,\r\n          props: {},\r\n        },\r\n      ],\r\n    };\r\n    this.dashboards.push(def);\r\n  }\r\n\r\n  private _injectStyles() {\r\n    if (document.getElementById(STYLE_TAG_ID)) return;\r\n    const style = document.createElement('style');\r\n    style.id = STYLE_TAG_ID;\r\n    style.textContent = GLOBAL_CSS;\r\n    document.head.appendChild(style);\r\n  }\r\n}"],"names":["CORE_FIELDS","getAllFields","items","set","it","k","readField","item","field","key","DATE_YMD","DATE_YMD_RE","TAG_RE","KV_IN_PAREN","RE_TASK_PREFIX","RE_DONE_BOX","RE_CANCEL_BOX","normalizeDateStr","dateStr","getDateRange","date","viewType","s","e","CODEBLOCK_LANG","OPS","EMOJI","EMPTY_LABEL","STYLE_TAG_ID","GLOBAL_CSS","cleanTaskText","text","result","main","pickPriority","line","parseTaskLine","filePath","rawLine","lineNo","parentFolder","lineText","status","tags","t","recurrence","recMatch","extra","m","value","lowerKey","v","num","parsed","pickDate","emoji","mt","doneDate","cancelledDate","dueDate","scheduledDate","startDate","createdDate","priority","icon","afterPrefix","iconMatch","titleSrc","parseBlockContent","lines","startIdx","endIdx","contentLines","title","category","themeValue","contentText","contentStarted","iconVal","i","kv","lower","p","throttle","fn","wait","last","timer","args","now","toggleToDone","todayISO","nowTime","pre","content","parseRecurrence","rawTask","interval","unit","whenDone","findBaseDateForRecurring","pick","r","generateNextRecurringTask","baseDateISO","next","rec","nextStr","replaceIf","re","markTaskDone","completedLine","baseISO","nextTaskLine","TaskService","itemId","ds","DataStore","lineStr","file","TFile","moment","app","files","fileItems","headingsList","nextHeadingIndex","currentSectionTags","currentHeader","headingText","headingTags","cleanText","tag","blockItem","name","taskItem","err","path","filters","sortRules","results","rule","a","b","aVal","bVal","aStr","bStr","listener","fieldVal","cmpVal","isEqual","regex","itemNum","cmpNum","itemTime","cmpTime","n","l","u","o","f","c","y","w","d","g","_","x","S","C","M","$","O","z","I","h","P","q","A","L","B","T","j","F","H","D","N","V","E","makeObsUri","hashIndex","TaskCheckbox","done","onMarkDone","base","jsx","TableView","rowField","colField","rowVals","colVals","matrix","jsxs","cellItems","renderCellItem","isDone","CATEGORY_COLOR_MAP","getCategoryColor","BlockView","props","groupField","showMeta","fields","grouped","groupKeys","renderTaskLine","renderBlock","renderItem","grp","TimelineView","CalendarView","ChartView","toText","ExcelView","cols","SettingsFormView","storageKey","plugin","init","form","setForm","useState","change","save","VIEW_REGISTRY","ViewComponents","VIEW_OPTIONS","SettingsTab","PluginSettingTab","containerEl","allItems","fieldOptions","tagSet","categorySet","statusSet","recurrenceSet","typeSet","tagsList","opt","categoryList","statusList","recurrenceList","typeList","fieldsList","selectDash","dash","btnAdd","baseName","newName","count","newDash","Notice","btnDel","idx","baseFieldset","Setting","val","tagStr","drop","todayStr","initialDateStr","mod","modFieldset","dd","cb","fieldStr","fieldsArr","filterDiv","ridx","rowDiv","fieldInput","opSelect","op","valueInput","updateValueDatalist","delBtn","addFilterBtn","sortDiv","dirSelect","label","addSortBtn","actionsDiv","upBtn","mods","downBtn","newModDiv","newSelect","addModBtn","newModule","saveBtn","VaultWatcher","dataStore","onVault","rescan","old","ModulePanel","module","children","collapsed","setCollapsed","rootRef","useRef","toggleCollapsed","onHeaderClick","want","ev","el","useEffect","handler","QUARTER_TEXT","Dashboard","config","initialView","initialDateMoment","currentView","setCurrentView","currentDate","setCurrentDate","showConfig","setShowConfig","tempConfig","setTempConfig","newViewType","setNewViewType","dataVersion","setDataVersion","keyword","setKeyword","onData","cfg","formattedDate","prevPeriod","nextPeriod","resetToday","renderModule","ViewComp","target","af","TFolder","prefix","endDate","kw","viewProps","saveConfig","oldName","saved","arr","arrFields","nf","nfils","nv","ns","CodeblockEmbedder","source","configName","inlineDash","input","render","ThinkPlugin","Plugin","today","def","style"],"mappings":"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","x_google_ignoreList":[10,11,21]}