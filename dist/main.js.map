{"version":3,"file":"main.js","sources":["../node_modules/preact/dist/preact.module.js","../src/config/schema.ts","../src/utils/regex.ts","../src/utils/date.ts","../src/config/constants.ts","../src/data/parser.ts","../src/utils/timing.ts","../src/data/store.ts","../node_modules/preact/jsx-runtime/dist/jsxRuntime.module.js","../src/utils/obsidian.ts","../src/views/TableView.tsx","../src/config/categoryColorMap.ts","../src/views/BlockView.tsx","../src/views/TimelineView.tsx","../src/views/CalendarView.tsx","../src/views/ChartView.tsx","../src/views/ExcelView.tsx","../node_modules/preact/hooks/dist/hooks.module.js","../src/views/SettingsFormView.tsx","../src/views/index.ts","../src/ui/SettingsTab.ts","../src/views/ModulePanel.tsx","../src/views/Dashboard.tsx","../src/main.ts"],"sourcesContent":["var n,l,u,t,i,r,o,e,f,c,s,a,h,p={},v=[],y=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,w=Array.isArray;function d(n,l){for(var u in l)n[u]=l[u];return n}function g(n){n&&n.parentNode&&n.parentNode.removeChild(n)}function _(l,u,t){var i,r,o,e={};for(o in u)\"key\"==o?i=u[o]:\"ref\"==o?r=u[o]:e[o]=u[o];if(arguments.length>2&&(e.children=arguments.length>3?n.call(arguments,2):t),\"function\"==typeof l&&null!=l.defaultProps)for(o in l.defaultProps)void 0===e[o]&&(e[o]=l.defaultProps[o]);return m(l,e,i,r,null)}function m(n,t,i,r,o){var e={type:n,props:t,key:i,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:null==o?++u:o,__i:-1,__u:0};return null==o&&null!=l.vnode&&l.vnode(e),e}function b(){return{current:null}}function k(n){return n.children}function x(n,l){this.props=n,this.context=l}function S(n,l){if(null==l)return n.__?S(n.__,n.__i+1):null;for(var u;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e)return u.__e;return\"function\"==typeof n.type?S(n):null}function C(n){var l,u;if(null!=(n=n.__)&&null!=n.__c){for(n.__e=n.__c.base=null,l=0;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e){n.__e=n.__c.base=u.__e;break}return C(n)}}function M(n){(!n.__d&&(n.__d=!0)&&i.push(n)&&!$.__r++||r!=l.debounceRendering)&&((r=l.debounceRendering)||o)($)}function $(){for(var n,u,t,r,o,f,c,s=1;i.length;)i.length>s&&i.sort(e),n=i.shift(),s=i.length,n.__d&&(t=void 0,o=(r=(u=n).__v).__e,f=[],c=[],u.__P&&((t=d({},r)).__v=r.__v+1,l.vnode&&l.vnode(t),O(u.__P,t,r,u.__n,u.__P.namespaceURI,32&r.__u?[o]:null,f,null==o?S(r):o,!!(32&r.__u),c),t.__v=r.__v,t.__.__k[t.__i]=t,z(f,t,c),t.__e!=o&&C(t)));$.__r=0}function I(n,l,u,t,i,r,o,e,f,c,s){var a,h,y,w,d,g,_=t&&t.__k||v,m=l.length;for(f=P(u,l,_,f,m),a=0;a<m;a++)null!=(y=u.__k[a])&&(h=-1==y.__i?p:_[y.__i]||p,y.__i=a,g=O(n,y,h,i,r,o,e,f,c,s),w=y.__e,y.ref&&h.ref!=y.ref&&(h.ref&&q(h.ref,null,y),s.push(y.ref,y.__c||w,y)),null==d&&null!=w&&(d=w),4&y.__u||h.__k===y.__k?f=A(y,f,n):\"function\"==typeof y.type&&void 0!==g?f=g:w&&(f=w.nextSibling),y.__u&=-7);return u.__e=d,f}function P(n,l,u,t,i){var r,o,e,f,c,s=u.length,a=s,h=0;for(n.__k=new Array(i),r=0;r<i;r++)null!=(o=l[r])&&\"boolean\"!=typeof o&&\"function\"!=typeof o?(f=r+h,(o=n.__k[r]=\"string\"==typeof o||\"number\"==typeof o||\"bigint\"==typeof o||o.constructor==String?m(null,o,null,null,null):w(o)?m(k,{children:o},null,null,null):null==o.constructor&&o.__b>0?m(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o).__=n,o.__b=n.__b+1,e=null,-1!=(c=o.__i=L(o,u,f,a))&&(a--,(e=u[c])&&(e.__u|=2)),null==e||null==e.__v?(-1==c&&(i>s?h--:i<s&&h++),\"function\"!=typeof o.type&&(o.__u|=4)):c!=f&&(c==f-1?h--:c==f+1?h++:(c>f?h--:h++,o.__u|=4))):n.__k[r]=null;if(a)for(r=0;r<s;r++)null!=(e=u[r])&&0==(2&e.__u)&&(e.__e==t&&(t=S(e)),B(e,e));return t}function A(n,l,u){var t,i;if(\"function\"==typeof n.type){for(t=n.__k,i=0;t&&i<t.length;i++)t[i]&&(t[i].__=n,l=A(t[i],l,u));return l}n.__e!=l&&(l&&n.type&&!u.contains(l)&&(l=S(n)),u.insertBefore(n.__e,l||null),l=n.__e);do{l=l&&l.nextSibling}while(null!=l&&8==l.nodeType);return l}function H(n,l){return l=l||[],null==n||\"boolean\"==typeof n||(w(n)?n.some(function(n){H(n,l)}):l.push(n)),l}function L(n,l,u,t){var i,r,o=n.key,e=n.type,f=l[u];if(null===f&&null==n.key||f&&o==f.key&&e==f.type&&0==(2&f.__u))return u;if(t>(null!=f&&0==(2&f.__u)?1:0))for(i=u-1,r=u+1;i>=0||r<l.length;){if(i>=0){if((f=l[i])&&0==(2&f.__u)&&o==f.key&&e==f.type)return i;i--}if(r<l.length){if((f=l[r])&&0==(2&f.__u)&&o==f.key&&e==f.type)return r;r++}}return-1}function T(n,l,u){\"-\"==l[0]?n.setProperty(l,null==u?\"\":u):n[l]=null==u?\"\":\"number\"!=typeof u||y.test(l)?u:u+\"px\"}function j(n,l,u,t,i){var r,o;n:if(\"style\"==l)if(\"string\"==typeof u)n.style.cssText=u;else{if(\"string\"==typeof t&&(n.style.cssText=t=\"\"),t)for(l in t)u&&l in u||T(n.style,l,\"\");if(u)for(l in u)t&&u[l]==t[l]||T(n.style,l,u[l])}else if(\"o\"==l[0]&&\"n\"==l[1])r=l!=(l=l.replace(f,\"$1\")),o=l.toLowerCase(),l=o in n||\"onFocusOut\"==l||\"onFocusIn\"==l?o.slice(2):l.slice(2),n.l||(n.l={}),n.l[l+r]=u,u?t?u.u=t.u:(u.u=c,n.addEventListener(l,r?a:s,r)):n.removeEventListener(l,r?a:s,r);else{if(\"http://www.w3.org/2000/svg\"==i)l=l.replace(/xlink(H|:h)/,\"h\").replace(/sName$/,\"s\");else if(\"width\"!=l&&\"height\"!=l&&\"href\"!=l&&\"list\"!=l&&\"form\"!=l&&\"tabIndex\"!=l&&\"download\"!=l&&\"rowSpan\"!=l&&\"colSpan\"!=l&&\"role\"!=l&&\"popover\"!=l&&l in n)try{n[l]=null==u?\"\":u;break n}catch(n){}\"function\"==typeof u||(null==u||!1===u&&\"-\"!=l[4]?n.removeAttribute(l):n.setAttribute(l,\"popover\"==l&&1==u?\"\":u))}}function F(n){return function(u){if(this.l){var t=this.l[u.type+n];if(null==u.t)u.t=c++;else if(u.t<t.u)return;return t(l.event?l.event(u):u)}}}function O(n,u,t,i,r,o,e,f,c,s){var a,h,p,v,y,_,m,b,S,C,M,$,P,A,H,L,T,j=u.type;if(null!=u.constructor)return null;128&t.__u&&(c=!!(32&t.__u),o=[f=u.__e=t.__e]),(a=l.__b)&&a(u);n:if(\"function\"==typeof j)try{if(b=u.props,S=\"prototype\"in j&&j.prototype.render,C=(a=j.contextType)&&i[a.__c],M=a?C?C.props.value:a.__:i,t.__c?m=(h=u.__c=t.__c).__=h.__E:(S?u.__c=h=new j(b,M):(u.__c=h=new x(b,M),h.constructor=j,h.render=D),C&&C.sub(h),h.props=b,h.state||(h.state={}),h.context=M,h.__n=i,p=h.__d=!0,h.__h=[],h._sb=[]),S&&null==h.__s&&(h.__s=h.state),S&&null!=j.getDerivedStateFromProps&&(h.__s==h.state&&(h.__s=d({},h.__s)),d(h.__s,j.getDerivedStateFromProps(b,h.__s))),v=h.props,y=h.state,h.__v=u,p)S&&null==j.getDerivedStateFromProps&&null!=h.componentWillMount&&h.componentWillMount(),S&&null!=h.componentDidMount&&h.__h.push(h.componentDidMount);else{if(S&&null==j.getDerivedStateFromProps&&b!==v&&null!=h.componentWillReceiveProps&&h.componentWillReceiveProps(b,M),!h.__e&&null!=h.shouldComponentUpdate&&!1===h.shouldComponentUpdate(b,h.__s,M)||u.__v==t.__v){for(u.__v!=t.__v&&(h.props=b,h.state=h.__s,h.__d=!1),u.__e=t.__e,u.__k=t.__k,u.__k.some(function(n){n&&(n.__=u)}),$=0;$<h._sb.length;$++)h.__h.push(h._sb[$]);h._sb=[],h.__h.length&&e.push(h);break n}null!=h.componentWillUpdate&&h.componentWillUpdate(b,h.__s,M),S&&null!=h.componentDidUpdate&&h.__h.push(function(){h.componentDidUpdate(v,y,_)})}if(h.context=M,h.props=b,h.__P=n,h.__e=!1,P=l.__r,A=0,S){for(h.state=h.__s,h.__d=!1,P&&P(u),a=h.render(h.props,h.state,h.context),H=0;H<h._sb.length;H++)h.__h.push(h._sb[H]);h._sb=[]}else do{h.__d=!1,P&&P(u),a=h.render(h.props,h.state,h.context),h.state=h.__s}while(h.__d&&++A<25);h.state=h.__s,null!=h.getChildContext&&(i=d(d({},i),h.getChildContext())),S&&!p&&null!=h.getSnapshotBeforeUpdate&&(_=h.getSnapshotBeforeUpdate(v,y)),L=a,null!=a&&a.type===k&&null==a.key&&(L=N(a.props.children)),f=I(n,w(L)?L:[L],u,t,i,r,o,e,f,c,s),h.base=u.__e,u.__u&=-161,h.__h.length&&e.push(h),m&&(h.__E=h.__=null)}catch(n){if(u.__v=null,c||null!=o)if(n.then){for(u.__u|=c?160:128;f&&8==f.nodeType&&f.nextSibling;)f=f.nextSibling;o[o.indexOf(f)]=null,u.__e=f}else for(T=o.length;T--;)g(o[T]);else u.__e=t.__e,u.__k=t.__k;l.__e(n,u,t)}else null==o&&u.__v==t.__v?(u.__k=t.__k,u.__e=t.__e):f=u.__e=V(t.__e,u,t,i,r,o,e,c,s);return(a=l.diffed)&&a(u),128&u.__u?void 0:f}function z(n,u,t){for(var i=0;i<t.length;i++)q(t[i],t[++i],t[++i]);l.__c&&l.__c(u,n),n.some(function(u){try{n=u.__h,u.__h=[],n.some(function(n){n.call(u)})}catch(n){l.__e(n,u.__v)}})}function N(n){return\"object\"!=typeof n||null==n||n.__b&&n.__b>0?n:w(n)?n.map(N):d({},n)}function V(u,t,i,r,o,e,f,c,s){var a,h,v,y,d,_,m,b=i.props,k=t.props,x=t.type;if(\"svg\"==x?o=\"http://www.w3.org/2000/svg\":\"math\"==x?o=\"http://www.w3.org/1998/Math/MathML\":o||(o=\"http://www.w3.org/1999/xhtml\"),null!=e)for(a=0;a<e.length;a++)if((d=e[a])&&\"setAttribute\"in d==!!x&&(x?d.localName==x:3==d.nodeType)){u=d,e[a]=null;break}if(null==u){if(null==x)return document.createTextNode(k);u=document.createElementNS(o,x,k.is&&k),c&&(l.__m&&l.__m(t,e),c=!1),e=null}if(null==x)b===k||c&&u.data==k||(u.data=k);else{if(e=e&&n.call(u.childNodes),b=i.props||p,!c&&null!=e)for(b={},a=0;a<u.attributes.length;a++)b[(d=u.attributes[a]).name]=d.value;for(a in b)if(d=b[a],\"children\"==a);else if(\"dangerouslySetInnerHTML\"==a)v=d;else if(!(a in k)){if(\"value\"==a&&\"defaultValue\"in k||\"checked\"==a&&\"defaultChecked\"in k)continue;j(u,a,null,d,o)}for(a in k)d=k[a],\"children\"==a?y=d:\"dangerouslySetInnerHTML\"==a?h=d:\"value\"==a?_=d:\"checked\"==a?m=d:c&&\"function\"!=typeof d||b[a]===d||j(u,a,d,b[a],o);if(h)c||v&&(h.__html==v.__html||h.__html==u.innerHTML)||(u.innerHTML=h.__html),t.__k=[];else if(v&&(u.innerHTML=\"\"),I(\"template\"==t.type?u.content:u,w(y)?y:[y],t,i,r,\"foreignObject\"==x?\"http://www.w3.org/1999/xhtml\":o,e,f,e?e[0]:i.__k&&S(i,0),c,s),null!=e)for(a=e.length;a--;)g(e[a]);c||(a=\"value\",\"progress\"==x&&null==_?u.removeAttribute(\"value\"):null!=_&&(_!==u[a]||\"progress\"==x&&!_||\"option\"==x&&_!=b[a])&&j(u,a,_,b[a],o),a=\"checked\",null!=m&&m!=u[a]&&j(u,a,m,b[a],o))}return u}function q(n,u,t){try{if(\"function\"==typeof n){var i=\"function\"==typeof n.__u;i&&n.__u(),i&&null==u||(n.__u=n(u))}else n.current=u}catch(n){l.__e(n,t)}}function B(n,u,t){var i,r;if(l.unmount&&l.unmount(n),(i=n.ref)&&(i.current&&i.current!=n.__e||q(i,null,u)),null!=(i=n.__c)){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(n){l.__e(n,u)}i.base=i.__P=null}if(i=n.__k)for(r=0;r<i.length;r++)i[r]&&B(i[r],u,t||\"function\"!=typeof n.type);t||g(n.__e),n.__c=n.__=n.__e=void 0}function D(n,l,u){return this.constructor(n,u)}function E(u,t,i){var r,o,e,f;t==document&&(t=document.documentElement),l.__&&l.__(u,t),o=(r=\"function\"==typeof i)?null:i&&i.__k||t.__k,e=[],f=[],O(t,u=(!r&&i||t).__k=_(k,null,[u]),o||p,p,t.namespaceURI,!r&&i?[i]:o?null:t.firstChild?n.call(t.childNodes):null,e,!r&&i?i:o?o.__e:t.firstChild,r,f),z(e,u,f)}function G(n,l){E(n,l,G)}function J(l,u,t){var i,r,o,e,f=d({},l.props);for(o in l.type&&l.type.defaultProps&&(e=l.type.defaultProps),u)\"key\"==o?i=u[o]:\"ref\"==o?r=u[o]:f[o]=void 0===u[o]&&null!=e?e[o]:u[o];return arguments.length>2&&(f.children=arguments.length>3?n.call(arguments,2):t),m(l.type,f,i||l.key,r||l.ref,null)}function K(n){function l(n){var u,t;return this.getChildContext||(u=new Set,(t={})[l.__c]=this,this.getChildContext=function(){return t},this.componentWillUnmount=function(){u=null},this.shouldComponentUpdate=function(n){this.props.value!=n.value&&u.forEach(function(n){n.__e=!0,M(n)})},this.sub=function(n){u.add(n);var l=n.componentWillUnmount;n.componentWillUnmount=function(){u&&u.delete(n),l&&l.call(n)}}),n.children}return l.__c=\"__cC\"+h++,l.__=n,l.Provider=l.__l=(l.Consumer=function(n,l){return n.children(l)}).contextType=l,l}n=v.slice,l={__e:function(n,l,u,t){for(var i,r,o;l=l.__;)if((i=l.__c)&&!i.__)try{if((r=i.constructor)&&null!=r.getDerivedStateFromError&&(i.setState(r.getDerivedStateFromError(n)),o=i.__d),null!=i.componentDidCatch&&(i.componentDidCatch(n,t||{}),o=i.__d),o)return i.__E=i}catch(l){n=l}throw n}},u=0,t=function(n){return null!=n&&null==n.constructor},x.prototype.setState=function(n,l){var u;u=null!=this.__s&&this.__s!=this.state?this.__s:this.__s=d({},this.state),\"function\"==typeof n&&(n=n(d({},u),this.props)),n&&d(u,n),null!=n&&this.__v&&(l&&this._sb.push(l),M(this))},x.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),M(this))},x.prototype.render=k,i=[],o=\"function\"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,e=function(n,l){return n.__v.__b-l.__v.__b},$.__r=0,f=/(PointerCapture)$|Capture$/i,c=0,s=F(!1),a=F(!0),h=0;export{x as Component,k as Fragment,J as cloneElement,K as createContext,_ as createElement,b as createRef,_ as h,G as hydrate,t as isValidElement,l as options,E as render,H as toChildArray};\r\n//# sourceMappingURL=preact.module.js.map\r\n","// config/schema.ts - 定义数据模型和配置的 TypeScript 接口\r\n\r\nimport type { ViewName } from '../views';\r\nexport interface Item {\r\n  id: string;            // 唯一标识: filePath#line\r\n  title: string;         // 标题\r\n  content: string;       // 全部内容（任务整行或块全文）\r\n  type: 'task' | 'block';// 类型：任务 或 文本块\r\n  status?: string;       // 状态：任务=open/done/cancelled，块=状态:: 值（若无则 undefined）\r\n  category: string;      // 类别：分类::/类别:: 值或父文件夹名\r\n  tags: string[];        // 标签列表：任务行内#tag，块主题:: 拆分\r\n  recurrence: string;    // 重复规则：如 \"every day when done\"，否则 'none'\r\n  date?: string;         // 日期：任务完成/取消日期 或 块 日期:: 值（格式 YYYY-MM-DD）\r\n  created: number;       // 创建时间（文件级，Unix ms 时间戳）\r\n  modified: number;      // 修改时间（文件级，Unix ms 时间戳）\r\n  extra: Record<string, string|number|boolean>;  // 其他键值对，如 时间/时长/优先级/图标 等\r\n  header?: string;           // 所在的 Markdown 标题文本\r\n  icon?: string;             // 图标 emoji\r\n  priority?: 'lowest' | 'low' | 'medium' | 'high' | 'highest';  // 优先级\r\n  createdDate?: string;      // 创建日期 ➕\r\n  scheduledDate?: string;    // 安排日期 ⏳\r\n  startDate?: string;        // 开始日期 🛫\r\n  dueDate?: string;          // 截止日期 📅\r\n  doneDate?: string;         // 完成日期 ✅\r\n  cancelledDate?: string;    // 取消日期 ❌\r\n  filename?: string;         // 文件名\r\n}\r\n\r\n/** 仪表盘模块配置 */\r\nexport interface ModuleConfig {\r\n  view: ViewName;\r\n  title: string;\r\n  collapsed?: boolean;\r\n  filters?: FilterRule[];\r\n  sort?: SortRule[];\r\n  group?: string;\r\n  props?: Record<string, any>;\r\n  fields?: string[];\r\n}\r\n\r\n/** 过滤条件 */\r\nexport interface FilterRule {\r\n  field: string;   // 可为 extra.xxx\r\n  op: '=' | '!=' | 'includes' | 'regex' | '>' | '<';\r\n  value: any;\r\n}\r\n\r\n/** 排序条件 */\r\nexport interface SortRule {\r\n  field: string;   // 可为 extra.xxx\r\n  dir: 'asc' | 'desc';\r\n}\r\n\r\n/** 仪表盘配置 */\r\nexport interface DashboardConfig {\r\n  name: string;\r\n  path?: string;\r\n  tags?: string[];\r\n  initialView?: string;\r\n  initialDate?: string;\r\n  modules: ModuleConfig[];\r\n}\r\n\r\n/* ================================\r\n *  字段统一维护 & 工具函数\r\n * ================================ */\r\n\r\n/** 一处维护的核心字段清单（非 extra.*） */\r\nexport const CORE_FIELDS = [\r\n  'id','title','content','type','status','category','tags','recurrence',\r\n  'date','header','icon','priority','createdDate','scheduledDate','startDate',\r\n  'dueDate','doneDate','cancelledDate','created','modified','filename'\r\n] as const;\r\n\r\nexport type CoreField = typeof CORE_FIELDS[number];\r\n\r\n/** 从 items 生成 “核心字段 + extra.xxx” 的完整字段列表 */\r\nexport function getAllFields(items: Item[]): string[] {\r\n  const set = new Set<string>(CORE_FIELDS as unknown as string[]);\r\n  for (const it of items) {\r\n    Object.keys(it.extra || {}).forEach(k => set.add('extra.' + k));\r\n  }\r\n  return Array.from(set);\r\n}\r\n\r\n/** 通用读取字段值（支持 extra.xxx） */\r\nexport function readField(item: Item, field: string): any {\r\n  if (field.startsWith('extra.')) {\r\n    const key = field.substring(6);\r\n    return item.extra?.[key];\r\n  }\r\n  // @ts-ignore\r\n  return item[field as keyof Item];\r\n}\r\n","// utils/regex.ts\r\nexport const DATE_YMD = '\\\\d{4}[-/]\\\\d{2}[-/]\\\\d{2}';\r\nexport const DATE_YMD_RE = new RegExp(DATE_YMD);\r\n\r\nexport const TAG_RE = /#([\\p{L}\\p{N}_\\/-]+)/gu;\r\nexport const KV_IN_PAREN = /\\(([^:：]+)::\\s*([^)]+)\\)/g;\r\nexport const META_BRACKET = /\\([^:：]+::\\s*[^)]+\\)/g;\r\n\r\nexport const RE_TASK_PREFIX = /^\\s*-\\s*\\[[ xX-]\\]/;\r\nexport const RE_DONE_BOX    = /^\\s*-\\s*\\[x\\]/i;\r\nexport const RE_CANCEL_BOX  = /^\\s*-\\s*\\[-\\]/;\r\nexport const RE_EMPTY_BOX   = /^\\s*-\\s*\\[ \\]/;","// utils/date.ts\r\nexport function normalizeDateStr(dateStr: string): string {\r\n  return dateStr.replace(/\\//g, '-');\r\n}","// config/constants.ts\r\nexport const CODEBLOCK_LANG = 'think';\r\n\r\nexport const OPS = ['=', '!=', 'includes', 'regex', '>', '<'] as const;\r\n\r\nexport const EMOJI = {\r\n  done: '✅',\r\n  cancelled: '❌',\r\n  due: '📅',\r\n  scheduled: '⏳',\r\n  start: '🛫',\r\n  created: '➕',\r\n  repeat: '🔁',\r\n  prio: {\r\n    highest: '🔺',\r\n    high: '⏫',\r\n    medium: '🔼',\r\n    low: '🔽',\r\n    lowest: '⏬',\r\n  },\r\n} as const;\r\n\r\nexport const EMPTY_LABEL = '无日期';\r\n\r\nexport const STYLE_TAG_ID = 'think-dashboard-style';\r\n\r\n// 将默认注入样式集中在此，便于替换/关闭\r\nexport const GLOBAL_CSS = `\r\n.think-table{width:100%;border:1px solid #ccc;border-collapse:collapse;}\r\n.think-table th,.think-table td{border:1px solid #ccc;padding:4px;}\r\n.think-table th{background:#f0f0f0;text-align:center;}\r\n.think-table td{text-align:left;}\r\n.think-table td.empty{background:#f9f9f9;}\r\n.tag-pill{background:#e0e0e0;border-radius:4px;padding:0 6px;margin-right:6px;font-size:90%;display:inline-block;}\r\n.task-done{text-decoration:line-through;color:gray;}\r\n.module-header{display:flex;align-items:center;padding:4px 8px;background:#eee;cursor:pointer;}\r\n.module-title{flex:1;font-weight:bold;}\r\n.module-toggle{margin-left:4px;}\r\n.module-content{padding:6px 8px;}\r\n.think-module a{color:black;text-decoration:none;}\r\n`.trim();","// data/parser.ts\r\n// 统一后的任务/块解析器（去掉重复正则与日期处理，全部从 utils 与 constants 引用）\r\nimport { Item } from '../config/schema';\r\nimport {\r\n  TAG_RE,\r\n  KV_IN_PAREN,\r\n  META_BRACKET,\r\n  DATE_YMD_RE,\r\n  RE_TASK_PREFIX,\r\n  RE_DONE_BOX,\r\n  RE_CANCEL_BOX,\r\n} from '../utils/regex';\r\nimport { normalizeDateStr } from '../utils/date';\r\nimport { EMOJI } from '../config/constants';\r\n\r\n// 用于提取任务标题的清理函数\r\nfunction cleanTaskText(text: string): string {\r\n    // 1. 去除行首的 - [ ] 或 - [x] 或 - [X]\r\n    let result = text.replace(/^\\s*-\\s*\\[[ xX]\\]\\s*/, \"\").trim();\r\n\r\n    // 2. 去除所有#标签\r\n    result = result.replace(/#[\\p{L}\\p{N}_-]+/gu, \"\");\r\n\r\n    // 3. 按 ( 或 空格 分割，取第一个非空片段\r\n    let main = result.split(/[\\s(]/).find(s => s && s.trim());\r\n\r\n    // 4. 去除第一个emoji字符\r\n    main = main?.replace(/^\\p{Extended_Pictographic}\\uFE0F?/u, \"\").trim();\r\n\r\n    return main ? main.trim() : \"\";\r\n}\r\n\r\nfunction pickPriority(line: string): Item['priority'] | undefined {\r\n  if (line.includes('🔺')) return 'highest';\r\n  if (line.includes('⏫')) return 'high';\r\n  if (line.includes('🔼')) return 'medium';\r\n  if (line.includes('🔽')) return 'low';\r\n  if (line.includes('⏬')) return 'lowest';\r\n  return undefined;\r\n}\r\n\r\n/** 解析任务行 (以 \"- [ ]\" 或 \"- [x]\" 开头) 为 Item */\r\nexport function parseTaskLine(\r\n  filePath: string,\r\n  rawLine: string,\r\n  lineNo: number,\r\n  parentFolder: string\r\n): Item | null {\r\n  const lineText = rawLine;\r\n\r\n  if (!RE_TASK_PREFIX.test(lineText)) return null;\r\n\r\n  // 状态\r\n  let status: Item['status'] = 'open';\r\n  if (RE_DONE_BOX.test(lineText)) status = 'done';\r\n  else if (RE_CANCEL_BOX.test(lineText)) status = 'cancelled';\r\n\r\n  // 行内标签\r\n  const tagMatches = lineText.match(TAG_RE) || [];\r\n  const tags = tagMatches.map(t => t.replace('#', ''));\r\n\r\n  // 重复性\r\n  let recurrence = 'none';\r\n  const recMatch = lineText.match(/🔁\\s*([^\\n📅⏳🛫➕✅❌]*)/);\r\n  if (recMatch && recMatch[1]) {\r\n    recurrence = recMatch[1].trim();\r\n  }\r\n\r\n  // 括号 meta\r\n  const extra: Record<string, string | number | boolean> = {};\r\n  let m: RegExpExecArray | null;\r\n  while ((m = KV_IN_PAREN.exec(lineText)) !== null) {\r\n    const key = m[1].trim();\r\n    const value = m[2].trim();\r\n    const lowerKey = key.toLowerCase();\r\n    if ([\"主题\", \"标签\", \"tag\", \"tags\"].includes(lowerKey)) {\r\n      value.split(/[,，]/).forEach(v => {\r\n        const t = v.trim().replace(/^#/, '');\r\n        if (t) tags.push(t);\r\n      });\r\n    } else {\r\n      const num = Number(value);\r\n      let parsed: any = value;\r\n      if (value !== '' && !isNaN(num)) parsed = num;\r\n      else if (/^(true|false)$/i.test(value)) parsed = value.toLowerCase() === 'true';\r\n      extra[key] = parsed;\r\n    }\r\n  }\r\n\r\n  // 日期/emoji\r\n  const pickDate = (emoji: string): string | undefined => {\r\n    const mt = lineText.match(new RegExp(`${emoji}\\\\s*(${DATE_YMD_RE.source})`));\r\n    return mt ? normalizeDateStr(mt[1]) : undefined;\r\n  };\r\n  const doneDate       = pickDate(EMOJI.done);\r\n  const cancelledDate  = pickDate(EMOJI.cancelled);\r\n  const dueDate        = pickDate(EMOJI.due);\r\n  const scheduledDate  = pickDate(EMOJI.scheduled);\r\n  const startDate      = pickDate(EMOJI.start);\r\n  const createdDate    = pickDate(EMOJI.created);\r\n\r\n  const priority = pickPriority(lineText);\r\n\r\n  // 图标: 第一个 emoji\r\n  let icon: string | undefined;\r\n  const afterPrefix = lineText.replace(RE_TASK_PREFIX, '').trim();\r\n  const iconMatch = afterPrefix.match(/^(\\p{Extended_Pictographic}\\uFE0F?)/u);\r\n  let titleSrc = afterPrefix;\r\n  if (iconMatch) {\r\n    icon = iconMatch[1];\r\n    titleSrc = titleSrc.replace(/^(?:\\p{Extended_Pictographic}\\uFE0F?\\s*)+/u, '');\r\n  }\r\n\r\n  // 使用 cleanTaskText 来清理标题\r\n  titleSrc = cleanTaskText(titleSrc);\r\n\r\n  const item: Item = {\r\n    id: `${filePath}#${lineNo}`,\r\n    title: titleSrc || '',\r\n    content: lineText.trim(),\r\n    type: 'task',\r\n    status,\r\n    category: '任务',\r\n    tags: Array.from(new Set(tags)),\r\n    recurrence,\r\n    date: undefined,\r\n    created: 0,\r\n    modified: 0,\r\n    extra: {},\r\n  };\r\n\r\n  if (icon) {\r\n    item.icon = icon;\r\n    extra['图标'] = icon;\r\n  }\r\n  if (priority) item.priority = priority;\r\n\r\n  if (createdDate) item.createdDate = createdDate;\r\n  if (scheduledDate) item.scheduledDate = scheduledDate;\r\n  if (startDate) item.startDate = startDate;\r\n  if (dueDate) item.dueDate = dueDate;\r\n  if (doneDate) {\r\n    item.doneDate = doneDate;\r\n    if (status === 'done') item.date = doneDate;\r\n  }\r\n  if (cancelledDate) {\r\n    item.cancelledDate = cancelledDate;\r\n    if (status === 'cancelled') item.date = cancelledDate;\r\n  }\r\n\r\n  if (status === 'open') {\r\n    item.date = dueDate || scheduledDate || startDate || createdDate;\r\n  }\r\n\r\n  item.extra = extra;\r\n  return item;\r\n}\r\n\r\n/** 解析块内容 (<!-- start --> ... <!-- end -->) 为 Item */\r\nexport function parseBlockContent(\r\n  filePath: string,\r\n  lines: string[],\r\n  startIdx: number,\r\n  endIdx: number,\r\n  parentFolder: string\r\n): Item | null {\r\n  const contentLines = lines.slice(startIdx + 1, endIdx);\r\n  let title = '';\r\n  let category: string | null = null;\r\n  let status: string | undefined;\r\n  let date: string | undefined;\r\n  const tags: string[] = [];\r\n  const extra: Record<string, string | number | boolean> = {};\r\n  let themeValue: string | null = null;\r\n  let contentText = '';\r\n  let contentStarted = false;\r\n  let iconVal: string | null = null;\r\n\r\n  for (let i = 0; i < contentLines.length; i++) {\r\n    const rawLine = contentLines[i];\r\n    const line = rawLine.trim();\r\n    if (!contentStarted) {\r\n      if (line === '') continue;\r\n      const kv = line.match(/^([^:：]{1,20})::\\s*(.*)$/);\r\n      if (kv) {\r\n        const key = kv[1].trim();\r\n        const value = kv[2] || '';\r\n        const lower = key.toLowerCase();\r\n        if (['分类', '类别', 'category'].includes(lower)) {\r\n          category = value.trim();\r\n        } else if (['主题', '标签', 'tag', 'tags'].includes(lower)) {\r\n          themeValue = value.trim();\r\n        } else if (['状态', 'status'].includes(lower)) {\r\n          status = value.trim();\r\n        } else if (['日期', 'date'].includes(lower)) {\r\n          date = normalizeDateStr(value.trim());\r\n        } else if (['内容', 'content'].includes(lower)) {\r\n          contentStarted = true;\r\n          contentText = value;\r\n        } else if (['图标', 'icon'].includes(lower)) {\r\n          iconVal = value.trim();\r\n          extra['图标'] = iconVal;\r\n        } else {\r\n          const num = Number(value.trim());\r\n          let parsed: any = value.trim();\r\n          if (parsed !== '' && !isNaN(num)) parsed = num;\r\n          else if (/^(true|false)$/i.test(parsed)) parsed = parsed.toLowerCase() === 'true';\r\n          extra[key] = parsed;\r\n        }\r\n      } else {\r\n        contentStarted = true;\r\n        contentText = rawLine;\r\n      }\r\n    } else {\r\n      contentText += (contentText ? '\\n' : '') + rawLine;\r\n    }\r\n  }\r\n\r\n  if (themeValue) {\r\n    themeValue\r\n      .split(/[,，]/)\r\n      .map(p => p.trim())\r\n      .filter(Boolean)\r\n      .forEach(t => tags.push(t.replace(/^#/, '')));\r\n\r\n  }\r\n\r\n  if (contentText.trim() !== '') {\r\n    title = contentText.trim().split(/\\r?\\n/)[0];\r\n  } else if (themeValue) {\r\n    title = themeValue.split(/[,，]/).map(p => p.trim()).filter(Boolean).join(', ');\r\n  }\r\n  title = title.replace(/^(?:\\p{Extended_Pictographic}\\uFE0F?\\s*)+/u, '').trim();\r\n  if (title) title = title.slice(0, 10);\r\n\r\n  if (!category) category = parentFolder || '';\r\n\r\n  const item: Item = {\r\n    id: `${filePath}#${startIdx + 1}`,\r\n    title: title || '',\r\n    content: contentText.trim(),\r\n    type: 'block',\r\n    status,\r\n    category,\r\n    tags: Array.from(new Set(tags)),\r\n    recurrence: 'none',\r\n    date,\r\n    created: 0,\r\n    modified: 0,\r\n    extra,\r\n  };\r\n  if (iconVal) item.icon = iconVal;\r\n  return item;\r\n}\r\n","// utils/timing.ts\r\nexport function throttle<T extends (...args: any[]) => void>(\r\n  fn: T,\r\n  wait = 250\r\n): T {\r\n  let last = 0, timer: any = null;\r\n  return function (...args: Parameters<T>) {\r\n    const now = Date.now();\r\n    if (now - last >= wait) {\r\n      last = now;\r\n      fn.apply(this, args);\r\n    } else {\r\n      clearTimeout(timer);\r\n      timer = setTimeout(() => {\r\n        last = Date.now();\r\n        fn.apply(this, args);\r\n      }, wait - (now - last));\r\n    }\r\n  } as T;\r\n}","// data/store.ts - 数据存储与查询，实现扫描 Vault、维护 Item 列表、提供查询接口\r\n\r\nimport { App, TFile, TFolder, HeadingCache } from 'obsidian';\r\nimport { Item, FilterRule, SortRule, readField } from '../config/schema';\r\nimport { parseTaskLine, parseBlockContent } from './parser';\r\nimport { throttle } from '../utils/timing';\r\n\r\nexport class DataStore {\r\n  static instance: DataStore;\r\n\r\n  private app: App;\r\n  private items: Item[] = [];\r\n  private fileIndex: Map<string, Item[]> = new Map();\r\n  private changeListeners: Set<() => void> = new Set();\r\n\r\n  constructor(app: App) {\r\n    this.app = app;\r\n    DataStore.instance = this;\r\n  }\r\n\r\n  /* ---------- 扫描 ---------- */\r\n\r\n  /** 初次扫描所有 Markdown 文件（新） */\r\n  async scanAll() {\r\n    this.items = [];\r\n    this.fileIndex.clear();\r\n    const files = this.app.vault.getMarkdownFiles();\r\n    for (const file of files) await this.scanFile(file);\r\n  }\r\n\r\n  /** 兼容旧调用名 */\r\n  async initialScan() {\r\n    return this.scanAll();\r\n  }\r\n\r\n  /** 扫描并解析单个文件，将该文件的 Items 更新至存储 */\r\n  async scanFile(file: TFile): Promise<Item[]> {\r\n    try {\r\n      const content = await this.app.vault.read(file);\r\n      const lines = content.split(/\\r?\\n/);\r\n      const filePath = file.path;\r\n      const parentFolder = file.parent?.name || '';\r\n      const fileItems: Item[] = [];\r\n\r\n      const cache = this.app.metadataCache.getFileCache(file);\r\n      const headingsList: HeadingCache[] = cache?.headings || [];\r\n      let nextHeadingIndex = 0;\r\n      let currentSectionTags: string[] = [];\r\n      let currentHeader: string = '';\r\n\r\n      for (let i = 0; i < lines.length; i++) {\r\n        const line = lines[i];\r\n\r\n        // 标题切换\r\n        if (nextHeadingIndex < headingsList.length && headingsList[nextHeadingIndex].position.start.line === i) {\r\n          const headingEntry = headingsList[nextHeadingIndex];\r\n          const headingText = headingEntry.heading;\r\n          const headingTags = headingText.match(/#([\\p{L}\\p{N}_\\/-]+)/gu) || [];\r\n          currentSectionTags = headingTags.map(t => t.replace('#', '')).filter(Boolean);\r\n          let cleanText = headingText;\r\n          for (const tag of headingTags) cleanText = cleanText.replace(tag, '').trim();\r\n          currentHeader = cleanText || '';\r\n          nextHeadingIndex++;\r\n          continue;\r\n        }\r\n\r\n        // 块\r\n        if (line.trim() === '<!-- start -->') {\r\n          const endIdx = lines.indexOf('<!-- end -->', i + 1);\r\n          if (endIdx !== -1) {\r\n            const blockItem = parseBlockContent(filePath, lines, i, endIdx, parentFolder);\r\n            if (blockItem) {\r\n              blockItem.created  = file.stat.ctime;\r\n              blockItem.modified = file.stat.mtime;\r\n              if (currentHeader) blockItem.header = currentHeader;\r\n              blockItem.tags = Array.from(new Set([...currentSectionTags, ...blockItem.tags]));\r\n\r\n              let name = file.name.toLowerCase().endsWith('.md') ? file.name.slice(0, -3) : file.name;\r\n              blockItem.filename = name;\r\n              fileItems.push(blockItem);\r\n            }\r\n            i = endIdx;\r\n            continue;\r\n          }\r\n        }\r\n\r\n        // 任务\r\n        const taskItem = parseTaskLine(filePath, line, i + 1, parentFolder);\r\n        if (taskItem) {\r\n          taskItem.tags     = Array.from(new Set([...currentSectionTags, ...taskItem.tags]));\r\n          taskItem.created  = file.stat.ctime;\r\n          taskItem.modified = file.stat.mtime;\r\n          if (currentHeader) taskItem.header = currentHeader;\r\n\r\n          let name = file.name.toLowerCase().endsWith('.md') ? file.name.slice(0, -3) : file.name;\r\n          taskItem.filename = name;\r\n          fileItems.push(taskItem);\r\n        }\r\n      }\r\n\r\n      // 替换旧索引\r\n      if (this.fileIndex.has(filePath)) {\r\n        this.items = this.items.filter(it => it.id && !it.id.startsWith(filePath + '#'));\r\n      }\r\n      this.fileIndex.set(filePath, fileItems);\r\n      this.items.push(...fileItems);\r\n      return fileItems;\r\n    } catch (err) {\r\n      console.error('ThinkPlugin: 扫描文件失败', file.path, err);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  /** 从存储中移除指定文件的 Items */\r\n  removeFileItems(filePath: string) {\r\n    if (this.fileIndex.has(filePath)) {\r\n      this.fileIndex.delete(filePath);\r\n      this.items = this.items.filter(it => !it.id.startsWith(filePath + '#'));\r\n    }\r\n  }\r\n\r\n  /** 兼容旧调用名 */\r\n  removeFile(path: string) {\r\n    this.removeFileItems(path);\r\n  }\r\n\r\n  /* ---------- 查询 ---------- */\r\n\r\n  queryItems(filters: FilterRule[] = [], sortRules: SortRule[] = []): Item[] {\r\n    let results = this.items.filter(item =>\r\n      (filters || []).every(rule => this._matchItem(item, rule))\r\n    );\r\n\r\n    if (sortRules.length > 0) {\r\n      results.sort((a, b) => {\r\n        for (const rule of sortRules) {\r\n          const aVal = readField(a, rule.field);\r\n          const bVal = readField(b, rule.field);\r\n          if (aVal == null && bVal == null) continue;\r\n          if (aVal == null) return rule.dir === 'asc' ? 1 : -1;\r\n          if (bVal == null) return rule.dir === 'asc' ? -1 : 1;\r\n\r\n          if (typeof aVal === 'number' && typeof bVal === 'number') {\r\n            if (aVal !== bVal) return rule.dir === 'asc' ? aVal - bVal : bVal - aVal;\r\n          } else {\r\n            const aStr = String(aVal);\r\n            const bStr = String(bVal);\r\n            if (aStr !== bStr) return rule.dir === 'asc' ? aStr.localeCompare(bStr) : bStr.localeCompare(aStr);\r\n          }\r\n        }\r\n        return 0;\r\n      });\r\n    }\r\n    return results;\r\n  }\r\n\r\n  /** 兼容旧调用名 */\r\n  query(filters: FilterRule[] = [], sortRules: SortRule[] = []) {\r\n    return this.queryItems(filters, sortRules);\r\n  }\r\n\r\n  /* ---------- 标记任务完成 ---------- */\r\n  async markItemDone(itemId: string): Promise<void> {\r\n    const parts = itemId.split('#');\r\n    const filePath = parts[0];\r\n    const lineNo = Number(parts[1]) || 0;\r\n    const file = this.app.vault.getAbstractFileByPath(filePath);\r\n    if (!(file instanceof TFile)) return;\r\n    try {\r\n      const content = await this.app.vault.read(file);\r\n      const lines = content.split(/\\r?\\n/);\r\n      if (lineNo <= 0 || lineNo > lines.length) return;\r\n      const rawLine = lines[lineNo - 1];\r\n      if (!/^\\s*-\\s*\\[ \\]/.test(rawLine)) return;\r\n\r\n      const moment = (window as any).moment;\r\n      const today = moment().format('YYYY-MM-DD');\r\n      const nowTime = moment().format('HH:mm');\r\n\r\n      let completedLine = rawLine;\r\n      completedLine = completedLine.replace(/(\\s|^)(时长::[^\\s\\(\\)]+)/g, (match, pre, content) => {\r\n        if (match.includes('(') && match.includes(')')) return match;\r\n        return `${pre}(${content})`;\r\n      });\r\n      if (/\\(时长::[^\\)]+\\)/.test(completedLine)) {\r\n        completedLine = completedLine.replace(\r\n          /\\((时长::[^\\)]+)\\)/,\r\n          `(时间::${nowTime}) ($1)`\r\n        );\r\n      } else if (/时长::[^\\s]+/.test(completedLine)) {\r\n        completedLine = completedLine.replace(\r\n          /(时长::[^\\s]+)/,\r\n          `(时间::${nowTime}) ($1)`\r\n        );\r\n      } else if (/🔁/.test(completedLine)) {\r\n        completedLine = completedLine.replace(\r\n          /(🔁)/,\r\n          `(时间::${nowTime}) $1`\r\n        );\r\n      } else {\r\n        completedLine = completedLine + ` (时间::${nowTime})`;\r\n      }\r\n\r\n      completedLine = completedLine.replace(/^(\\s*-\\s*)\\[[ xX-]\\]/, '$1[x]');\r\n      if (!/^-\\s*\\[x\\]/.test(completedLine)) {\r\n        completedLine = '- [x] ' + completedLine.replace(/^-\\s*\\[.\\]/, '').replace(/^-\\s*/, '');\r\n      }\r\n      completedLine = completedLine.replace(/\\s*✅\\s*\\d{4}-\\d{2}-\\d{2}$/, '');\r\n      completedLine = completedLine.trim() + ` ✅ ${today}`;\r\n\r\n      const isRecurring = rawLine.includes('🔁');\r\n      if (isRecurring) {\r\n        const generateNextRecurringTaskText = (rawTask: string): string => {\r\n          let nextLine = rawTask;\r\n          nextLine = nextLine.replace(/^(\\s*-\\s*)\\[[ xX-]\\]/, '$1[ ]');\r\n          nextLine = nextLine.replace(/\\s*✅\\s*\\d{4}[-/]\\d{2}[-/]\\d{2}/, '');\r\n          nextLine = nextLine.replace(/\\(时间::\\d{2}:\\d{2}\\)/, '');\r\n\r\n          const recMatch = rawTask.match(/🔁\\s*every\\s+(\\d+)?\\s*(day|week|month|year)s?\\s*(when done)?/);\r\n          const moment = (window as any).moment;\r\n          let interval = 1;\r\n          let unit = 'day';\r\n          let whenDone = false;\r\n          if (recMatch) {\r\n            if (recMatch[1]) interval = parseInt(recMatch[1]);\r\n            unit = recMatch[2];\r\n            if (unit.endsWith('s')) unit = unit.slice(0, -1);\r\n            whenDone = !!recMatch[3];\r\n          }\r\n          const baseDate = whenDone ? moment() : (() => {\r\n            const due = rawTask.match(/📅\\s*(\\d{4}[-/]\\d{2}[-/]\\d{2})/);\r\n            if (due) return moment(due[1], ['YYYY-MM-DD','YYYY/MM/DD']);\r\n            const scheduled = rawTask.match(/⏳\\s*(\\d{4}[-/]\\d{2}[-/]\\d{2})/);\r\n            if (scheduled) return moment(scheduled[1], ['YYYY-MM-DD','YYYY/MM/DD']);\r\n            const start = rawTask.match(/🛫\\s*(\\d{4}[-/]\\d{2}[-/]\\d{2})/);\r\n            if (start) return moment(start[1], ['YYYY-MM-DD','YYYY/MM/DD']);\r\n            return moment();\r\n          })();\r\n          const nextDate = baseDate.clone().add(interval, unit + (interval > 1 ? 's' : ''));\r\n          const nextDateStr = nextDate.format('YYYY-MM-DD');\r\n\r\n          if (/📅\\s*\\d{4}-\\d{2}-\\d{2}/.test(nextLine)) {\r\n            nextLine = nextLine.replace(/📅\\s*\\d{4}[-/]\\d{2}[-/]\\d{2}/, `📅 ${nextDateStr}`);\r\n          }\r\n          if (/⏳\\s*\\d{4}-\\d{2}-\\d{2}/.test(nextLine)) {\r\n            nextLine = nextLine.replace(/⏳\\s*\\d{4}[-/]\\d{2}[-/]\\d{2}/, `⏳ ${nextDateStr}`);\r\n          }\r\n          if (/🛫\\s*\\d{4}-\\d{2}-\\d{2}/.test(nextLine)) {\r\n          nextLine = nextLine.replace(/🛫\\s*\\d{4}[-/]\\d{2}[-/]\\d{2}/, `🛫 ${nextDateStr}`);\r\n          }\r\n          nextLine = nextLine.trim();\r\n          return nextLine;\r\n        };\r\n        lines[lineNo - 1] = completedLine;\r\n        const nextTaskLine = generateNextRecurringTaskText(rawLine);\r\n        lines.splice(lineNo, 0, nextTaskLine);\r\n      } else {\r\n        lines[lineNo - 1] = completedLine;\r\n      }\r\n\r\n      await this.app.vault.modify(file, lines.join(\"\\n\"));\r\n      await this.scanFile(file);\r\n      this._emitChange();\r\n    } catch (err) {\r\n      console.error('ThinkPlugin: 标记任务完成时发生错误', err);\r\n    }\r\n  }\r\n\r\n  /* ---------- 订阅 ---------- */\r\n\r\n  private _emitChange() {\r\n    this.changeListeners.forEach(fn => {\r\n      try { fn(); } catch (e) { console.error('ThinkPlugin: 数据变化通知错误', e); }\r\n    });\r\n  }\r\n  private _emitThrottled = throttle(() => this._emitChange(), 250);\r\n\r\n  subscribe(listener: () => void) { this.changeListeners.add(listener); }\r\n  unsubscribe(listener: () => void) { this.changeListeners.delete(listener); }\r\n  notifyChange() { this._emitThrottled(); }\r\n\r\n  /* ---------- 过滤匹配 ---------- */\r\n  private _matchItem(item: Item, rule: FilterRule): boolean {\r\n    const fieldVal = readField(item, rule.field);\r\n    const cmpVal   = rule.value;\r\n\r\n    if (rule.op === '=' || rule.op === '!=') {\r\n      const isEqual = fieldVal != null && cmpVal != null && String(fieldVal) === String(cmpVal);\r\n      return rule.op === '=' ? isEqual : !isEqual;\r\n    }\r\n    if (rule.op === 'includes') {\r\n      if (fieldVal == null) return false;\r\n      if (Array.isArray(fieldVal)) return fieldVal.some(v => String(v).includes(String(cmpVal)));\r\n      return String(fieldVal).includes(String(cmpVal));\r\n    }\r\n    if (rule.op === 'regex') {\r\n      if (fieldVal == null) return false;\r\n      try {\r\n        const regex = new RegExp(String(cmpVal));\r\n        if (Array.isArray(fieldVal)) return fieldVal.some(v => regex.test(String(v)));\r\n        return regex.test(String(fieldVal));\r\n      } catch {\r\n        console.warn('ThinkPlugin: 无效的正则表达式', cmpVal);\r\n        return false;\r\n      }\r\n    }\r\n    if (rule.op === '>' || rule.op === '<') {\r\n      if (fieldVal == null) return false;\r\n\r\n      const itemNum = Number(fieldVal);\r\n      const cmpNum  = Number(cmpVal);\r\n      if (!isNaN(itemNum) && !isNaN(cmpNum)) return rule.op === '>' ? itemNum > cmpNum : itemNum < cmpNum;\r\n\r\n      const itemTime = Date.parse(String(fieldVal));\r\n      const cmpTime  = Date.parse(String(cmpVal));\r\n      if (!isNaN(itemTime) && !isNaN(cmpTime)) return rule.op === '>' ? itemTime > cmpTime : itemTime < cmpTime;\r\n\r\n      const aStr = String(fieldVal);\r\n      const bStr = String(cmpVal);\r\n      return rule.op === '>' ? aStr > bStr : aStr < bStr;\r\n    }\r\n    return false;\r\n  }\r\n}\r\n","import{options as r,Fragment as e}from\"preact\";export{Fragment}from\"preact\";var t=/[\"&<]/;function n(r){if(0===r.length||!1===t.test(r))return r;for(var e=0,n=0,o=\"\",f=\"\";n<r.length;n++){switch(r.charCodeAt(n)){case 34:f=\"&quot;\";break;case 38:f=\"&amp;\";break;case 60:f=\"&lt;\";break;default:continue}n!==e&&(o+=r.slice(e,n)),o+=f,e=n+1}return n!==e&&(o+=r.slice(e,n)),o}var o=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,f=0,i=Array.isArray;function u(e,t,n,o,i,u){t||(t={});var a,c,p=t;if(\"ref\"in p)for(c in p={},t)\"ref\"==c?a=t[c]:p[c]=t[c];var l={type:e,props:p,key:n,ref:a,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--f,__i:-1,__u:0,__source:i,__self:u};if(\"function\"==typeof e&&(a=e.defaultProps))for(c in a)void 0===p[c]&&(p[c]=a[c]);return r.vnode&&r.vnode(l),l}function a(r){var t=u(e,{tpl:r,exprs:[].slice.call(arguments,1)});return t.key=t.__v,t}var c={},p=/[A-Z]/g;function l(e,t){if(r.attr){var f=r.attr(e,t);if(\"string\"==typeof f)return f}if(t=function(r){return null!==r&&\"object\"==typeof r&&\"function\"==typeof r.valueOf?r.valueOf():r}(t),\"ref\"===e||\"key\"===e)return\"\";if(\"style\"===e&&\"object\"==typeof t){var i=\"\";for(var u in t){var a=t[u];if(null!=a&&\"\"!==a){var l=\"-\"==u[0]?u:c[u]||(c[u]=u.replace(p,\"-$&\").toLowerCase()),s=\";\";\"number\"!=typeof a||l.startsWith(\"--\")||o.test(l)||(s=\"px;\"),i=i+l+\":\"+a+s}}return e+'=\"'+n(i)+'\"'}return null==t||!1===t||\"function\"==typeof t||\"object\"==typeof t?\"\":!0===t?e:e+'=\"'+n(\"\"+t)+'\"'}function s(r){if(null==r||\"boolean\"==typeof r||\"function\"==typeof r)return null;if(\"object\"==typeof r){if(void 0===r.constructor)return r;if(i(r)){for(var e=0;e<r.length;e++)r[e]=s(r[e]);return r}}return n(\"\"+r)}export{u as jsx,l as jsxAttr,u as jsxDEV,s as jsxEscape,a as jsxTemplate,u as jsxs};\r\n//# sourceMappingURL=jsxRuntime.module.js.map\r\n","// utils/obsidian.ts\r\nimport { DataStore } from '../data/store';\r\n\r\nexport function makeObsUri(itemId: string): string {\r\n  const hashIndex = itemId.lastIndexOf('#');\r\n  const filePath = hashIndex >= 0 ? itemId.substring(0, hashIndex) : itemId;\r\n  const lineNo = hashIndex >= 0 ? itemId.substring(hashIndex + 1) : '';\r\n  const vaultName = encodeURIComponent(DataStore.instance['app'].vault.getName());\r\n  return `obsidian://advanced-uri?vault=${vaultName}&filepath=${encodeURIComponent(filePath)}${lineNo ? '&line=' + lineNo : ''}`;\r\n}","\r\n// views/TableView.tsx\r\n\r\nimport { JSX, h } from 'preact';\r\nimport { Item, readField } from '../config/schema';\r\nimport { DataStore } from '../data/store';\r\nimport './styles.css';\r\nimport { makeObsUri } from '../utils/obsidian';\r\nimport { EMPTY_LABEL } from '../config/constants';\r\n\r\ninterface TableViewProps {\r\n  items: Item[];\r\n  rowField: string;\r\n  colField: string;\r\n}\r\n\r\nexport function TableView({ items, rowField, colField }: TableViewProps) {\r\n  if (!rowField || !colField) return <div>（TableView 需要配置 rowField 和 colField）</div>;\r\n\r\n  const rowValues: string[] = [];\r\n  const colValues: string[] = [];\r\n  const matrix: Record<string, Record<string, Item[]>> = {};\r\n\r\n  for (const item of items) {\r\n    const rv = readField(item, rowField) ?? EMPTY_LABEL;\r\n    const cv = readField(item, colField) ?? EMPTY_LABEL;\r\n    const rKey = String(rv);\r\n    const cKey = String(cv);\r\n\r\n    if (!matrix[rKey]) { matrix[rKey] = {}; rowValues.push(rKey); }\r\n    if (!matrix[rKey][cKey]) matrix[rKey][cKey] = [];\r\n    matrix[rKey][cKey].push(item);\r\n    if (!colValues.includes(cKey)) colValues.push(cKey);\r\n  }\r\n\r\n  rowValues.sort();\r\n  colValues.sort();\r\n\r\n  return (\r\n    <table class=\"think-table\">\r\n      <thead>\r\n        <tr>\r\n          <th>{rowField}</th>\r\n          {colValues.map(col => <th key={col}>{col}</th>)}\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {rowValues.map(row => (\r\n          <tr key={row}>\r\n            <td><strong>{row}</strong></td>\r\n            {colValues.map(col => {\r\n              const cellItems = matrix[row]?.[col] || [];\r\n              return cellItems.length === 0 ? (\r\n                <td key={col} class=\"empty\" />\r\n              ) : (\r\n                <td key={col}>\r\n                  {cellItems.map(it => <div key={it.id}>{renderItemCell(it)}</div>)}\r\n                </td>\r\n              );\r\n            })}\r\n          </tr>\r\n        ))}\r\n      </tbody>\r\n    </table>\r\n  );\r\n}\r\n\r\nfunction renderItemCell(item: Item) {\r\n  if (item.type === 'task') {\r\n    const isDone = item.status === 'done';\r\n    const checkboxId = 'cb-' + item.id.replace(/[^a-zA-Z0-9]/g, '_');\r\n\r\n    const handleChange: JSX.GenericEventHandler<HTMLInputElement> = evt => {\r\n      if (evt.currentTarget.checked) DataStore.instance.markItemDone(item.id);\r\n    };\r\n\r\n    return (\r\n      <span>\r\n        {/* 复选框 */}\r\n        {!isDone && (\r\n          <input type=\"checkbox\" id={checkboxId} class=\"task-checkbox\" onChange={handleChange} />\r\n        )}\r\n        {isDone && (\r\n          <input\r\n            type=\"checkbox\"\r\n            id={checkboxId}\r\n            class=\"task-checkbox done\"\r\n            checked\r\n            onClick={e => e.preventDefault()}\r\n          />\r\n        )}\r\n        \r\n        {/* 图标 */}\r\n        {item.icon && <span class=\"task-icon\">{item.icon}</span>}\r\n        \r\n        {/* 标题 */}\r\n        <a href={makeObsUri(item.id)} target=\"_blank\" rel=\"noopener\">\r\n          {item.title}\r\n        </a>\r\n      </span>\r\n    );\r\n  }\r\n  return (\r\n    <a href={makeObsUri(item.id)} target=\"_blank\" rel=\"noopener\">\r\n      {item.title}\r\n    </a>\r\n  );\r\n}\r\n","// config/categoryColorMap.ts\r\n\r\n// 类别到颜色的映射\r\nexport const CATEGORY_COLOR_MAP: Record<string, string> = {\r\n  打卡: '#d2cceb',\r\n  任务: '#caebf3',\r\n  计划: '#d8ecb2',\r\n  总结: '#E5D5B9',\r\n  事件: '#94e2d6',\r\n  感受: '#93daf0',\r\n  思考: '#f09393',\r\n  // ... 其它类别\r\n};\r\n\r\nexport function getCategoryColor(category: string): string {\r\n  return CATEGORY_COLOR_MAP[category] || '#e0e0e0';\r\n}\r\n","\r\n// views/BlockView.tsx\r\n\r\nimport { Item, readField } from '../config/schema';\r\nimport { getCategoryColor } from '../config/categoryColorMap';\r\nimport { DataStore } from '../data/store';\r\nimport { h, JSX } from 'preact';\r\nimport './styles.css';\r\nimport { makeObsUri } from '../utils/obsidian';\r\n\r\ninterface BlockViewProps {\r\n  items: Item[];\r\n  groupField?: string;\r\n  showMeta?: boolean;\r\n  fields?: string[];\r\n}\r\n\r\nexport function BlockView(props: BlockViewProps) {\r\n  const { groupField, showMeta = true, fields } = props;\r\n  let { items } = props;\r\n\r\n  let filteredItems = items;\r\n  if (fields && fields.length > 0) {\r\n    filteredItems = items.filter(item =>\r\n      fields.some(field => {\r\n        const val = readField(item, field);\r\n        return val !== null && val !== undefined && String(val).trim() !== '';\r\n      })\r\n    );\r\n  }\r\n\r\n  let grouped: Record<string, Item[]> | null = null;\r\n  let groupKeys: string[] = [];\r\n  if (groupField) {\r\n    grouped = {};\r\n    for (const item of filteredItems) {\r\n      const key = String(readField(item, groupField) ?? '(none)');\r\n      if (!grouped[key]) {\r\n        grouped[key] = [];\r\n        groupKeys.push(key);\r\n      }\r\n      grouped[key].push(item);\r\n    }\r\n    groupKeys.sort();\r\n  }\r\n\r\n  const renderCheckbox = (item: Item) => {\r\n    if (item.type !== 'task') return null;\r\n    const isDone = item.status === 'done';\r\n    return (\r\n      <input\r\n        type=\"checkbox\"\r\n        class={`task-checkbox ${isDone ? 'done' : ''}`}\r\n        checked={isDone}\r\n        onClick={isDone ? (e) => e.preventDefault() : undefined}\r\n        onChange={async (e) => {\r\n          if ((e.target as HTMLInputElement).checked && !isDone) {\r\n            await DataStore.instance.markItemDone(item.id);\r\n          }\r\n        }}\r\n      />\r\n    );\r\n  };\r\n\r\n  const renderBlockItem = (item: Item) => {\r\n    if (fields && fields.length > 0) {\r\n      const hasTitle     = fields.includes('title');\r\n      const hasContent   = fields.includes('content');\r\n      const metaFields   = ['category', 'date', 'icon'];\r\n      const hasMetaField = fields.some(f => metaFields.includes(f));\r\n      const useCardLayout = hasMetaField && (hasTitle || hasContent);\r\n\r\n      if (useCardLayout) {\r\n        const metaPills: JSX.Element[] = [];\r\n        fields.forEach(f => {\r\n          if (!metaFields.includes(f)) return;\r\n          const val = readField(item, f);\r\n          if (val == null || String(val).trim() === '') return;\r\n\r\n          if (f === 'category') {\r\n            metaPills.push(\r\n              <span class=\"tag-pill\" style={`background:${getCategoryColor(item.category)};`} key=\"cat\">\r\n                {item.category}\r\n              </span>\r\n            );\r\n          } else if (f === 'date') {\r\n            metaPills.push(<span class=\"tag-pill\" key=\"date\">{item.date}</span>);\r\n          } else if (f === 'icon') {\r\n            metaPills.push(<span class=\"tag-pill\" key=\"icon\">{item.icon}</span>);\r\n          }\r\n        });\r\n\r\n        const topLine = () => {\r\n          if (hasTitle) {\r\n            const titleNode = !hasContent ? (\r\n              <a href={`${makeObsUri(item.id)}`} target=\"_blank\" rel=\"noopener\">{item.title}</a>\r\n            ) : (\r\n              <span>{item.title}</span>\r\n            );\r\n            return (\r\n              <div style=\"line-height:1.5;margin-bottom:2px;\">\r\n                {renderCheckbox(item)}\r\n                {titleNode}\r\n              </div>\r\n            );\r\n          }\r\n          if (hasContent) {\r\n            return (\r\n              <div style=\"line-height:1.5;margin-bottom:2px;\">\r\n                {renderCheckbox(item)}\r\n                <a href={`${makeObsUri(item.id)}`} target=\"_blank\" rel=\"noopener\" style=\"white-space:pre-wrap;\">\r\n                  {item.content}\r\n                </a>\r\n              </div>\r\n            );\r\n          }\r\n          return null;\r\n        };\r\n\r\n        const bottomLine = hasTitle && hasContent ? (\r\n          <div style=\"white-space:pre-wrap;line-height:1.5;\">\r\n            <a href={`${makeObsUri(item.id)}`} target=\"_blank\" rel=\"noopener\">\r\n              {item.content}\r\n            </a>\r\n          </div>\r\n        ) : null;\r\n\r\n        return (\r\n          <div\r\n            style=\"\r\n              display:grid;\r\n              grid-template-columns:auto minmax(180px,1fr);\r\n              gap:8px;\r\n              align-items:start;\r\n              margin-bottom:8px;\r\n            \"\r\n          >\r\n            <div style=\"font-size:90%;display:flex;flex-wrap:wrap;gap:4px;\">{metaPills}</div>\r\n            <div>\r\n              {topLine()}\r\n              {bottomLine}\r\n            </div>\r\n          </div>\r\n        );\r\n      }\r\n\r\n      const rowElems: JSX.Element[] = [];\r\n      let checkboxRendered = false;\r\n\r\n      fields.forEach((field, idx) => {\r\n        const val = readField(item, field);\r\n\r\n        if (!checkboxRendered && item.type === 'task' && (field === 'title' || field === 'content')) {\r\n          rowElems.push(renderCheckbox(item) as JSX.Element);\r\n          checkboxRendered = true;\r\n        }\r\n\r\n        if (field === 'content') {\r\n          rowElems.push(\r\n            <a href={`${makeObsUri(item.id)}`} target=\"_blank\" rel=\"noopener\" style=\"white-space:pre-wrap;\" key={idx}>\r\n              {item.content}\r\n            </a>\r\n          );\r\n        } else if (field === 'title') {\r\n          if (!fields.includes('content')) {\r\n            rowElems.push(\r\n              <a href={`${makeObsUri(item.id)}`} target=\"_blank\" rel=\"noopener\" key={idx}>\r\n                {item.title}\r\n              </a>\r\n            );\r\n          } else {\r\n            rowElems.push(<span key={idx}>{item.title}</span>);\r\n          }\r\n        } else if (field === 'tags') {\r\n          rowElems.push(\r\n            <span key=\"tags\">\r\n              {item.tags.map((tag) => (\r\n                <span class=\"tag-pill\" key={tag}>{tag}</span>\r\n              ))}\r\n            </span>\r\n          );\r\n        } else if (field === 'category') {\r\n          rowElems.push(\r\n            <span class=\"tag-pill\" style={`background:${getCategoryColor(item.category)};`} key={idx}>\r\n              {item.category}\r\n            </span>\r\n          );\r\n        } else if (field === 'icon') {\r\n          if (item.icon) rowElems.push(<span class=\"tag-pill\" key={idx}>{item.icon}</span>);\r\n        } else {\r\n          if (val == null) return;\r\n          const text = Array.isArray(val) ? val.join(', ') : String(val);\r\n          rowElems.push(<span class=\"tag-pill\" key={idx}>{text}</span>);\r\n        }\r\n      });\r\n\r\n      return <div style=\"margin-bottom:8px;line-height:1.5;\">{rowElems.map((el, i) => <span key={i}>{el}</span>)}</div>;\r\n    }\r\n\r\n    if (item.type === 'task') {\r\n      const isDone = item.status === 'done';\r\n      return (\r\n        <div style=\"margin-bottom:4px;line-height:1.5;\">\r\n          {renderCheckbox(item)}\r\n          <a href={`${makeObsUri(item.id)}`} target=\"_blank\" rel=\"noopener\" class={isDone ? 'task-done' : ''}>\r\n            {item.title}\r\n          </a>\r\n          {item.icon && <span class=\"tag-pill\">{item.icon}</span>}\r\n          {item.tags.map((tag) => (\r\n            <span class=\"tag-pill\" key={tag}>{tag}</span>\r\n          ))}\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div\r\n          style=\"\r\n            display:grid;\r\n            grid-template-columns:auto minmax(180px,1fr);\r\n            align-items:start;\r\n            gap:8px;\r\n            margin-bottom:8px;\r\n          \"\r\n        >\r\n          {showMeta && (\r\n            <div style=\"font-size:90%;display:flex;flex-wrap:wrap;gap:4px;\">\r\n              <span class=\"tag-pill\" style={`background:${getCategoryColor(item.category)};`}>{item.category}</span>\r\n              {item.date && <span class=\"tag-pill\">{item.date}</span>}\r\n              {item.extra['图标'] && <span class=\"tag-pill\">{item.extra['图标']}</span>}\r\n            </div>\r\n          )}\r\n          <div style=\"white-space:pre-wrap;line-height:1.5;\">\r\n            <a href={`${makeObsUri(item.id)}`} target=\"_blank\" rel=\"noopener\">\r\n              {item.content}\r\n            </a>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {grouped\r\n        ? groupKeys.map((grp) => (\r\n            <div>\r\n              <h5>{grp}</h5>\r\n              {grouped![grp].map((it) => renderBlockItem(it))}\r\n            </div>\r\n          ))\r\n        : filteredItems.map((it) => renderBlockItem(it))}\r\n    </div>\r\n  );\r\n}\r\n","// views/TimelineView.tsx - 时间轴视图组件 (占位实现)\r\n\r\nexport function TimelineView(props: any) {\r\n  return <div>（Timeline 视图暂未实现）</div>;\r\n}","// views/CalendarView.tsx - 日历视图组件 (占位实现)\r\nimport { render, h } from 'preact';  // 使用 Preact 渲染 JSX 组件\r\nexport function CalendarView(props: any) {\r\n  return <div>（Calendar 日视图暂未实现）</div>;\r\n}","// views/ChartView.tsx - 图表视图组件 (占位实现)\r\nimport { render } from 'preact';  // 使用 Preact 渲染 JSX 组件\r\nexport function ChartView(props: any) {\r\n  return <div>（Chart 图表视图暂未实现）</div>;\r\n}","// views/ExcelView.tsx\r\n\r\nimport { h } from 'preact';\r\nimport { Item, getAllFields, readField } from '../config/schema';\r\n\r\ninterface ExcelViewProps {\r\n  items: Item[];\r\n  fields?: string[];\r\n}\r\n\r\nfunction toText(v: any): string {\r\n  if (Array.isArray(v)) return v.join(', ');\r\n  return v == null ? '' : String(v);\r\n}\r\n\r\nexport function ExcelView({ items, fields }: ExcelViewProps) {\r\n  const cols = (fields && fields.length) ? fields : getAllFields(items);\r\n\r\n  return (\r\n    <div>\r\n      <table class=\"think-table\" style=\"min-width:100%; white-space:nowrap;\">\r\n        <thead>\r\n          <tr>{cols.map(c => <th key={c}>{c}</th>)}</tr>\r\n        </thead>\r\n        <tbody>\r\n          {items.map(it => (\r\n            <tr key={it.id}>\r\n              {cols.map(c => <td key={c}>{toText(readField(it, c))}</td>)}\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n}\r\n","import{options as n}from\"preact\";var t,r,u,i,o=0,f=[],c=n,e=c.__b,a=c.__r,v=c.diffed,l=c.__c,m=c.unmount,s=c.__;function p(n,t){c.__h&&c.__h(r,n,o||t),o=0;var u=r.__H||(r.__H={__:[],__h:[]});return n>=u.__.length&&u.__.push({}),u.__[n]}function d(n){return o=1,h(D,n)}function h(n,u,i){var o=p(t++,2);if(o.t=n,!o.__c&&(o.__=[i?i(u):D(void 0,u),function(n){var t=o.__N?o.__N[0]:o.__[0],r=o.t(t,n);t!==r&&(o.__N=[r,o.__[1]],o.__c.setState({}))}],o.__c=r,!r.__f)){var f=function(n,t,r){if(!o.__c.__H)return!0;var u=o.__c.__H.__.filter(function(n){return!!n.__c});if(u.every(function(n){return!n.__N}))return!c||c.call(this,n,t,r);var i=o.__c.props!==n;return u.forEach(function(n){if(n.__N){var t=n.__[0];n.__=n.__N,n.__N=void 0,t!==n.__[0]&&(i=!0)}}),c&&c.call(this,n,t,r)||i};r.__f=!0;var c=r.shouldComponentUpdate,e=r.componentWillUpdate;r.componentWillUpdate=function(n,t,r){if(this.__e){var u=c;c=void 0,f(n,t,r),c=u}e&&e.call(this,n,t,r)},r.shouldComponentUpdate=f}return o.__N||o.__}function y(n,u){var i=p(t++,3);!c.__s&&C(i.__H,u)&&(i.__=n,i.u=u,r.__H.__h.push(i))}function _(n,u){var i=p(t++,4);!c.__s&&C(i.__H,u)&&(i.__=n,i.u=u,r.__h.push(i))}function A(n){return o=5,T(function(){return{current:n}},[])}function F(n,t,r){o=6,_(function(){if(\"function\"==typeof n){var r=n(t());return function(){n(null),r&&\"function\"==typeof r&&r()}}if(n)return n.current=t(),function(){return n.current=null}},null==r?r:r.concat(n))}function T(n,r){var u=p(t++,7);return C(u.__H,r)&&(u.__=n(),u.__H=r,u.__h=n),u.__}function q(n,t){return o=8,T(function(){return n},t)}function x(n){var u=r.context[n.__c],i=p(t++,9);return i.c=n,u?(null==i.__&&(i.__=!0,u.sub(r)),u.props.value):n.__}function P(n,t){c.useDebugValue&&c.useDebugValue(t?t(n):n)}function b(n){var u=p(t++,10),i=d();return u.__=n,r.componentDidCatch||(r.componentDidCatch=function(n,t){u.__&&u.__(n,t),i[1](n)}),[i[0],function(){i[1](void 0)}]}function g(){var n=p(t++,11);if(!n.__){for(var u=r.__v;null!==u&&!u.__m&&null!==u.__;)u=u.__;var i=u.__m||(u.__m=[0,0]);n.__=\"P\"+i[0]+\"-\"+i[1]++}return n.__}function j(){for(var n;n=f.shift();)if(n.__P&&n.__H)try{n.__H.__h.forEach(z),n.__H.__h.forEach(B),n.__H.__h=[]}catch(t){n.__H.__h=[],c.__e(t,n.__v)}}c.__b=function(n){r=null,e&&e(n)},c.__=function(n,t){n&&t.__k&&t.__k.__m&&(n.__m=t.__k.__m),s&&s(n,t)},c.__r=function(n){a&&a(n),t=0;var i=(r=n.__c).__H;i&&(u===r?(i.__h=[],r.__h=[],i.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(i.__h.forEach(z),i.__h.forEach(B),i.__h=[],t=0)),u=r},c.diffed=function(n){v&&v(n);var t=n.__c;t&&t.__H&&(t.__H.__h.length&&(1!==f.push(t)&&i===c.requestAnimationFrame||((i=c.requestAnimationFrame)||w)(j)),t.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),u=r=null},c.__c=function(n,t){t.some(function(n){try{n.__h.forEach(z),n.__h=n.__h.filter(function(n){return!n.__||B(n)})}catch(r){t.some(function(n){n.__h&&(n.__h=[])}),t=[],c.__e(r,n.__v)}}),l&&l(n,t)},c.unmount=function(n){m&&m(n);var t,r=n.__c;r&&r.__H&&(r.__H.__.forEach(function(n){try{z(n)}catch(n){t=n}}),r.__H=void 0,t&&c.__e(t,r.__v))};var k=\"function\"==typeof requestAnimationFrame;function w(n){var t,r=function(){clearTimeout(u),k&&cancelAnimationFrame(t),setTimeout(n)},u=setTimeout(r,35);k&&(t=requestAnimationFrame(r))}function z(n){var t=r,u=n.__c;\"function\"==typeof u&&(n.__c=void 0,u()),r=t}function B(n){var t=r;n.__c=n.__(),r=t}function C(n,t){return!n||n.length!==t.length||t.some(function(t,r){return t!==n[r]})}function D(n,t){return\"function\"==typeof t?t(n):t}export{q as useCallback,x as useContext,P as useDebugValue,y as useEffect,b as useErrorBoundary,g as useId,F as useImperativeHandle,_ as useLayoutEffect,T as useMemo,h as useReducer,A as useRef,d as useState};\r\n//# sourceMappingURL=hooks.module.js.map\r\n","// views/SettingsFormView.tsx\r\nimport { useState } from 'preact/hooks';\r\nimport ThinkPlugin from '../main';\r\n\r\ninterface SettingsFormViewProps {\r\n  /** 设置的 key，默认 'inputSettings' */\r\n  storageKey?: string;\r\n  /** plugin 实例由 Dashboard 注入 */\r\n  plugin: ThinkPlugin;\r\n}\r\n\r\nexport function SettingsFormView({ storageKey = 'inputSettings', plugin }: SettingsFormViewProps) {\r\n  const init = (plugin as any)[storageKey] || {};\r\n  const [form, setForm] = useState<Record<string, any>>(\r\n    typeof structuredClone === 'function' ? structuredClone(init) : JSON.parse(JSON.stringify(init))\r\n  );\r\n\r\n  const change = (k: string, v: any) => setForm(f => ({ ...f, [k]: v }));\r\n\r\n  const save = async () => {\r\n    (plugin as any)[storageKey] = form; // 写入内存\r\n    // 写回 dashboards + inputSettings（保持其它字段不丢）\r\n    await plugin.persistAll();\r\n    alert('已保存配置');\r\n  };\r\n\r\n  /* —— 下面是你需要的字段；可继续加 —— */\r\n  return (\r\n    <div style=\"display:flex;flex-direction:column;gap:6px;max-width:420px;\">\r\n      <label>\r\n        主题 (可层级“生活/健康”)：\r\n        <input\r\n          value={form.topic || ''}\r\n          onInput={e => change('topic', (e.target as HTMLInputElement).value)}\r\n        />\r\n      </label>\r\n\r\n      <label>\r\n        图标 (emoji)：\r\n        <input\r\n          value={form.icon || ''}\r\n          onInput={e => change('icon', (e.target as HTMLInputElement).value)}\r\n          placeholder=\"✨\"\r\n        />\r\n      </label>\r\n\r\n      <label>\r\n        任务字段清单 (逗号分隔)：\r\n        <input\r\n          value={form.taskFields || ''}\r\n          onInput={e => change('taskFields', (e.target as HTMLInputElement).value)}\r\n          placeholder=\"status,icon,repeat,…\"\r\n        />\r\n      </label>\r\n\r\n      <label>\r\n        Block 字段清单 (逗号分隔)：\r\n        <input\r\n          value={form.blockFields || ''}\r\n          onInput={e => change('blockFields', (e.target as HTMLInputElement).value)}\r\n          placeholder=\"分类,周期,日期,主题,图标,内容\"\r\n        />\r\n      </label>\r\n\r\n      <button style=\"margin-top:8px;\" onClick={save}>💾 保存配置</button>\r\n    </div>\r\n  );\r\n}\r\n","// views/index.ts - 视图组件注册表，将视图名称映射到组件\r\nimport { TableView }    from './TableView';\r\nimport { BlockView }    from './BlockView';\r\nimport { TimelineView } from './TimelineView';\r\nimport { CalendarView } from './CalendarView';\r\nimport { ChartView }    from './ChartView';\r\nimport { ExcelView }    from './ExcelView';\r\nimport { SettingsFormView } from './SettingsFormView'; \r\n/** 唯一维护的清单 */\r\nexport const VIEW_REGISTRY = {\r\n  TableView,\r\n  BlockView,\r\n  TimelineView,\r\n  CalendarView,\r\n  ChartView,\r\n  ExcelView,\r\n  SettingsFormView, \r\n} as const;\r\n\r\nexport const ViewComponents = VIEW_REGISTRY;\r\nexport type ViewName = keyof typeof VIEW_REGISTRY;\r\nexport const VIEW_OPTIONS: ViewName[] = Object.keys(VIEW_REGISTRY) as ViewName[];\r\n","// ui/SettingsTab.ts - 设置面板，提供仪表盘配置的可视化编辑\r\nimport { App, PluginSettingTab, Setting, Notice } from 'obsidian';\r\nimport {\r\n  DashboardConfig, ModuleConfig, FilterRule, SortRule,\r\n  getAllFields\r\n} from '../config/schema';\r\nimport ThinkPlugin from '../main';\r\nimport { VIEW_OPTIONS } from '../views';\r\n\r\nexport class SettingsTab extends PluginSettingTab {\r\n  plugin: ThinkPlugin;\r\n  private selectedDashName: string = '';\r\n\r\n  constructor(app: App, plugin: ThinkPlugin) {\r\n    super(app, plugin);\r\n    this.plugin = plugin;\r\n    if (plugin.dashboards.length > 0) {\r\n      this.selectedDashName = plugin.dashboards[0].name;\r\n    }\r\n  }\r\n\r\n  display(): void {\r\n    const { containerEl } = this;\r\n    containerEl.empty();\r\n    containerEl.createEl('h2', { text: 'Think 仪表盘 配置编辑' });\r\n\r\n    /* ---------- 字段/值建议 ---------- */\r\n    const allItems = this.plugin.dataStore.queryItems();\r\n    const fieldOptions = getAllFields(allItems); // 一处维护\r\n\r\n    const tagSet = new Set<string>();\r\n    const categorySet = new Set<string>();\r\n    const statusSet = new Set<string>();\r\n    const recurrenceSet = new Set<string>();\r\n    const typeSet = new Set<string>();\r\n\r\n    for (const item of allItems) {\r\n      (item.tags || []).forEach(t => t && tagSet.add(t));\r\n      if (item.category) categorySet.add(item.category);\r\n      if (item.status) statusSet.add(item.status);\r\n      if (item.recurrence) recurrenceSet.add(item.recurrence);\r\n      if (item.type) typeSet.add(item.type);\r\n    }\r\n\r\n    const tagsList = containerEl.createEl('datalist');\r\n    tagsList.id = 'think-tags-list';\r\n    Array.from(tagSet).forEach(opt => tagsList.createEl('option', { value: opt }));\r\n\r\n    const categoryList = containerEl.createEl('datalist');\r\n    categoryList.id = 'think-category-list';\r\n    Array.from(categorySet).forEach(opt => categoryList.createEl('option', { value: opt }));\r\n\r\n    const statusList = containerEl.createEl('datalist');\r\n    statusList.id = 'think-status-list';\r\n    Array.from(statusSet).forEach(opt => statusList.createEl('option', { value: opt }));\r\n\r\n    const recurrenceList = containerEl.createEl('datalist');\r\n    recurrenceList.id = 'think-recurrence-list';\r\n    Array.from(recurrenceSet).forEach(opt => recurrenceList.createEl('option', { value: opt }));\r\n\r\n    const typeList = containerEl.createEl('datalist');\r\n    typeList.id = 'think-type-list';\r\n    Array.from(typeSet).forEach(opt => typeList.createEl('option', { value: opt }));\r\n\r\n    const fieldsList = containerEl.createEl('datalist');\r\n    fieldsList.id = 'think-fields-list';\r\n    fieldOptions.forEach(opt => fieldsList.createEl('option', { value: opt }));\r\n\r\n    /* ---------- 当前仪表盘选择 ---------- */\r\n    const selectDash = containerEl.createEl('select');\r\n    for (const dash of this.plugin.dashboards) {\r\n      const opt = selectDash.createEl('option', { text: dash.name });\r\n      opt.value = dash.name;\r\n      if (dash.name === this.selectedDashName) opt.selected = true;\r\n    }\r\n    selectDash.onchange = () => {\r\n      this.selectedDashName = selectDash.value;\r\n      this.display();\r\n    };\r\n\r\n    const btnAdd = containerEl.createEl('button', { text: '新建仪表盘' });\r\n    btnAdd.style.marginLeft = '8px';\r\n    btnAdd.onclick = () => {\r\n      let baseName = '新仪表盘';\r\n      let newName = baseName;\r\n      let count = 1;\r\n      while (this.plugin.dashboards.find(d => d.name === newName)) {\r\n        newName = baseName + count++;\r\n      }\r\n      const newDash: DashboardConfig = { name: newName, modules: [] };\r\n      this.plugin.dashboards.push(newDash);\r\n      this.selectedDashName = newName;\r\n      this.plugin.saveData({ dashboards: this.plugin.dashboards });\r\n      new Notice('已添加新仪表盘配置');\r\n      this.display();\r\n    };\r\n\r\n    if (this.plugin.dashboards.length > 0) {\r\n      const btnDel = containerEl.createEl('button', { text: '删除当前仪表盘' });\r\n      btnDel.style.marginLeft = '8px';\r\n      btnDel.onclick = () => {\r\n        const idx = this.plugin.dashboards.findIndex(d => d.name === this.selectedDashName);\r\n        if (idx >= 0) {\r\n          this.plugin.dashboards.splice(idx, 1);\r\n          new Notice(`已删除配置：${this.selectedDashName}`);\r\n          this.selectedDashName = this.plugin.dashboards.length ? this.plugin.dashboards[0].name : '';\r\n          this.plugin.saveData({ dashboards: this.plugin.dashboards });\r\n          this.display();\r\n        }\r\n      };\r\n    }\r\n    containerEl.createEl('hr');\r\n\r\n    const dash = this.plugin.dashboards.find(d => d.name === this.selectedDashName);\r\n    if (!dash) return;\r\n\r\n    /* ---------- 基础设置 ---------- */\r\n    const baseFieldset = containerEl.createEl('fieldset');\r\n    baseFieldset.createEl('legend', { text: '基础设置' });\r\n    new Setting(baseFieldset).setName('仪表盘名称').addText(text => {\r\n      text.setValue(dash.name).onChange(val => {\r\n        dash.name = val.trim();\r\n      });\r\n    });\r\n    new Setting(baseFieldset).setName('数据源路径').addText(text => {\r\n      text.setValue(dash.path || '').onChange(val => {\r\n        dash.path = val.trim();\r\n      });\r\n    });\r\n    new Setting(baseFieldset).setName('标签 (用逗号分隔)').addText(text => {\r\n      const tagStr = Array.isArray(dash.tags) ? dash.tags.join(',') : (dash.tags || '');\r\n      text.setValue(tagStr).onChange(val => {\r\n        dash.tags = val.split(/[,，]/).map(t => t.trim()).filter(t => t);\r\n      });\r\n    });\r\n    new Setting(baseFieldset).setName('初始视图').addDropdown(drop => {\r\n      const views = ['年', '季', '月', '周', '天'];\r\n      views.forEach(v => drop.addOption(v, v));\r\n      drop.setValue(dash.initialView || '月');\r\n      drop.onChange(val => { dash.initialView = val; });\r\n    });\r\n    const now = new Date();\r\n    const todayStr = `${now.getFullYear()}-${String(now.getMonth()+1).padStart(2, '0')}-${String(now.getDate()).padStart(2, '0')}`;\r\n    const initialDateStr = dash.initialDate || todayStr;\r\n    if (!dash.initialDate) dash.initialDate = initialDateStr;\r\n    new Setting(baseFieldset).setName('初始日期').addText(text => {\r\n      text.inputEl.type = 'date';\r\n      text.setValue(initialDateStr).onChange(val => {\r\n        dash.initialDate = val;\r\n      });\r\n    });\r\n\r\n    containerEl.createEl('h3', { text: '模块列表' });\r\n\r\n    /* ---------- 模块编辑 ---------- */\r\n    dash.modules.forEach((mod, idx) => {\r\n      const modFieldset = containerEl.createEl('fieldset');\r\n      modFieldset.style.border = '1px solid #ccc';\r\n      modFieldset.style.padding = '8px';\r\n      modFieldset.style.marginBottom = '8px';\r\n      modFieldset.dataset.index = idx.toString();\r\n\r\n      modFieldset.createEl('legend', { text: `${mod.title || '模块'} (${mod.view})` });\r\n\r\n      new Setting(modFieldset).setName('模块标题').addText(t => {\r\n        t.setValue(mod.title).onChange(val => mod.title = val);\r\n      });\r\n\r\n      new Setting(modFieldset).setName('视图类型').addDropdown(dd => {\r\n        VIEW_OPTIONS.forEach(v => dd.addOption(v, v));\r\n        dd.setValue(mod.view);\r\n        dd.onChange(val => {\r\n          mod.view = val as ModuleConfig['view'];\r\n          this.display();\r\n        });\r\n      });\r\n\r\n      new Setting(modFieldset).addToggle(cb => {\r\n        cb.setValue(!!mod.collapsed).onChange(val => { mod.collapsed = val; });\r\n      }).setName('默认折叠');\r\n\r\n      if (mod.view === 'TableView') {\r\n        new Setting(modFieldset).setName('行字段 (rowField)').addText(t => {\r\n          t.setValue(mod.props?.rowField || '').onChange(val => {\r\n            if (!mod.props) mod.props = {};\r\n            mod.props.rowField = val.trim();\r\n          });\r\n          t.inputEl.setAttr('list','think-fields-list');\r\n        });\r\n        new Setting(modFieldset).setName('列字段 (colField)').addText(t => {\r\n          t.setValue(mod.props?.colField || '').onChange(val => {\r\n            if (!mod.props) mod.props = {};\r\n            mod.props.colField = val.trim();\r\n          });\r\n          t.inputEl.setAttr('list','think-fields-list');\r\n        });\r\n      }\r\n      if (mod.view === 'BlockView' || mod.view === 'TimelineView') {\r\n        new Setting(modFieldset).setName('分组字段').addText(t => {\r\n          t.setValue(mod.group || '').onChange(val => {\r\n            mod.group = val.trim() || undefined;\r\n          });\r\n          t.inputEl.setAttr('list','think-fields-list');\r\n        });\r\n      }\r\n      if (mod.view !== 'TableView' && mod.view !== 'ChartView' && mod.view !== 'CalendarView') {\r\n        new Setting(modFieldset).setName('显示字段 (用逗号分隔)').addText(t => {\r\n          const fieldStr = mod.fields ? mod.fields.join(',') : '';\r\n          t.setPlaceholder('如 title,tags,date').setValue(fieldStr).onChange(val => {\r\n            const fieldsArr = val.split(/[,，]/).map(f => f.trim()).filter(f => f);\r\n            mod.fields = fieldsArr.length > 0 ? fieldsArr : undefined;\r\n          });\r\n          t.inputEl.setAttr('list','think-fields-list');\r\n        });\r\n      }\r\n\r\n      // 过滤\r\n      const filterDiv = modFieldset.createDiv();\r\n      filterDiv.style.borderTop = '1px dashed #ccc';\r\n      filterDiv.style.marginTop = '6px';\r\n      filterDiv.style.paddingTop = '6px';\r\n      filterDiv.createEl('strong', { text: '过滤规则' });\r\n      (mod.filters || []).forEach((rule, ridx) => {\r\n        const rowDiv = filterDiv.createDiv({ cls: 'filter-row' });\r\n        rowDiv.style.display = 'flex';\r\n        rowDiv.style.marginBottom = '4px';\r\n\r\n        const fieldInput = rowDiv.createEl('input');\r\n        fieldInput.type = 'text';\r\n        fieldInput.style.flex = '0 0 30%';\r\n        fieldInput.value = rule.field;\r\n        fieldInput.setAttr('list', 'think-fields-list');\r\n\r\n        const opSelect = rowDiv.createEl('select');\r\n        ['=', '!=', 'includes', 'regex', '>', '<'].forEach(op => {\r\n          opSelect.add(new Option(op, op, false, op === rule.op));\r\n        });\r\n        opSelect.onchange = () => { rule.op = opSelect.value as FilterRule['op']; };\r\n\r\n        const valueInput = rowDiv.createEl('input');\r\n        valueInput.type = 'text';\r\n        valueInput.style.flex = '0 0 30%';\r\n        valueInput.value = String(rule.value);\r\n\r\n        const updateValueDatalist = () => {\r\n          valueInput.removeAttribute('list');\r\n          const f = fieldInput.value.trim();\r\n          if (f === 'tags') valueInput.setAttr('list','think-tags-list');\r\n          else if (f === 'category') valueInput.setAttr('list','think-category-list');\r\n          else if (f === 'status') valueInput.setAttr('list','think-status-list');\r\n          else if (f === 'recurrence') valueInput.setAttr('list','think-recurrence-list');\r\n          else if (f === 'type') valueInput.setAttr('list','think-type-list');\r\n        };\r\n        updateValueDatalist();\r\n\r\n        fieldInput.onchange = () => {\r\n          rule.field = fieldInput.value.trim();\r\n          updateValueDatalist();\r\n        };\r\n        valueInput.onchange = () => { rule.value = valueInput.value; };\r\n\r\n        const delBtn = rowDiv.createEl('button', { text: '删除' });\r\n        delBtn.onclick = () => {\r\n          mod.filters!.splice(ridx, 1);\r\n          this.display();\r\n        };\r\n      });\r\n      const addFilterBtn = filterDiv.createEl('button', { text: '+ 添加过滤条件' });\r\n      addFilterBtn.onclick = () => {\r\n        if (!mod.filters) mod.filters = [];\r\n        mod.filters.push({ field: '', op: '=', value: '' });\r\n        this.display();\r\n      };\r\n\r\n      // 排序\r\n      const sortDiv = modFieldset.createDiv();\r\n      sortDiv.style.borderTop = '1px dashed #ccc';\r\n      sortDiv.style.marginTop = '6px';\r\n      sortDiv.style.paddingTop = '6px';\r\n      sortDiv.createEl('strong', { text: '排序规则' });\r\n      (mod.sort || []).forEach((rule, ridx) => {\r\n        const rowDiv = sortDiv.createDiv({ cls: 'sort-row' });\r\n        rowDiv.style.display = 'flex';\r\n        rowDiv.style.marginBottom = '4px';\r\n\r\n        const fieldInput = rowDiv.createEl('input');\r\n        fieldInput.type = 'text';\r\n        fieldInput.style.flex = '0 0 40%';\r\n        fieldInput.value = rule.field;\r\n        fieldInput.setAttr('list', 'think-fields-list');\r\n        fieldInput.onchange = () => rule.field = fieldInput.value.trim();\r\n\r\n        const dirSelect = rowDiv.createEl('select');\r\n        [['asc','升序'], ['desc','降序']].forEach(([val,label]) => {\r\n          dirSelect.add(new Option(label, val, false, val === rule.dir));\r\n        });\r\n        dirSelect.onchange = () => { rule.dir = dirSelect.value as SortRule['dir']; };\r\n\r\n        const delBtn = rowDiv.createEl('button', { text: '删除' });\r\n        delBtn.style.marginLeft = '4px';\r\n        delBtn.onclick = () => {\r\n          mod.sort!.splice(ridx, 1);\r\n          this.display();\r\n        };\r\n      });\r\n      const addSortBtn = sortDiv.createEl('button', { text: '+ 添加排序条件' });\r\n      addSortBtn.onclick = () => {\r\n        if (!mod.sort) mod.sort = [];\r\n        mod.sort.push({ field: '', dir: 'asc' });\r\n        this.display();\r\n      };\r\n\r\n      // 上移/下移/删除模块\r\n      const actionsDiv = modFieldset.createDiv({ cls: 'module-actions' });\r\n      actionsDiv.style.textAlign = 'right';\r\n      if (idx > 0) {\r\n        const upBtn = actionsDiv.createEl('button', { text: '↑ 上移' });\r\n        upBtn.onclick = () => {\r\n          const mods = dash.modules;\r\n          [mods[idx-1], mods[idx]] = [mods[idx], mods[idx-1]];\r\n          this.display();\r\n        };\r\n      }\r\n      if (idx < dash.modules.length - 1) {\r\n        const downBtn = actionsDiv.createEl('button', { text: '↓ 下移' });\r\n        downBtn.onclick = () => {\r\n          const mods = dash.modules;\r\n          [mods[idx+1], mods[idx]] = [mods[idx], mods[idx+1]];\r\n          this.display();\r\n        };\r\n      }\r\n      const delBtn = actionsDiv.createEl('button', { text: '删除模块' });\r\n      delBtn.onclick = () => {\r\n        dash.modules.splice(idx, 1);\r\n        this.display();\r\n      };\r\n    });\r\n\r\n    // 添加新模块\r\n    const newModDiv = containerEl.createDiv();\r\n    const newSelect = newModDiv.createEl('select');\r\n    VIEW_OPTIONS.forEach(v => {\r\n      newSelect.add(new Option(v, v));\r\n    });\r\n    const addModBtn = newModDiv.createEl('button', { text: '添加模块' });\r\n    addModBtn.style.marginLeft = '6px';\r\n    addModBtn.onclick = () => {\r\n      const viewType = newSelect.value as ModuleConfig['view'];\r\n      const newModule: ModuleConfig = {\r\n        view: viewType,\r\n        title: '新模块',\r\n        collapsed: false,\r\n        filters: [],\r\n        sort: [],\r\n        props: {}\r\n      };\r\n      dash.modules.push(newModule);\r\n      this.display();\r\n    };\r\n\r\n    // 保存\r\n    containerEl.createEl('hr');\r\n    const saveBtn = containerEl.createEl('button', { text: '保存配置' });\r\n    saveBtn.onclick = () => {\r\n      if (dash.name !== this.selectedDashName) {\r\n        if (this.plugin.dashboards.some(d => d !== dash && d.name === dash.name)) {\r\n          new Notice('配置名称已存在，请更换名称');\r\n          return;\r\n        }\r\n      }\r\n      this.plugin.saveData({ dashboards: this.plugin.dashboards }).then(() => {\r\n        new Notice('仪表盘配置已保存');\r\n        this.plugin.refreshAllDashboards();\r\n        this.selectedDashName = dash.name;\r\n        this.display();\r\n      });\r\n    };\r\n  }\r\n}","// views/ModulePanel.tsx\r\n\r\n\r\n// 折叠组件：支持 Ctrl/⌘ + 点击标题一键折叠/展开全部模块\r\nimport { h } from 'preact';\r\nimport { useState, useRef, useEffect } from 'preact/hooks';\r\nimport { ModuleConfig } from '../config/schema';\r\n\r\ninterface ModulePanelProps {\r\n  module: ModuleConfig;\r\n  children: any;\r\n}\r\n\r\nexport function ModulePanel({ module, children }: ModulePanelProps) {\r\n  const [collapsed, setCollapsed] = useState<boolean>(!!module.collapsed);\r\n  const rootRef = useRef<HTMLDivElement>(null);\r\n\r\n  const toggleCollapsed = () => setCollapsed(v => !v);\r\n\r\n  const onHeaderClick = (e: MouseEvent) => {\r\n    if (e.metaKey || e.ctrlKey) {\r\n      // 广播事件给所有模块\r\n      const want = !collapsed;\r\n      const ev = new CustomEvent('think-toggle-all', { detail: want });\r\n      document.querySelectorAll('.think-module').forEach(el => el.dispatchEvent(ev));\r\n    } else {\r\n      toggleCollapsed();\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const handler = (ev: any) => {\r\n      const want: boolean = ev.detail;\r\n      setCollapsed(want);\r\n    };\r\n    const el = rootRef.current;\r\n    if (!el) return;\r\n    el.addEventListener('think-toggle-all', handler as any);\r\n    return () => el.removeEventListener('think-toggle-all', handler as any);\r\n  }, []);\r\n\r\n  return (\r\n    <div class=\"think-module\" ref={rootRef}>\r\n      <div class=\"module-header\" onClick={onHeaderClick as any} title=\"点击折叠/展开；Ctrl/⌘ + 点击：全部折叠/展开\">\r\n        <span class=\"module-title\">{module.title}</span>\r\n        <span class=\"module-toggle\">{collapsed ? '▶' : '▼'}</span>\r\n      </div>\r\n      {!collapsed && <div class=\"module-content\">{children}</div>}\r\n    </div>\r\n  );\r\n}\r\n","// views/Dashboard.tsx\r\n// 顶栏增加快速过滤；与 DataStore 拆分兼容；显示配置区域保留\r\nimport { h } from 'preact';\r\nimport { useState, useEffect } from 'preact/hooks';\r\nimport { DataStore } from '../data/store';\r\nimport { DashboardConfig, ModuleConfig, getAllFields } from '../config/schema';\r\nimport { ModulePanel } from './ModulePanel';\r\nimport type ThinkPlugin from '../main';\r\nimport { TFile, TFolder, Notice } from 'obsidian';\r\nimport { ViewComponents } from './index';\r\n\r\nconst QUARTER_TEXT = ['一', '二', '三', '四'];\r\n\r\ninterface DashboardProps {\r\n  config: DashboardConfig;\r\n  dataStore: DataStore;\r\n  plugin: ThinkPlugin;\r\n}\r\n\r\nexport function Dashboard({ config, dataStore, plugin }: DashboardProps) {\r\n  const moment = (window as any).moment;\r\n  const initialView = config.initialView || '月';\r\n  const initialDateMoment = config.initialDate\r\n    ? moment(config.initialDate, 'YYYY-MM-DD')\r\n    : moment();\r\n\r\n  const [currentView, setCurrentView] = useState(initialView);\r\n  const [currentDate, setCurrentDate] = useState(initialDateMoment);\r\n  const [showConfig, setShowConfig] = useState(false);\r\n  const [tempConfig, setTempConfig] = useState<DashboardConfig | null>(null);\r\n  const [newViewType, setNewViewType] = useState('TableView');\r\n  const [dataVersion, setDataVersion] = useState(0);\r\n  const [keyword, setKeyword] = useState('');\r\n\r\n  useEffect(() => {\r\n    const onData = () => setDataVersion(v => v + 1);\r\n    dataStore.subscribe(onData);\r\n    return () => dataStore.unsubscribe(onData);\r\n  }, [dataStore]);\r\n\r\n  useEffect(() => {\r\n    if (showConfig) {\r\n      const clone = (cfg: DashboardConfig) =>\r\n        typeof structuredClone === 'function'\r\n          ? structuredClone(cfg)\r\n          : JSON.parse(JSON.stringify(cfg));\r\n      setTempConfig(clone(config));\r\n      setNewViewType('TableView');\r\n    } else {\r\n      setTempConfig(null);\r\n    }\r\n  }, [showConfig, config]);\r\n\r\n  const getDateRange = (date: any, viewType: string) => {\r\n    let s = date.clone(),\r\n      e = date.clone();\r\n    switch (viewType) {\r\n      case '年':\r\n        s = date.clone().startOf('year');\r\n        e = date.clone().endOf('year');\r\n        break;\r\n      case '季':\r\n        s = date.clone().startOf('quarter');\r\n        e = date.clone().endOf('quarter');\r\n        break;\r\n      case '月':\r\n        s = date.clone().startOf('month');\r\n        e = date.clone().endOf('month');\r\n        break;\r\n      case '周':\r\n        s = date.clone().startOf('week');\r\n        e = date.clone().endOf('week');\r\n        break;\r\n      case '天':\r\n        s = date.clone().startOf('day');\r\n        e = date.clone().endOf('day');\r\n        break;\r\n    }\r\n    return { startDate: s, endDate: e };\r\n  };\r\n\r\n  const formattedDate = (date: any, viewType: string) => {\r\n    switch (viewType) {\r\n      case '年':\r\n        return date.format('YYYY年');\r\n      case '季': {\r\n        const q = date.quarter();\r\n        return `${date.year()}年${QUARTER_TEXT[q - 1]}季度`;\r\n      }\r\n      case '月':\r\n        return date.format('YYYY-MM');\r\n      case '周':\r\n        return date.format('YYYY-[W]WW');\r\n      case '天':\r\n        return date.format('YYYY-MM-DD');\r\n      default:\r\n        return date.format('YYYY-MM-DD');\r\n    }\r\n  };\r\n\r\n  const prevPeriod = () => {\r\n    switch (currentView) {\r\n      case '年':\r\n        setCurrentDate(currentDate.clone().subtract(1, 'year'));\r\n        break;\r\n      case '季':\r\n        setCurrentDate(currentDate.clone().subtract(1, 'quarter'));\r\n        break;\r\n      case '月':\r\n        setCurrentDate(currentDate.clone().subtract(1, 'month'));\r\n        break;\r\n      case '周':\r\n        setCurrentDate(currentDate.clone().subtract(1, 'week'));\r\n        break;\r\n      case '天':\r\n        setCurrentDate(currentDate.clone().subtract(1, 'day'));\r\n        break;\r\n    }\r\n  };\r\n  const nextPeriod = () => {\r\n    switch (currentView) {\r\n      case '年':\r\n        setCurrentDate(currentDate.clone().add(1, 'year'));\r\n        break;\r\n      case '季':\r\n        setCurrentDate(currentDate.clone().add(1, 'quarter'));\r\n        break;\r\n      case '月':\r\n        setCurrentDate(currentDate.clone().add(1, 'month'));\r\n        break;\r\n      case '周':\r\n        setCurrentDate(currentDate.clone().add(1, 'week'));\r\n        break;\r\n      case '天':\r\n        setCurrentDate(currentDate.clone().add(1, 'day'));\r\n        break;\r\n    }\r\n  };\r\n  const resetToday = () => setCurrentDate(moment());\r\n\r\n  const renderModule = (mod: ModuleConfig) => {\r\n    // ★★★ 先特判 SettingsFormView：它不需要 items，需要 plugin\r\n    if (mod.view === 'SettingsFormView') {\r\n      const ViewComp: any = ViewComponents[mod.view];\r\n      return (\r\n        <ModulePanel module={mod}>\r\n          <ViewComp plugin={plugin} storageKey=\"inputSettings\" />\r\n        </ModulePanel>\r\n      );\r\n    }\r\n\r\n    // 其他视图照旧\r\n    let items = dataStore.queryItems(mod.filters || [], mod.sort || []);\r\n\r\n    // 仪表盘级 tag/path 过滤\r\n    if (config.tags?.length) {\r\n      items = items.filter(it =>\r\n        it.tags.some(tag => config.tags!.some(t => tag.includes(t))),\r\n      );\r\n    }\r\n    if (config.path && config.path.trim() !== '') {\r\n      const target = config.path.trim();\r\n      const af = (DataStore.instance as any)['app'].vault.getAbstractFileByPath(target);\r\n      if (af) {\r\n        if (af instanceof TFolder) {\r\n          const prefix = target.endsWith('/') ? target : target + '/';\r\n          items = items.filter(it => it.id.startsWith(prefix));\r\n        } else if (af instanceof TFile) {\r\n          const prefix = target + '#';\r\n          items = items.filter(it => it.id.startsWith(prefix));\r\n        }\r\n      } else {\r\n        const prefix = target.endsWith('/') ? target : target + '/';\r\n        items = items.filter(it => it.id.startsWith(prefix));\r\n      }\r\n    }\r\n\r\n    // 时间范围过滤\r\n    if (currentView && currentDate) {\r\n    const { startDate, endDate } = getDateRange(currentDate, currentView);\r\n    items = items.filter(it => {\r\n      if (!it.date) return true; // 🟢 显示无日期项\r\n      const d = moment(it.date, 'YYYY-MM-DD');\r\n      return d.isSameOrAfter(startDate) && d.isSameOrBefore(endDate);\r\n    });\r\n    }\r\n\r\n    // 关键字过滤\r\n    if (keyword.trim()) {\r\n      const kw = keyword.toLowerCase();\r\n      items = items.filter(it =>\r\n        (it.title + ' ' + it.content).toLowerCase().includes(kw),\r\n      );\r\n    }\r\n\r\n    const ViewComp = (ViewComponents as any)[mod.view];\r\n    if (!ViewComp) {\r\n      return (\r\n        <ModulePanel module={mod}>\r\n          <div>未知视图: {mod.view}</div>\r\n        </ModulePanel>\r\n      );\r\n    }\r\n    const viewProps: any = { ...(mod.props || {}) };\r\n    if (mod.group) viewProps.groupField = mod.group;\r\n    if (mod.fields) viewProps.fields = mod.fields;\r\n\r\n    return (\r\n      <ModulePanel module={mod}>\r\n        <ViewComp items={items} {...viewProps} />\r\n      </ModulePanel>\r\n    );\r\n  };\r\n\r\n  /* ---------- 配置保存 ---------- */\r\n  const saveConfig = () => {\r\n    if (!tempConfig) return;\r\n    const oldName = config.name;\r\n    const newName = tempConfig.name.trim();\r\n    if (newName === '') {\r\n      new Notice('名称不能为空');\r\n      return;\r\n    }\r\n    if (newName !== oldName && plugin.dashboards.some(d => d !== config && d.name === newName)) {\r\n      new Notice('配置名称已存在，请更换名称');\r\n      return;\r\n    }\r\n\r\n    config.name         = newName;\r\n    config.path         = tempConfig.path || '';\r\n    config.tags         = tempConfig.tags || [];\r\n    config.initialView  = tempConfig.initialView || '月';\r\n    config.initialDate  = tempConfig.initialDate || moment().format('YYYY-MM-DD');\r\n    config.modules      = tempConfig.modules;\r\n\r\n    if (newName !== oldName) {\r\n      plugin.activeDashboards.forEach(e => {\r\n        if (e.configName === oldName) e.configName = newName;\r\n      });\r\n    }\r\n\r\n    // ⚠️ 这里也要把 inputSettings 一并存回，最保险的做法是调用 persistAll（如果有）\r\n    const saved = (plugin as any).persistAll\r\n      ? (plugin as any).persistAll()\r\n      : plugin.saveData({ dashboards: plugin.dashboards, inputSettings: (plugin as any).inputSettings });\r\n\r\n    Promise.resolve(saved).then(() => {\r\n      new Notice('仪表盘配置已保存');\r\n      plugin.refreshAllDashboards();\r\n    });\r\n    setShowConfig(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {/* 顶部工具栏 */}\r\n      <div class=\"tp-toolbar\" style=\"margin-bottom:8px;\">\r\n        {['年', '季', '月', '周', '天'].map(v => (\r\n          <button\r\n            onClick={() => setCurrentView(v)}\r\n            class={v === currentView ? 'active' : ''}\r\n          >\r\n            {v}\r\n          </button>\r\n        ))}\r\n        <button disabled style=\"font-weight:bold;margin:0 4px;background:#fff;cursor:default;\">\r\n          {formattedDate(currentDate, currentView)}\r\n        </button>\r\n        <button onClick={prevPeriod}>←</button>\r\n        <button onClick={nextPeriod}>→</button>\r\n        <button onClick={resetToday}>＝</button>\r\n        <input\r\n          placeholder=\"快速过滤…\"\r\n          style=\"margin-left:4px;\"\r\n          value={keyword}\r\n          onInput={e => setKeyword((e.target as HTMLInputElement).value)}\r\n        />\r\n        <button onClick={() => setShowConfig(!showConfig)} style=\"margin-left:4px;\">⚙︎</button>\r\n      </div>\r\n\r\n      {/* 配置面板（原样保留） */}\r\n      {showConfig && tempConfig && (\r\n        <div\r\n          style=\"border:1px solid #eee;padding:12px;margin-bottom:12px;border-radius:8px;background:#fcfcfc;\"\r\n        >\r\n          <h3 style=\"margin-top:0;\">编辑配置</h3>\r\n          <fieldset style=\"margin-bottom:10px;\">\r\n            <legend>基础设置</legend>\r\n            <label>\r\n              配置名称:\r\n              <input\r\n                type=\"text\"\r\n                value={tempConfig.name}\r\n                onInput={e =>\r\n                  setTempConfig({ ...tempConfig, name: (e.target as HTMLInputElement).value })\r\n                }\r\n              />\r\n            </label>\r\n            <br />\r\n            <label>\r\n              数据源路径:\r\n              <input\r\n                type=\"text\"\r\n                value={tempConfig.path || ''}\r\n                onInput={e =>\r\n                  setTempConfig({ ...tempConfig, path: (e.target as HTMLInputElement).value })\r\n                }\r\n              />\r\n            </label>\r\n            <br />\r\n            <label>\r\n              标签(逗号分隔):\r\n              <input\r\n                type=\"text\"\r\n                value={Array.isArray(tempConfig.tags) ? tempConfig.tags.join(',') : (tempConfig.tags || '')}\r\n                onInput={e => {\r\n                  const val = (e.target as HTMLInputElement).value;\r\n                  const tags = val.split(/[,，]/).map(t => t.trim()).filter(Boolean);\r\n                  setTempConfig({ ...tempConfig, tags });\r\n                }}\r\n              />\r\n            </label>\r\n            <br />\r\n            <label>\r\n              初始视图:\r\n              <select\r\n                value={tempConfig.initialView || '月'}\r\n                onChange={e =>\r\n                  setTempConfig({\r\n                    ...tempConfig,\r\n                    initialView: (e.target as HTMLSelectElement).value,\r\n                  })\r\n                }\r\n              >\r\n                {['年', '季', '月', '周', '天'].map(v => (\r\n                  <option value={v}>{v}</option>\r\n                ))}\r\n              </select>\r\n            </label>\r\n            <br />\r\n            <label>\r\n              初始日期:\r\n              <input\r\n                type=\"date\"\r\n                value={tempConfig.initialDate || moment().format('YYYY-MM-DD')}\r\n                onChange={e =>\r\n                  setTempConfig({\r\n                    ...tempConfig,\r\n                    initialDate: (e.target as HTMLInputElement).value,\r\n                  })\r\n                }\r\n              />\r\n            </label>\r\n            <br />\r\n          </fieldset>\r\n\r\n          <div id=\"modulesArea\">\r\n            {tempConfig.modules.map((mod, idx) => (\r\n              <fieldset style=\"border:1px solid #ccc;padding:8px;margin-bottom:8px;\">\r\n                <legend>\r\n                  {mod.title || '模块'} ({mod.view})\r\n                </legend>\r\n                <div>\r\n                  <label>\r\n                    模块标题:\r\n                    <input\r\n                      type=\"text\"\r\n                      value={mod.title}\r\n                      onInput={e => {\r\n                        const arr = [...tempConfig.modules];\r\n                        arr[idx] = { ...mod, title: (e.target as HTMLInputElement).value };\r\n                        setTempConfig({ ...tempConfig, modules: arr });\r\n                      }}\r\n                    />\r\n                  </label>\r\n                </div>\r\n                <div>\r\n                  <label>\r\n                    视图类型:\r\n                    <select\r\n                      value={mod.view}\r\n                      onChange={e => {\r\n                        const arr = [...tempConfig.modules];\r\n                        arr[idx] = { ...mod, view: (e.target as HTMLSelectElement).value as any };\r\n                        setTempConfig({ ...tempConfig, modules: arr });\r\n                      }}\r\n                    >\r\n                      {Object.keys(ViewComponents).map(v => (\r\n                        <option value={v}>{v}</option>\r\n                      ))}\r\n                    </select>\r\n                  </label>\r\n                </div>\r\n                <div>\r\n                  <label>\r\n                    默认折叠:\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      checked={!!mod.collapsed}\r\n                      onChange={e => {\r\n                        const arr = [...tempConfig.modules];\r\n                        arr[idx] = { ...mod, collapsed: (e.target as HTMLInputElement).checked };\r\n                        setTempConfig({ ...tempConfig, modules: arr });\r\n                      }}\r\n                    />\r\n                  </label>\r\n                </div>\r\n\r\n                {mod.view === 'TableView' && (\r\n                  <div>\r\n                    <label>\r\n                      行字段:\r\n                      <input\r\n                        type=\"text\"\r\n                        value={mod.props?.rowField || ''}\r\n                        onInput={e => {\r\n                          const arr = [...tempConfig.modules];\r\n                          arr[idx] = {\r\n                            ...mod,\r\n                            props: { ...mod.props, rowField: (e.target as HTMLInputElement).value },\r\n                          };\r\n                          setTempConfig({ ...tempConfig, modules: arr });\r\n                        }}\r\n                      />\r\n                    </label>\r\n                    <br />\r\n                    <label>\r\n                      列字段:\r\n                      <input\r\n                        type=\"text\"\r\n                        value={mod.props?.colField || ''}\r\n                        onInput={e => {\r\n                          const arr = [...tempConfig.modules];\r\n                          arr[idx] = {\r\n                            ...mod,\r\n                            props: { ...mod.props, colField: (e.target as HTMLInputElement).value },\r\n                          };\r\n                          setTempConfig({ ...tempConfig, modules: arr });\r\n                        }}\r\n                      />\r\n                    </label>\r\n                  </div>\r\n                )}\r\n\r\n                {(mod.view === 'BlockView' || mod.view === 'TimelineView') && (\r\n                  <div>\r\n                    <label>\r\n                      分组字段:\r\n                      <input\r\n                        type=\"text\"\r\n                        value={mod.group || ''}\r\n                        onInput={e => {\r\n                          const arr = [...tempConfig.modules];\r\n                          arr[idx] = { ...mod, group: (e.target as HTMLInputElement).value || undefined };\r\n                          setTempConfig({ ...tempConfig, modules: arr });\r\n                        }}\r\n                      />\r\n                    </label>\r\n                  </div>\r\n                )}\r\n\r\n                {mod.view !== 'TableView' &&\r\n                  mod.view !== 'ChartView' &&\r\n                  mod.view !== 'CalendarView' && (\r\n                    <div>\r\n                      <label>\r\n                        显示字段(逗号分隔 / * 为动态):\r\n                        <input\r\n                          type=\"text\"\r\n                          placeholder=\"如 title,tags,date 或 *\"\r\n                          value={mod.fields ? mod.fields.join(',') : ''}\r\n                          onInput={e => {\r\n                            const val = (e.target as HTMLInputElement).value;\r\n                            const arrFields =\r\n                              val.trim() === '*'\r\n                                ? ['*']\r\n                                : val.split(/[,，]/).map(f => f.trim()).filter(Boolean);\r\n                            const arr = [...tempConfig.modules];\r\n                            arr[idx] = { ...mod, fields: arrFields.length ? arrFields : undefined };\r\n                            setTempConfig({ ...tempConfig, modules: arr });\r\n                          }}\r\n                        />\r\n                      </label>\r\n                    </div>\r\n                  )}\r\n\r\n                {/* 过滤规则 */}\r\n                <div style=\"border-top:1px dashed #ccc;margin-top:6px;padding-top:6px;\">\r\n                  <strong>过滤规则</strong>\r\n                  {(mod.filters || []).map((rule, ridx) => (\r\n                    <div style=\"display:flex;margin-bottom:4px;\">\r\n                      <input\r\n                        type=\"text\"\r\n                        style=\"flex:0 0 30%;\"\r\n                        value={rule.field}\r\n                        onInput={e => {\r\n                          const nf = (e.target as HTMLInputElement).value;\r\n                          const nfils = [...(mod.filters || [])];\r\n                          nfils[ridx] = { ...rule, field: nf };\r\n                          const arr = [...tempConfig.modules];\r\n                          arr[idx] = { ...mod, filters: nfils };\r\n                          setTempConfig({ ...tempConfig, modules: arr });\r\n                        }}\r\n                      />\r\n                      <select\r\n                        value={rule.op}\r\n                        onChange={e => {\r\n                          const op = (e.target as HTMLSelectElement).value as typeof rule.op;\r\n                          const nfils = [...(mod.filters || [])];\r\n                          nfils[ridx] = { ...rule, op };\r\n                          const arr = [...tempConfig.modules];\r\n                          arr[idx] = { ...mod, filters: nfils };\r\n                          setTempConfig({ ...tempConfig, modules: arr });\r\n                        }}\r\n                      >\r\n                        {['=', '!=', 'includes', 'regex', '>', '<'].map(op => (\r\n                          <option value={op}>{op}</option>\r\n                        ))}\r\n                      </select>\r\n                      <input\r\n                        type=\"text\"\r\n                        style=\"flex:0 0 30%;\"\r\n                        value={String(rule.value)}\r\n                        onInput={e => {\r\n                          const nv = (e.target as HTMLInputElement).value;\r\n                          const nfils = [...(mod.filters || [])];\r\n                          nfils[ridx] = { ...rule, value: nv };\r\n                          const arr = [...tempConfig.modules];\r\n                          arr[idx] = { ...mod, filters: nfils };\r\n                          setTempConfig({ ...tempConfig, modules: arr });\r\n                        }}\r\n                      />\r\n                      <button\r\n                        onClick={() => {\r\n                          const nfils = [...(mod.filters || [])];\r\n                          nfils.splice(ridx, 1);\r\n                          const arr = [...tempConfig.modules];\r\n                          arr[idx] = { ...mod, filters: nfils };\r\n                          setTempConfig({ ...tempConfig, modules: arr });\r\n                        }}\r\n                      >\r\n                        删除\r\n                      </button>\r\n                    </div>\r\n                  ))}\r\n                  <button\r\n                    onClick={() => {\r\n                      const nfils = [...(mod.filters || []), { field: '', op: '=', value: '' }];\r\n                      const arr = [...tempConfig.modules];\r\n                      arr[idx] = { ...mod, filters: nfils };\r\n                      setTempConfig({ ...tempConfig, modules: arr });\r\n                    }}\r\n                  >\r\n                    + 添加过滤条件\r\n                  </button>\r\n                </div>\r\n\r\n                {/* 排序规则 */}\r\n                <div style=\"border-top:1px dashed #ccc;margin-top:6px;padding-top:6px;\">\r\n                  <strong>排序规则</strong>\r\n                  {(mod.sort || []).map((rule, ridx) => (\r\n                    <div style=\"display:flex;margin-bottom:4px;\">\r\n                      <input\r\n                        type=\"text\"\r\n                        style=\"flex:0 0 40%;\"\r\n                        value={rule.field}\r\n                        onInput={e => {\r\n                          const nf = (e.target as HTMLInputElement).value;\r\n                          const ns = [...(mod.sort || [])];\r\n                          ns[ridx] = { ...rule, field: nf };\r\n                          const arr = [...tempConfig.modules];\r\n                          arr[idx] = { ...mod, sort: ns };\r\n                          setTempConfig({ ...tempConfig, modules: arr });\r\n                        }}\r\n                      />\r\n                      <select\r\n                        value={rule.dir}\r\n                        onChange={e => {\r\n                          const d = (e.target as HTMLSelectElement).value as typeof rule.dir;\r\n                          const ns = [...(mod.sort || [])];\r\n                          ns[ridx] = { ...rule, dir: d };\r\n                          const arr = [...tempConfig.modules];\r\n                          arr[idx] = { ...mod, sort: ns };\r\n                          setTempConfig({ ...tempConfig, modules: arr });\r\n                        }}\r\n                      >\r\n                        <option value=\"asc\">升序</option>\r\n                        <option value=\"desc\">降序</option>\r\n                      </select>\r\n                      <button\r\n                        style=\"margin-left:4px;\"\r\n                        onClick={() => {\r\n                          const ns = [...(mod.sort || [])];\r\n                          ns.splice(ridx, 1);\r\n                          const arr = [...tempConfig.modules];\r\n                          arr[idx] = { ...mod, sort: ns };\r\n                          setTempConfig({ ...tempConfig, modules: arr });\r\n                        }}\r\n                      >\r\n                        删除\r\n                      </button>\r\n                    </div>\r\n                  ))}\r\n                  <button\r\n                    onClick={() => {\r\n                      const ns = [...(mod.sort || []), { field: '', dir: 'asc' }];\r\n                      const arr = [...tempConfig.modules];\r\n                      arr[idx] = { ...mod, sort: ns };\r\n                      setTempConfig({ ...tempConfig, modules: arr });\r\n                    }}\r\n                  >\r\n                    + 添加排序条件\r\n                  </button>\r\n                </div>\r\n\r\n                <div style=\"text-align:right;\">\r\n                  {idx > 0 && (\r\n                    <button\r\n                      onClick={() => {\r\n                        const arr = [...tempConfig.modules];\r\n                        [arr[idx - 1], arr[idx]] = [arr[idx], arr[idx - 1]];\r\n                        setTempConfig({ ...tempConfig, modules: arr });\r\n                      }}\r\n                    >\r\n                      ↑ 上移\r\n                    </button>\r\n                  )}\r\n                  {idx < tempConfig.modules.length - 1 && (\r\n                    <button\r\n                      onClick={() => {\r\n                        const arr = [...tempConfig.modules];\r\n                        [arr[idx], arr[idx + 1]] = [arr[idx + 1], arr[idx]];\r\n                        setTempConfig({ ...tempConfig, modules: arr });\r\n                      }}\r\n                    >\r\n                      ↓ 下移\r\n                    </button>\r\n                  )}\r\n                  <button\r\n                    onClick={() => {\r\n                      const arr = [...tempConfig.modules];\r\n                      arr.splice(idx, 1);\r\n                      setTempConfig({ ...tempConfig, modules: arr });\r\n                    }}\r\n                  >\r\n                    删除模块\r\n                  </button>\r\n                </div>\r\n              </fieldset>\r\n            ))}\r\n            <div>\r\n              <select value={newViewType} onChange={e => setNewViewType((e.target as HTMLSelectElement).value)}>\r\n                {Object.keys(ViewComponents).map(v => (\r\n                  <option value={v}>{v}</option>\r\n                ))}\r\n              </select>\r\n              <button\r\n                style=\"margin-left:6px;\"\r\n                onClick={() => {\r\n                  const mod: ModuleConfig = {\r\n                    view: newViewType as any,\r\n                    title: '新模块',\r\n                    collapsed: false,\r\n                    filters: [],\r\n                    sort: [],\r\n                    props: {},\r\n                  };\r\n                  setTempConfig({ ...tempConfig!, modules: [...tempConfig!.modules, mod] });\r\n                }}\r\n              >\r\n                添加模块\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          <hr />\r\n          <button onClick={saveConfig}>保存配置</button>\r\n          <button style=\"margin-left:8px;\" onClick={() => setShowConfig(false)}>\r\n            取消\r\n          </button>\r\n\r\n          <datalist id=\"fields-list\">\r\n            {getAllFields(dataStore.query()).map(f => (\r\n              <option value={f} />\r\n            ))}\r\n          </datalist>\r\n        </div>\r\n      )}\r\n\r\n      {!showConfig && config.modules.map(mod => renderModule(mod))}\r\n    </div>\r\n  );\r\n}","// main.ts\r\n// 插件主入口（整合事件节流、 DataStore  拆分后的调用方式保持兼容）\r\nimport { Plugin, TFile } from 'obsidian';\r\nimport { render, h } from 'preact';\r\nimport { DataStore } from './data/store';\r\nimport { DashboardConfig } from './config/schema';\r\nimport { SettingsTab } from './ui/SettingsTab';\r\nimport { Dashboard } from './views/Dashboard';\r\nimport { CODEBLOCK_LANG, STYLE_TAG_ID, GLOBAL_CSS } from './config/constants';\r\n\r\nexport interface PersistData {\r\n  dashboards: DashboardConfig[];\r\n  /** 新增：所有输入配置统一放到这里 */\r\n  inputSettings?: Record<string, any>;\r\n}\r\n\r\nexport default class ThinkPlugin extends Plugin {\r\n  public dataStore!: DataStore;\r\n  public dashboards: DashboardConfig[] = [];\r\n  public activeDashboards: Array<{ container: HTMLElement; configName: string }> = [];\r\n\r\n  /** ☆ 新增：对外暴露的统一配置对象 */\r\n  public inputSettings: Record<string, any> = {};\r\n\r\n  async onload() {\r\n    console.log('ThinkPlugin 加载 - 重构版');\r\n\r\n    const saved = (await this.loadData()) as PersistData | undefined;\r\n\r\n    if (saved?.dashboards) this.dashboards = saved.dashboards;\r\n    if (this.dashboards.length === 0) this._createDefaultDashboard();\r\n\r\n    // ☆ 读取持久化的 inputSettings，没有则给空对象\r\n    this.inputSettings = saved?.inputSettings ?? {};\r\n\r\n    // 向后兼容: ListView → BlockView\r\n    for (const dash of this.dashboards) {\r\n      for (const mod of dash.modules) {\r\n        if ((mod.view as any) === 'ListView') mod.view = 'BlockView';\r\n      }\r\n    }\r\n\r\n    this.dataStore = new DataStore(this.app);\r\n    await this.dataStore.scanAll();\r\n\r\n    // 监听 vault 变化（节流在 DataStore 内做）\r\n    const onVault = this.app.vault.on.bind(this.app.vault);\r\n    const rescan = (f: TFile) => this.dataStore.scanFile(f).then(() => this.dataStore.notifyChange());\r\n\r\n    this.registerEvent(onVault('modify', (f) => {\r\n      if (f instanceof TFile && f.extension === 'md') rescan(f);\r\n    }));\r\n    this.registerEvent(onVault('create', (f) => {\r\n      if (f instanceof TFile && f.extension === 'md') rescan(f);\r\n    }));\r\n    this.registerEvent(onVault('delete', (f) => {\r\n      if (f instanceof TFile && f.extension === 'md') {\r\n        this.dataStore.removeFileItems(f.path);\r\n        this.dataStore.notifyChange();\r\n      }\r\n    }));\r\n    this.registerEvent(onVault('rename', (f, old) => {\r\n      if (f instanceof TFile && f.extension === 'md') {\r\n        this.dataStore.removeFileItems(old);\r\n        rescan(f);\r\n      }\r\n    }));\r\n\r\n    /**\r\n     * codeblock 处理器\r\n     * - 支持严格 JSON（不允许注释/尾逗号）\r\n     * - 支持两种模式：\r\n     *   1) 引用已持久化的 dashboard：{\"config\":\"默认仪表盘\"}\r\n     *   2) 直接内联 modules：{\"modules\":[{...}]}\r\n     */\r\n    this.registerMarkdownCodeBlockProcessor(CODEBLOCK_LANG, (source, el) => {\r\n      let configName: string | undefined;\r\n      let inlineDash: DashboardConfig | undefined;\r\n\r\n      try {\r\n        const input = source.trim() ? JSON.parse(source) : {};\r\n\r\n        if (Array.isArray(input.modules)) {\r\n          // ② 内联配置模式\r\n          inlineDash = {\r\n            name: input.name || '__inline__',\r\n            path: input.path || '',\r\n            tags: input.tags || [],\r\n            initialView: input.initialView || '月',\r\n            initialDate: input.initialDate || '',\r\n            modules: input.modules,\r\n          };\r\n        } else {\r\n          // ① 引用持久化的 dashboard\r\n          configName = input.config || input.dashboard || input.name;\r\n        }\r\n      } catch (e) {\r\n        console.warn('ThinkPlugin: 仪表盘代码块 JSON 解析失败，使用默认', e);\r\n      }\r\n\r\n      // 内联 dash：直接渲染\r\n      if (inlineDash) {\r\n        render(h(Dashboard, { config: inlineDash, dataStore: this.dataStore, plugin: this }), el);\r\n        this.activeDashboards.push({ container: el, configName: inlineDash.name });\r\n        return;\r\n      }\r\n\r\n      // 否则走持久化 dash\r\n      if (!configName && this.dashboards.length) configName = this.dashboards[0].name;\r\n      const dash = this.dashboards.find(d => d.name === configName);\r\n      if (!dash) {\r\n        el.createDiv({ text: `找不到名称为 \"${configName}\" 的仪表盘配置` });\r\n        return;\r\n      }\r\n      render(h(Dashboard, { config: dash, dataStore: this.dataStore, plugin: this }), el);\r\n      this.activeDashboards.push({ container: el, configName: dash.name });\r\n    });\r\n\r\n    this._injectStyles();\r\n    this.addSettingTab(new SettingsTab(this.app, this));\r\n  }\r\n\r\n  onunload() {\r\n    const styleEl = document.getElementById(STYLE_TAG_ID);\r\n    if (styleEl) styleEl.remove();\r\n    console.log('ThinkPlugin 卸载');\r\n  }\r\n\r\n  public refreshAllDashboards() {\r\n    this.activeDashboards = this.activeDashboards.filter(d => document.body.contains(d.container));\r\n    for (const entry of this.activeDashboards) {\r\n      const dash = this.dashboards.find(cfg => cfg.name === entry.configName);\r\n      if (!dash) continue;\r\n      render(h(Dashboard, { config: dash, dataStore: this.dataStore, plugin: this }), entry.container);\r\n    }\r\n  }\r\n\r\n  /** ☆ 统一的持久化入口 */\r\n  public async persistAll() {\r\n    const payload: PersistData = {\r\n      dashboards: this.dashboards,\r\n      inputSettings: this.inputSettings,\r\n    };\r\n    await this.saveData(payload);\r\n  }\r\n\r\n  private _createDefaultDashboard() {\r\n    const now = new Date();\r\n    const today = `${now.getFullYear()}-${String(now.getMonth() + 1).padStart(2, '0')}-${String(\r\n      now.getDate()\r\n    ).padStart(2, '0')}`;\r\n    const defaultDash: DashboardConfig = {\r\n      name: '默认仪表盘',\r\n      path: '',\r\n      tags: [],\r\n      initialView: '月',\r\n      initialDate: today,\r\n      modules: [\r\n        {\r\n          view: 'BlockView',\r\n          title: '未完成任务',\r\n          collapsed: false,\r\n          filters: [\r\n            { field: 'type', op: '=', value: 'task' },\r\n            { field: 'status', op: '=', value: 'open' },\r\n          ],\r\n          sort: [],\r\n          props: {},\r\n        },\r\n        {\r\n          view: 'BlockView',\r\n          title: '已完成任务',\r\n          collapsed: true,\r\n          filters: [\r\n            { field: 'type', op: '=', value: 'task' },\r\n            { field: 'status', op: '=', value: 'done' },\r\n          ],\r\n          sort: [{ field: 'date', dir: 'desc' }],\r\n          props: {},\r\n        },\r\n      ],\r\n    };\r\n    this.dashboards.push(defaultDash);\r\n  }\r\n\r\n  private _injectStyles() {\r\n    if (document.getElementById(STYLE_TAG_ID)) return;\r\n    const style = document.createElement('style');\r\n    style.id = STYLE_TAG_ID;\r\n    style.textContent = GLOBAL_CSS;\r\n    document.head.appendChild(style);\r\n  }\r\n}"],"names":["n","l","u","i","r","o","e","f","c","s","a","p","v","y","w","d","g","_","t","m","k","x","S","C","M","$","O","z","I","h","P","q","A","L","B","T","j","F","b","H","D","N","V","E","CORE_FIELDS","getAllFields","items","set","it","readField","item","field","key","DATE_YMD","DATE_YMD_RE","TAG_RE","KV_IN_PAREN","RE_TASK_PREFIX","RE_DONE_BOX","RE_CANCEL_BOX","normalizeDateStr","dateStr","CODEBLOCK_LANG","EMOJI","EMPTY_LABEL","STYLE_TAG_ID","GLOBAL_CSS","cleanTaskText","text","result","main","pickPriority","line","parseTaskLine","filePath","rawLine","lineNo","parentFolder","lineText","status","tags","recurrence","recMatch","extra","value","lowerKey","num","parsed","pickDate","emoji","mt","doneDate","cancelledDate","dueDate","scheduledDate","startDate","createdDate","priority","icon","afterPrefix","iconMatch","titleSrc","parseBlockContent","lines","startIdx","endIdx","contentLines","title","category","date","themeValue","contentText","contentStarted","iconVal","kv","lower","throttle","fn","wait","last","timer","args","now","DataStore","app","files","file","fileItems","headingsList","nextHeadingIndex","currentSectionTags","currentHeader","headingText","headingTags","cleanText","tag","blockItem","name","taskItem","err","path","filters","sortRules","results","rule","aVal","bVal","aStr","bStr","itemId","parts","TFile","moment","today","nowTime","completedLine","match","pre","content","generateNextRecurringTaskText","rawTask","nextLine","interval","unit","whenDone","nextDateStr","due","scheduled","start","nextTaskLine","listener","fieldVal","cmpVal","isEqual","regex","itemNum","cmpNum","itemTime","cmpTime","makeObsUri","hashIndex","TableView","rowField","colField","jsx","rowValues","colValues","matrix","rv","cv","rKey","cKey","jsxs","col","row","cellItems","renderItemCell","isDone","checkboxId","evt","CATEGORY_COLOR_MAP","getCategoryColor","BlockView","props","groupField","showMeta","fields","filteredItems","val","grouped","groupKeys","renderCheckbox","renderBlockItem","hasTitle","hasContent","metaFields","metaPills","topLine","titleNode","bottomLine","rowElems","checkboxRendered","idx","el","grp","TimelineView","CalendarView","ChartView","toText","ExcelView","cols","SettingsFormView","storageKey","plugin","init","form","setForm","useState","change","save","VIEW_REGISTRY","ViewComponents","VIEW_OPTIONS","SettingsTab","PluginSettingTab","containerEl","allItems","fieldOptions","tagSet","categorySet","statusSet","recurrenceSet","typeSet","tagsList","opt","categoryList","statusList","recurrenceList","typeList","fieldsList","selectDash","dash","btnAdd","baseName","newName","count","newDash","Notice","btnDel","baseFieldset","Setting","tagStr","drop","todayStr","initialDateStr","mod","modFieldset","dd","cb","fieldStr","fieldsArr","filterDiv","ridx","rowDiv","fieldInput","opSelect","op","valueInput","updateValueDatalist","delBtn","addFilterBtn","sortDiv","dirSelect","label","addSortBtn","actionsDiv","upBtn","mods","downBtn","newModDiv","newSelect","addModBtn","newModule","saveBtn","ModulePanel","module","children","collapsed","setCollapsed","rootRef","useRef","toggleCollapsed","onHeaderClick","want","ev","useEffect","handler","QUARTER_TEXT","Dashboard","config","dataStore","initialView","initialDateMoment","currentView","setCurrentView","currentDate","setCurrentDate","showConfig","setShowConfig","tempConfig","setTempConfig","newViewType","setNewViewType","dataVersion","setDataVersion","keyword","setKeyword","onData","cfg","getDateRange","viewType","formattedDate","prevPeriod","nextPeriod","resetToday","renderModule","ViewComp","target","af","TFolder","prefix","endDate","kw","viewProps","saveConfig","oldName","saved","arr","arrFields","nf","nfils","nv","ns","ThinkPlugin","Plugin","onVault","rescan","old","source","configName","inlineDash","input","render","styleEl","entry","payload","defaultDash","style"],"mappings":"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","x_google_ignoreList":[0,8,17]}