{"version":3,"file":"main.js","sources":["../src/platform/obsidian.ts","../src/core/domain/schema.ts","../src/core/utils/regex.ts","../node_modules/dayjs/dayjs.min.js","../node_modules/dayjs/plugin/quarterOfYear.js","../node_modules/dayjs/plugin/weekOfYear.js","../node_modules/dayjs/plugin/customParseFormat.js","../src/core/utils/date.ts","../src/core/domain/constants.ts","../src/core/utils/text.ts","../src/core/utils/parser.ts","../src/core/utils/timing.ts","../src/core/utils/mark.ts","../src/core/services/taskService.ts","../src/core/services/dataStore.ts","../src/core/VaultWatcher.ts","../node_modules/preact/dist/preact.module.js","../node_modules/preact/jsx-runtime/dist/jsxRuntime.module.js","../node_modules/preact/hooks/dist/hooks.module.js","../src/features/dashboard/ui/ModulePanel.tsx","../src/core/utils/obsidian.ts","../src/shared/components/TaskCheckbox.tsx","../src/features/dashboard/ui/TableView.tsx","../src/core/domain/categoryColorMap.ts","../src/features/dashboard/ui/BlockView.tsx","../src/features/dashboard/ui/ExcelView.tsx","../src/features/dashboard/ui/index.ts","../src/core/utils/itemFilter.ts","../src/features/dashboard/ui/Dashboard.tsx","../src/core/CodeblockEmbedder.ts","../src/features/dashboard/index.ts","../src/core/utils/templates.ts","../src/core/services/inputService.ts","../src/shared/components/FieldRadio.tsx","../src/features/quick-input/ui/QuickTaskModal.tsx","../src/features/quick-input/ui/QuickBlockModal.tsx","../src/features/quick-input/ui/QuickHabitModal.tsx","../src/features/quick-input/logic/registerCommands.ts","../src/features/quick-input/index.ts","../src/main.ts"],"sourcesContent":["// src/platform/obsidian.ts\r\nimport type { App, TFile, TAbstractFile } from 'obsidian';\r\n\r\n/**\r\n * 对 Obsidian API 的最薄包装。\r\n * 先只暴露本插件真正用到的 4‑5 个方法，后面再补也没问题。\r\n */\r\nexport class ObsidianPlatform {\r\n  constructor(public readonly app: App) {}\r\n\r\n  /* 下面这些方法名字随便改，只要核心层能用就行 ------------------------ */\r\n\r\n  /** 读取文件全文 */\r\n  async readFile(file: TFile): Promise<string> {\r\n    return this.app.vault.read(file);\r\n  }\r\n\r\n  getMarkdownFiles(): TFile[] {\r\n  return this.app.vault.getMarkdownFiles();\r\n}\r\n\r\n  /** 修改文件全文 */\r\n  async writeFile(file: TFile, content: string) {\r\n    return this.app.vault.modify(file, content);\r\n  }\r\n\r\n  /** 根据路径拿到 File/Folder */\r\n  getByPath(path: string): TAbstractFile | null {\r\n    return this.app.vault.getAbstractFileByPath(path) ?? null;\r\n  }\r\n\r\n  /** 创建新文件（如已存在则返回原文件） */\r\n  async ensureFile(path: string, initial = ''): Promise<TFile> {\r\n    const af = this.getByPath(path);\r\n    if (af instanceof TFile) return af;\r\n    return this.app.vault.create(path, initial);\r\n  }\r\n\r\n  /** 监听 Vault 事件 —— 直接把原始 on 代理出去即可 */\r\n  onVault(event: string, cb: (...a: any[]) => any) {\r\n    return this.app.vault.on(event as any, cb as any);\r\n  }\r\n}","import type { ViewName } from '@features/dashboard/ui';\r\n\r\n/* ---------- 数据项 ---------- */\r\nexport interface Item {\r\n  id      : string;\r\n  title   : string;\r\n  content : string;\r\n  type    : 'task' | 'block';\r\n  status? : string;\r\n  category: string;\r\n  tags    : string[];\r\n  recurrence : string;\r\n\r\n  /* timeline unified */\r\n  startISO?: string;  endISO?: string;\r\n  startMs? : number;  endMs? : number;\r\n\r\n  created : number;\r\n  modified: number;\r\n  extra   : Record<string,string|number|boolean>;\r\n\r\n  header?   : string;\r\n  icon?     : string;\r\n  priority? : 'lowest'|'low'|'medium'|'high'|'highest';\r\n\r\n  /* legacy / compatibility */\r\n  date?          : string;\r\n  createdDate?   : string;\r\n  scheduledDate? : string;\r\n  startDate?     : string;\r\n  dueDate?       : string;\r\n  doneDate?      : string;\r\n  cancelledDate? : string;\r\n  filename?      : string;\r\n}\r\n\r\n/* ---------- 仪表盘模块配置 ---------- */\r\nexport interface ModuleConfig {\r\n  view     : ViewName;\r\n  title    : string;\r\n  collapsed?: boolean;\r\n  filters? : FilterRule[];\r\n  sort?    : SortRule[];\r\n  group?   : string;\r\n  rowField?: string;\r\n  colField?: string;\r\n  props?   : Record<string,any>;\r\n  fields?  : string[];\r\n}\r\n\r\nexport interface FilterRule {\r\n  field: string;\r\n  op   : '=' | '!=' | 'includes' | 'regex' | '>' | '<';\r\n  value: any;\r\n}\r\nexport interface SortRule {\r\n  field: string;\r\n  dir  : 'asc' | 'desc';\r\n}\r\n\r\nexport interface DashboardConfig {\r\n  name       : string;\r\n  path?      : string;\r\n  tags?      : string[];\r\n  initialView?: string;\r\n  initialDate?: string;\r\n  modules    : ModuleConfig[];\r\n}\r\n\r\nexport const CORE_FIELDS = [\r\n  'id','title','content','type','status','category','tags','recurrence',\r\n  'startISO','endISO','startMs','endMs','header','icon','priority',\r\n  'createdDate','scheduledDate','startDate','dueDate','doneDate','cancelledDate',\r\n  'created','modified','filename',\r\n] as const;\r\nexport type CoreField = typeof CORE_FIELDS[number];\r\n\r\nexport function getAllFields(items: Item[]): string[] {\r\n  const set = new Set<string>(CORE_FIELDS as unknown as string[]);\r\n  items.forEach(it => Object.keys(it.extra || {}).forEach(k => set.add('extra.' + k)));\r\n  return Array.from(set);\r\n}\r\nexport function readField(item: Item, field: string): any {\r\n  return field.startsWith('extra.') ? item.extra?.[field.slice(6)] : (item as any)[field];\r\n}","// utils/regex.ts\r\nexport const DATE_YMD = '\\\\d{4}[-/]\\\\d{2}[-/]\\\\d{2}';\r\nexport const DATE_YMD_RE = new RegExp(DATE_YMD);\r\n\r\nexport const TAG_RE = /#([\\p{L}\\p{N}_\\/-]+)/gu;\r\nexport const KV_IN_PAREN = /\\(([^:：]+)::\\s*([^)]+)\\)/g;\r\nexport const META_BRACKET = /\\([^:：]+::\\s*[^)]+\\)/g;\r\n\r\nexport const RE_TASK_PREFIX = /^\\s*-\\s*\\[[ xX-]\\]/;\r\nexport const RE_DONE_BOX    = /^\\s*-\\s*\\[x\\]/i;\r\nexport const RE_CANCEL_BOX  = /^\\s*-\\s*\\[-\\]/;\r\nexport const RE_EMPTY_BOX   = /^\\s*-\\s*\\[ \\]/;","!function(t,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define(e):(t=\"undefined\"!=typeof globalThis?globalThis:t||self).dayjs=e()}(this,(function(){\"use strict\";var t=1e3,e=6e4,n=36e5,r=\"millisecond\",i=\"second\",s=\"minute\",u=\"hour\",a=\"day\",o=\"week\",c=\"month\",f=\"quarter\",h=\"year\",d=\"date\",l=\"Invalid Date\",$=/^(\\d{4})[-/]?(\\d{1,2})?[-/]?(\\d{0,2})[Tt\\s]*(\\d{1,2})?:?(\\d{1,2})?:?(\\d{1,2})?[.:]?(\\d+)?$/,y=/\\[([^\\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,M={name:\"en\",weekdays:\"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday\".split(\"_\"),months:\"January_February_March_April_May_June_July_August_September_October_November_December\".split(\"_\"),ordinal:function(t){var e=[\"th\",\"st\",\"nd\",\"rd\"],n=t%100;return\"[\"+t+(e[(n-20)%10]||e[n]||e[0])+\"]\"}},m=function(t,e,n){var r=String(t);return!r||r.length>=e?t:\"\"+Array(e+1-r.length).join(n)+t},v={s:m,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),i=n%60;return(e<=0?\"+\":\"-\")+m(r,2,\"0\")+\":\"+m(i,2,\"0\")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var r=12*(n.year()-e.year())+(n.month()-e.month()),i=e.clone().add(r,c),s=n-i<0,u=e.clone().add(r+(s?-1:1),c);return+(-(r+(n-i)/(s?i-u:u-i))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:c,y:h,w:o,d:a,D:d,h:u,m:s,s:i,ms:r,Q:f}[t]||String(t||\"\").toLowerCase().replace(/s$/,\"\")},u:function(t){return void 0===t}},g=\"en\",D={};D[g]=M;var p=\"$isDayjsObject\",S=function(t){return t instanceof _||!(!t||!t[p])},w=function t(e,n,r){var i;if(!e)return g;if(\"string\"==typeof e){var s=e.toLowerCase();D[s]&&(i=s),n&&(D[s]=n,i=s);var u=e.split(\"-\");if(!i&&u.length>1)return t(u[0])}else{var a=e.name;D[a]=e,i=a}return!r&&i&&(g=i),i||!r&&g},O=function(t,e){if(S(t))return t.clone();var n=\"object\"==typeof e?e:{};return n.date=t,n.args=arguments,new _(n)},b=v;b.l=w,b.i=S,b.w=function(t,e){return O(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var _=function(){function M(t){this.$L=w(t.locale,null,!0),this.parse(t),this.$x=this.$x||t.x||{},this[p]=!0}var m=M.prototype;return m.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(b.u(e))return new Date;if(e instanceof Date)return new Date(e);if(\"string\"==typeof e&&!/Z$/i.test(e)){var r=e.match($);if(r){var i=r[2]-1||0,s=(r[7]||\"0\").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)}}return new Date(e)}(t),this.init()},m.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},m.$utils=function(){return b},m.isValid=function(){return!(this.$d.toString()===l)},m.isSame=function(t,e){var n=O(t);return this.startOf(e)<=n&&n<=this.endOf(e)},m.isAfter=function(t,e){return O(t)<this.startOf(e)},m.isBefore=function(t,e){return this.endOf(e)<O(t)},m.$g=function(t,e,n){return b.u(t)?this[e]:this.set(n,t)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(t,e){var n=this,r=!!b.u(e)||e,f=b.p(t),l=function(t,e){var i=b.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return r?i:i.endOf(a)},$=function(t,e){return b.w(n.toDate()[t].apply(n.toDate(\"s\"),(r?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},y=this.$W,M=this.$M,m=this.$D,v=\"set\"+(this.$u?\"UTC\":\"\");switch(f){case h:return r?l(1,0):l(31,11);case c:return r?l(1,M):l(0,M+1);case o:var g=this.$locale().weekStart||0,D=(y<g?y+7:y)-g;return l(r?m-D:m+(6-D),M);case a:case d:return $(v+\"Hours\",0);case u:return $(v+\"Minutes\",1);case s:return $(v+\"Seconds\",2);case i:return $(v+\"Milliseconds\",3);default:return this.clone()}},m.endOf=function(t){return this.startOf(t,!1)},m.$set=function(t,e){var n,o=b.p(t),f=\"set\"+(this.$u?\"UTC\":\"\"),l=(n={},n[a]=f+\"Date\",n[d]=f+\"Date\",n[c]=f+\"Month\",n[h]=f+\"FullYear\",n[u]=f+\"Hours\",n[s]=f+\"Minutes\",n[i]=f+\"Seconds\",n[r]=f+\"Milliseconds\",n)[o],$=o===a?this.$D+(e-this.$W):e;if(o===c||o===h){var y=this.clone().set(d,1);y.$d[l]($),y.init(),this.$d=y.set(d,Math.min(this.$D,y.daysInMonth())).$d}else l&&this.$d[l]($);return this.init(),this},m.set=function(t,e){return this.clone().$set(t,e)},m.get=function(t){return this[b.p(t)]()},m.add=function(r,f){var d,l=this;r=Number(r);var $=b.p(f),y=function(t){var e=O(l);return b.w(e.date(e.date()+Math.round(t*r)),l)};if($===c)return this.set(c,this.$M+r);if($===h)return this.set(h,this.$y+r);if($===a)return y(1);if($===o)return y(7);var M=(d={},d[s]=e,d[u]=n,d[i]=t,d)[$]||1,m=this.$d.getTime()+r*M;return b.w(m,this)},m.subtract=function(t,e){return this.add(-1*t,e)},m.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return n.invalidDate||l;var r=t||\"YYYY-MM-DDTHH:mm:ssZ\",i=b.z(this),s=this.$H,u=this.$m,a=this.$M,o=n.weekdays,c=n.months,f=n.meridiem,h=function(t,n,i,s){return t&&(t[n]||t(e,r))||i[n].slice(0,s)},d=function(t){return b.s(s%12||12,t,\"0\")},$=f||function(t,e,n){var r=t<12?\"AM\":\"PM\";return n?r.toLowerCase():r};return r.replace(y,(function(t,r){return r||function(t){switch(t){case\"YY\":return String(e.$y).slice(-2);case\"YYYY\":return b.s(e.$y,4,\"0\");case\"M\":return a+1;case\"MM\":return b.s(a+1,2,\"0\");case\"MMM\":return h(n.monthsShort,a,c,3);case\"MMMM\":return h(c,a);case\"D\":return e.$D;case\"DD\":return b.s(e.$D,2,\"0\");case\"d\":return String(e.$W);case\"dd\":return h(n.weekdaysMin,e.$W,o,2);case\"ddd\":return h(n.weekdaysShort,e.$W,o,3);case\"dddd\":return o[e.$W];case\"H\":return String(s);case\"HH\":return b.s(s,2,\"0\");case\"h\":return d(1);case\"hh\":return d(2);case\"a\":return $(s,u,!0);case\"A\":return $(s,u,!1);case\"m\":return String(u);case\"mm\":return b.s(u,2,\"0\");case\"s\":return String(e.$s);case\"ss\":return b.s(e.$s,2,\"0\");case\"SSS\":return b.s(e.$ms,3,\"0\");case\"Z\":return i}return null}(t)||i.replace(\":\",\"\")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(r,d,l){var $,y=this,M=b.p(d),m=O(r),v=(m.utcOffset()-this.utcOffset())*e,g=this-m,D=function(){return b.m(y,m)};switch(M){case h:$=D()/12;break;case c:$=D();break;case f:$=D()/3;break;case o:$=(g-v)/6048e5;break;case a:$=(g-v)/864e5;break;case u:$=g/n;break;case s:$=g/e;break;case i:$=g/t;break;default:$=g}return l?$:b.a($)},m.daysInMonth=function(){return this.endOf(c).$D},m.$locale=function(){return D[this.$L]},m.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=w(t,e,!0);return r&&(n.$L=r),n},m.clone=function(){return b.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},M}(),k=_.prototype;return O.prototype=k,[[\"$ms\",r],[\"$s\",i],[\"$m\",s],[\"$H\",u],[\"$W\",a],[\"$M\",c],[\"$y\",h],[\"$D\",d]].forEach((function(t){k[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),O.extend=function(t,e){return t.$i||(t(e,_,O),t.$i=!0),O},O.locale=w,O.isDayjs=S,O.unix=function(t){return O(1e3*t)},O.en=D[g],O.Ls=D,O.p={},O}));","!function(t,n){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=n():\"function\"==typeof define&&define.amd?define(n):(t=\"undefined\"!=typeof globalThis?globalThis:t||self).dayjs_plugin_quarterOfYear=n()}(this,(function(){\"use strict\";var t=\"month\",n=\"quarter\";return function(e,i){var r=i.prototype;r.quarter=function(t){return this.$utils().u(t)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(t-1))};var s=r.add;r.add=function(e,i){return e=Number(e),this.$utils().p(i)===n?this.add(3*e,t):s.bind(this)(e,i)};var u=r.startOf;r.startOf=function(e,i){var r=this.$utils(),s=!!r.u(i)||i;if(r.p(e)===n){var o=this.quarter()-1;return s?this.month(3*o).startOf(t).startOf(\"day\"):this.month(3*o+2).endOf(t).endOf(\"day\")}return u.bind(this)(e,i)}}}));","!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(t):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_plugin_weekOfYear=t()}(this,(function(){\"use strict\";var e=\"week\",t=\"year\";return function(i,n,r){var f=n.prototype;f.week=function(i){if(void 0===i&&(i=null),null!==i)return this.add(7*(i-this.week()),\"day\");var n=this.$locale().yearStart||1;if(11===this.month()&&this.date()>25){var f=r(this).startOf(t).add(1,t).date(n),s=r(this).endOf(e);if(f.isBefore(s))return 1}var a=r(this).startOf(t).date(n).startOf(e).subtract(1,\"millisecond\"),o=this.diff(a,e,!0);return o<0?r(this).startOf(\"week\").week():Math.ceil(o)},f.weeks=function(e){return void 0===e&&(e=null),this.week(e)}}}));","!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(t):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_plugin_customParseFormat=t()}(this,(function(){\"use strict\";var e={LTS:\"h:mm:ss A\",LT:\"h:mm A\",L:\"MM/DD/YYYY\",LL:\"MMMM D, YYYY\",LLL:\"MMMM D, YYYY h:mm A\",LLLL:\"dddd, MMMM D, YYYY h:mm A\"},t=/(\\[[^[]*\\])|([-_:/.,()\\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,n=/\\d/,r=/\\d\\d/,i=/\\d\\d?/,o=/\\d*[^-_:/,()\\s\\d]+/,s={},a=function(e){return(e=+e)+(e>68?1900:2e3)};var f=function(e){return function(t){this[e]=+t}},h=[/[+-]\\d\\d:?(\\d\\d)?|Z/,function(e){(this.zone||(this.zone={})).offset=function(e){if(!e)return 0;if(\"Z\"===e)return 0;var t=e.match(/([+-]|\\d\\d)/g),n=60*t[1]+(+t[2]||0);return 0===n?0:\"+\"===t[0]?-n:n}(e)}],u=function(e){var t=s[e];return t&&(t.indexOf?t:t.s.concat(t.f))},d=function(e,t){var n,r=s.meridiem;if(r){for(var i=1;i<=24;i+=1)if(e.indexOf(r(i,0,t))>-1){n=i>12;break}}else n=e===(t?\"pm\":\"PM\");return n},c={A:[o,function(e){this.afternoon=d(e,!1)}],a:[o,function(e){this.afternoon=d(e,!0)}],Q:[n,function(e){this.month=3*(e-1)+1}],S:[n,function(e){this.milliseconds=100*+e}],SS:[r,function(e){this.milliseconds=10*+e}],SSS:[/\\d{3}/,function(e){this.milliseconds=+e}],s:[i,f(\"seconds\")],ss:[i,f(\"seconds\")],m:[i,f(\"minutes\")],mm:[i,f(\"minutes\")],H:[i,f(\"hours\")],h:[i,f(\"hours\")],HH:[i,f(\"hours\")],hh:[i,f(\"hours\")],D:[i,f(\"day\")],DD:[r,f(\"day\")],Do:[o,function(e){var t=s.ordinal,n=e.match(/\\d+/);if(this.day=n[0],t)for(var r=1;r<=31;r+=1)t(r).replace(/\\[|\\]/g,\"\")===e&&(this.day=r)}],w:[i,f(\"week\")],ww:[r,f(\"week\")],M:[i,f(\"month\")],MM:[r,f(\"month\")],MMM:[o,function(e){var t=u(\"months\"),n=(u(\"monthsShort\")||t.map((function(e){return e.slice(0,3)}))).indexOf(e)+1;if(n<1)throw new Error;this.month=n%12||n}],MMMM:[o,function(e){var t=u(\"months\").indexOf(e)+1;if(t<1)throw new Error;this.month=t%12||t}],Y:[/[+-]?\\d+/,f(\"year\")],YY:[r,function(e){this.year=a(e)}],YYYY:[/\\d{4}/,f(\"year\")],Z:h,ZZ:h};function l(n){var r,i;r=n,i=s&&s.formats;for(var o=(n=r.replace(/(\\[[^\\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(t,n,r){var o=r&&r.toUpperCase();return n||i[r]||e[r]||i[o].replace(/(\\[[^\\]]+])|(MMMM|MM|DD|dddd)/g,(function(e,t,n){return t||n.slice(1)}))}))).match(t),a=o.length,f=0;f<a;f+=1){var h=o[f],u=c[h],d=u&&u[0],l=u&&u[1];o[f]=l?{regex:d,parser:l}:h.replace(/^\\[|\\]$/g,\"\")}return function(e){for(var t={},n=0,r=0;n<a;n+=1){var i=o[n];if(\"string\"==typeof i)r+=i.length;else{var s=i.regex,f=i.parser,h=e.slice(r),u=s.exec(h)[0];f.call(t,u),e=e.replace(u,\"\")}}return function(e){var t=e.afternoon;if(void 0!==t){var n=e.hours;t?n<12&&(e.hours+=12):12===n&&(e.hours=0),delete e.afternoon}}(t),t}}return function(e,t,n){n.p.customParseFormat=!0,e&&e.parseTwoDigitYear&&(a=e.parseTwoDigitYear);var r=t.prototype,i=r.parse;r.parse=function(e){var t=e.date,r=e.utc,o=e.args;this.$u=r;var a=o[1];if(\"string\"==typeof a){var f=!0===o[2],h=!0===o[3],u=f||h,d=o[2];h&&(d=o[2]),s=this.$locale(),!f&&d&&(s=n.Ls[d]),this.$d=function(e,t,n,r){try{if([\"x\",\"X\"].indexOf(t)>-1)return new Date((\"X\"===t?1e3:1)*e);var i=l(t)(e),o=i.year,s=i.month,a=i.day,f=i.hours,h=i.minutes,u=i.seconds,d=i.milliseconds,c=i.zone,m=i.week,M=new Date,Y=a||(o||s?1:M.getDate()),p=o||M.getFullYear(),v=0;o&&!s||(v=s>0?s-1:M.getMonth());var D,w=f||0,g=h||0,y=u||0,L=d||0;return c?new Date(Date.UTC(p,v,Y,w,g,y,L+60*c.offset*1e3)):n?new Date(Date.UTC(p,v,Y,w,g,y,L)):(D=new Date(p,v,Y,w,g,y,L),m&&(D=r(D).week(m).toDate()),D)}catch(e){return new Date(\"\")}}(t,a,r,n),this.init(),d&&!0!==d&&(this.$L=this.locale(d).$L),u&&t!=this.format(a)&&(this.$d=new Date(\"\")),s={}}else if(a instanceof Array)for(var c=a.length,m=1;m<=c;m+=1){o[1]=a[m-1];var M=n.apply(this,o);if(M.isValid()){this.$d=M.$d,this.$L=M.$L,this.init();break}m===c&&(this.$d=new Date(\"\"))}else i.call(this,e)}}}));","/**\r\n * 统一使用 dayjs，彻底移除 moment‑shim         (#5)\r\n * 提供 todayISO / nowHHMM 等常用工具函数\r\n */\r\nimport dayjs from 'dayjs';\r\nimport quarterOfYear from 'dayjs/plugin/quarterOfYear';\r\nimport weekOfYear    from 'dayjs/plugin/weekOfYear';\r\nimport customParse   from 'dayjs/plugin/customParseFormat';\r\n\r\ndayjs.extend(quarterOfYear);\r\ndayjs.extend(weekOfYear);\r\ndayjs.extend(customParse);\r\n\r\nexport { dayjs };\r\n\r\n/* ---------- 快捷工具 ---------- */\r\nexport const todayISO = () => dayjs().format('YYYY-MM-DD');\r\nexport const nowHHMM  = () => dayjs().format('HH:mm');\r\n\r\n/* ---------- normalize ---------- */\r\nexport function normalizeDateStr(raw: string) {\r\n  const s = (raw || '').replace(/\\//g, '-');\r\n  const d = dayjs(s, ['YYYY-MM-DD', 'YYYY-M-D', 'YYYY/MM/DD', 'YYYY/M/D'], true);\r\n  return d.isValid() ? d.format('YYYY-MM-DD') : s;\r\n}\r\n\r\n/* ---------- extractDate ---------- */\r\nexport const DATE_FMT = '(\\\\d{4}[-/]\\\\d{2}[-/]\\\\d{2})';\r\nexport function extractDate(line: string, em: string | string[]): string | undefined {\r\n  const list = Array.isArray(em) ? em : [em];\r\n  for (const e of list) {\r\n    const m = line.match(new RegExp(`${e}\\\\s*${DATE_FMT}`));\r\n    if (m) return normalizeDateStr(m[1]);\r\n  }\r\n  return undefined;\r\n}\r\n\r\n/* ---------- 起止区间 ---------- */\r\nexport function getDateRange(d: dayjs.Dayjs, view: string) {\r\n  switch (view) {\r\n    case '年': return { startDate: d.startOf('year'),    endDate: d.endOf('year') };\r\n    case '季': return { startDate: d.startOf('quarter'), endDate: d.endOf('quarter') };\r\n    case '月': return { startDate: d.startOf('month'),   endDate: d.endOf('month') };\r\n    case '周': return { startDate: d.startOf('week'),    endDate: d.endOf('week') };\r\n    default : return { startDate: d.startOf('day'),      endDate: d.endOf('day') };\r\n  }\r\n}\r\n","// config/constants.ts\r\nexport const CODEBLOCK_LANG = 'think';\r\n\r\nexport const OPS = ['=', '!=', 'includes', 'regex', '>', '<'] as const;\r\n\r\nexport const EMOJI = {\r\n  done: '✅',\r\n  cancelled: '❌',\r\n  due: '📅',\r\n  scheduled: '⏳',\r\n  start: '🛫',\r\n  created: '➕',\r\n  repeat: '🔁',\r\n  prio: {\r\n    highest: '🔺',\r\n    high: '⏫',\r\n    medium: '🔼',\r\n    low: '🔽',\r\n    lowest: '⏬',\r\n  },\r\n} as const;\r\n\r\nexport const EMPTY_LABEL = '无日期';\r\n\r\nexport const STYLE_TAG_ID = 'think-dashboard-style';\r\n\r\n// 将默认注入样式集中在此，便于替换/关闭\r\nexport const GLOBAL_CSS = `\r\n.think-table{width:100%;border:1px solid #ccc;border-collapse:collapse;}\r\n.think-table th,.think-table td{border:1px solid #ccc;padding:4px;}\r\n.think-table th{background:#f0f0f0;text-align:center;}\r\n.think-table td{text-align:left;}\r\n.think-table td.empty{background:#f9f9f9;}\r\n.tag-pill{background:#e0e0e0;border-radius:4px;padding:0 6px;margin-right:6px;font-size:90%;display:inline-block;}\r\n.task-done{text-decoration:line-through;color:gray;}\r\n.module-header{display:flex;align-items:center;padding:4px 8px;background:#eee;cursor:pointer;}\r\n.module-title{flex:1;font-weight:bold;}\r\n.module-toggle{margin-left:4px;}\r\n.module-content{padding:6px 8px;}\r\n.think-module a{color:black;text-decoration:none;}\r\n`.trim();","// utils/text.ts\r\n// 统一的任务标题清理工具，在 parser / 其它场景复用\r\nexport function cleanTaskText(text: string): string {\r\n  // 1. 去掉 \"- [ ]\" / \"- [x]\" 前缀\r\n  let result = text.replace(/^\\s*-\\s*\\[[ xX-]\\]\\s*/, '').trim();\r\n\r\n  // 2. 去掉所有行内 #tag\r\n  result = result.replace(/#[\\p{L}\\p{N}_-]+/gu, '');\r\n\r\n  // 3. 拆分 (  或空格，取第一个非空片段\r\n  let main = result.split(/[\\s(]/).find(s => s && s.trim());\r\n\r\n  // 4. 去掉最前面的 emoji\r\n  main = main?.replace(/^\\p{Extended_Pictographic}\\uFE0F?/u, '').trim();\r\n\r\n  return main ? main.trim() : '';\r\n}","// src/data/parser.ts\r\nimport { Item } from '@core/domain/schema';\r\nimport {\r\n  TAG_RE, KV_IN_PAREN, DATE_YMD_RE, RE_TASK_PREFIX,\r\n  RE_DONE_BOX, RE_CANCEL_BOX\r\n} from '@core/utils/regex';\r\nimport { normalizeDateStr, extractDate } from '@core/utils/date';\r\nimport { EMOJI } from '@core/domain/constants';\r\nimport { cleanTaskText } from '@core/utils/text';\r\n\r\n/* ---------- 工具 ---------- */\r\nfunction pick(line: string, emoji: string) { return extractDate(line, emoji); }\r\n\r\n/* ---------- 优先级 ---------- */\r\nfunction pickPriority(line: string): Item['priority'] | undefined {\r\n  if (line.includes('🔺')) return 'highest';\r\n  if (line.includes('⏫')) return 'high';\r\n  if (line.includes('🔼')) return 'medium';\r\n  if (line.includes('🔽')) return 'low';\r\n  if (line.includes('⏬')) return 'lowest';\r\n  return undefined;\r\n}\r\n\r\n/** 解析任务行 */\r\nexport function parseTaskLine(\r\n  filePath: string, rawLine: string, lineNo: number, parentFolder: string\r\n): Item | null {\r\n  const lineText = rawLine;\r\n  if (!RE_TASK_PREFIX.test(lineText)) return null;\r\n\r\n  /* ---- 状态 ---- */\r\n  let status: Item['status'] = 'open';\r\n  if (RE_DONE_BOX.test(lineText)) status = 'done';\r\n  else if (RE_CANCEL_BOX.test(lineText)) status = 'cancelled';\r\n\r\n  /* ---- 标签 ---- */\r\n  const tagMatches = lineText.match(TAG_RE) || [];\r\n  const tags = tagMatches.map(t => t.replace('#', ''));\r\n\r\n  /* ---- 重复性 ---- */\r\n  let recurrence = 'none';\r\n  const recMatch = lineText.match(/🔁\\s*([^\\n📅⏳🛫➕✅❌]*)/);\r\n  if (recMatch && recMatch[1]) recurrence = recMatch[1].trim();\r\n\r\n  /* ---- 括号 meta ---- */\r\n  const extra: Record<string, string | number | boolean> = {};\r\n  let m: RegExpExecArray | null;\r\n  while ((m = KV_IN_PAREN.exec(lineText)) !== null) {\r\n    const key = m[1].trim();\r\n    const value = m[2].trim();\r\n    const lowerKey = key.toLowerCase();\r\n    if (['主题', '标签', 'tag', 'tags'].includes(lowerKey)) {\r\n      value.split(/[,，]/).forEach(v => {\r\n        const t = v.trim().replace(/^#/, '');\r\n        if (t) tags.push(t);\r\n      });\r\n    } else {\r\n      const num = Number(value);\r\n      let parsed: any = value;\r\n      if (value !== '' && !isNaN(num))      parsed = num;\r\n      else if (/^(true|false)$/i.test(value)) parsed = value.toLowerCase() === 'true';\r\n      extra[key] = parsed;\r\n    }\r\n  }\r\n\r\n  /* ---- 日期 ---- */\r\n  const doneDate      = pick(lineText, EMOJI.done);\r\n  const cancelledDate = pick(lineText, EMOJI.cancelled);\r\n  const dueDate       = pick(lineText, EMOJI.due);\r\n  const scheduledDate = pick(lineText, EMOJI.scheduled);\r\n  const startDate     = pick(lineText, EMOJI.start);\r\n  const createdDate   = pick(lineText, EMOJI.created);\r\n\r\n  const priority = pickPriority(lineText);\r\n\r\n  /* ---- 图标与标题 ---- */\r\n  let icon: string | undefined;\r\n  const afterPrefix = lineText.replace(RE_TASK_PREFIX, '').trim();\r\n  const iconMatch = afterPrefix.match(/^(\\p{Extended_Pictographic}\\uFE0F?)/u);\r\n  let titleSrc = afterPrefix;\r\n  if (iconMatch) {\r\n    icon = iconMatch[1];\r\n    titleSrc = titleSrc.replace(/^(?:\\p{Extended_Pictographic}\\uFE0F?\\s*)+/u, '');\r\n  }\r\n  titleSrc = cleanTaskText(titleSrc);\r\n\r\n  /* ---- Item ---- */\r\n  const item: Item = {\r\n    id: `${filePath}#${lineNo}`,\r\n    title: titleSrc || '',\r\n    content: lineText.trim(),\r\n    type: 'task',\r\n    status,\r\n    category: '任务',\r\n    tags: Array.from(new Set(tags)),\r\n    recurrence,\r\n    created: 0,\r\n    modified: 0,\r\n    extra,\r\n  };\r\n\r\n  /* dates */\r\n  if (icon) item.icon = icon;\r\n  if (priority) item.priority = priority;\r\n\r\n  if (createdDate)   item.createdDate = createdDate;\r\n  if (scheduledDate) item.scheduledDate = scheduledDate;\r\n  if (startDate)     item.startDate = startDate;\r\n  if (dueDate)       item.dueDate = dueDate;\r\n  if (doneDate)      item.doneDate = doneDate;\r\n  if (cancelledDate) item.cancelledDate = cancelledDate;\r\n\r\n  /* 统一 Start / End for timeline */\r\n  item.startISO = startDate || scheduledDate || dueDate || createdDate;\r\n  item.endISO   = doneDate || cancelledDate || dueDate;\r\n  if (!item.startISO && item.status === 'open') item.startISO = item.date = item.dueDate || item.scheduledDate || item.startDate || item.createdDate;\r\n  if (!item.endISO)   item.endISO   = item.startISO;\r\n\r\n  if (item.startISO) item.startMs = Date.parse(item.startISO);\r\n  if (item.endISO)   item.endMs   = Date.parse(item.endISO);\r\n\r\n  /* default date (back‑compat) */\r\n  if (status === 'done')       item.date = doneDate;\r\n  else if (status === 'cancelled') item.date = cancelledDate;\r\n\r\n  return item;\r\n}\r\n\r\n/** 解析块内容 */\r\nexport function parseBlockContent(\r\n  filePath: string, lines: string[], startIdx: number, endIdx: number, parentFolder: string\r\n): Item | null {\r\n  const contentLines = lines.slice(startIdx + 1, endIdx);\r\n  let title = '';\r\n  let category: string | null = null;\r\n  let status: string | undefined;\r\n  let date: string | undefined;\r\n  const tags: string[] = [];\r\n  const extra: Record<string, string | number | boolean> = {};\r\n  let themeValue: string | null = null;\r\n  let contentText = '';\r\n  let contentStarted = false;\r\n  let iconVal: string | null = null;\r\n\r\n  for (let i = 0; i < contentLines.length; i++) {\r\n    const rawLine = contentLines[i];\r\n    const line = rawLine.trim();\r\n    if (!contentStarted) {\r\n      if (line === '') continue;\r\n      const kv = line.match(/^([^:：]{1,20})::\\s*(.*)$/);\r\n      if (kv) {\r\n        const key = kv[1].trim();\r\n        const value = kv[2] || '';\r\n        const lower = key.toLowerCase();\r\n        if (['分类', '类别', 'category'].includes(lower))       category = value.trim();\r\n        else if (['主题', '标签', 'tag', 'tags'].includes(lower)) themeValue = value.trim();\r\n        else if (['状态', 'status'].includes(lower))            status = value.trim();\r\n        else if (['日期', 'date'].includes(lower))              date = normalizeDateStr(value.trim());\r\n        else if (['内容', 'content'].includes(lower)) {\r\n          contentStarted = true; contentText = value;\r\n        } else if (['图标', 'icon'].includes(lower)) {\r\n          iconVal = value.trim(); extra['图标'] = iconVal;\r\n        } else {\r\n          const num = Number(value.trim());\r\n          let parsed: any = value.trim();\r\n          if (parsed !== '' && !isNaN(num)) parsed = num;\r\n          else if (/^(true|false)$/i.test(parsed)) parsed = parsed.toLowerCase() === 'true';\r\n          extra[key] = parsed;\r\n        }\r\n      } else { contentStarted = true; contentText = rawLine; }\r\n    } else { contentText += (contentText ? '\\n' : '') + rawLine; }\r\n  }\r\n\r\n  if (themeValue) {\r\n    themeValue.split(/[,，]/).map(p => p.trim()).filter(Boolean)\r\n      .forEach(t => tags.push(t.replace(/^#/, '')));\r\n  }\r\n\r\n  if (contentText.trim() !== '')      title = contentText.trim().split(/\\r?\\n/)[0];\r\n  else if (themeValue)                title = themeValue.split(/[,，]/).map(p => p.trim()).filter(Boolean).join(', ');\r\n  title = title.replace(/^(?:\\p{Extended_Pictographic}\\uFE0F?\\s*)+/u, '').trim();\r\n  if (title) title = title.slice(0, 10);\r\n\r\n  if (!category) category = parentFolder || '';\r\n\r\n  const item: Item = {\r\n    id: `${filePath}#${startIdx + 1}`,\r\n    title: title || '',\r\n    content: contentText.trim(),\r\n    type: 'block',\r\n    status,\r\n    category,\r\n    tags: Array.from(new Set(tags)),\r\n    recurrence: 'none',\r\n    created: 0,\r\n    modified: 0,\r\n    extra,\r\n  };\r\n  if (iconVal) item.icon = iconVal;\r\n\r\n  /* timeline fields */\r\n  item.startISO = date;\r\n  item.endISO   = date;\r\n  if (item.startISO) item.startMs = Date.parse(item.startISO);\r\n  if (item.endISO)   item.endMs   = item.startMs;\r\n\r\n  item.date = date;\r\n  return item;\r\n}","// utils/timing.ts\r\nexport function throttle<T extends (...args: any[]) => void>(\r\n  fn: T,\r\n  wait = 250\r\n): T {\r\n  let last = 0, timer: any = null;\r\n  return function (...args: Parameters<T>) {\r\n    const now = Date.now();\r\n    if (now - last >= wait) {\r\n      last = now;\r\n      fn.apply(this, args);\r\n    } else {\r\n      clearTimeout(timer);\r\n      timer = setTimeout(() => {\r\n        last = Date.now();\r\n        fn.apply(this, args);\r\n      }, wait - (now - last));\r\n    }\r\n  } as T;\r\n}","// 任务状态切换与周期任务工具函数\r\nimport { EMOJI } from '@core/domain/constants';\r\nimport { DATE_YMD_RE } from '@core/utils/regex';\r\nimport { normalizeDateStr } from '@core/utils/date';\r\nimport { dayjs } from '@core/utils/date';                               // (#5)\r\n\r\n/* ---------- 周期任务工具类型 ---------- */\r\nexport interface RecurrenceInfo {\r\n  interval: number;\r\n  unit: 'day' | 'week' | 'month' | 'year';\r\n  whenDone: boolean;\r\n}\r\n\r\n/* ---------- 单行任务完成 ---------- */\r\nexport function toggleToDone(\r\n  rawLine: string,\r\n  todayISO: string,\r\n  nowTime: string,\r\n): string {\r\n  let line = rawLine;\r\n\r\n  // 确保 (时长::x) 在括号里，同时插入时间 (时间::hh:mm)\r\n  line = line.replace(/(\\s|^)(时长::[^\\s()]+)/g, (m, pre) =>\r\n    m.includes('(') ? m : `${pre}(${m.trim()})`,\r\n  );\r\n\r\n  if (/\\(时长::[^\\)]+\\)/.test(line)) {\r\n    line = line.replace(/\\((时长::[^\\)]+)\\)/, `(时间::${nowTime}) ($1)`);\r\n  } else if (/时长::[^\\s]+/.test(line)) {\r\n    line = line.replace(/(时长::[^\\s]+)/, `(时间::${nowTime}) ($1)`);\r\n  } else if (line.includes(EMOJI.repeat)) {\r\n    line = line.replace(EMOJI.repeat, `(时间::${nowTime}) ${EMOJI.repeat}`);\r\n  } else {\r\n    line = `${line} (时间::${nowTime})`;\r\n  }\r\n\r\n  // 方框 → [x]，若原行缺失前缀则补全\r\n  line = line.replace(/^(\\s*-\\s*)\\[[ xX-]\\]/, '$1[x]');\r\n  if (!/^-\\s*\\[x\\]/.test(line)) {\r\n    line = `- [x] ${line.replace(/^-\\s*\\[.\\]/, '').replace(/^-\\s*/, '')}`;\r\n  }\r\n\r\n  // 清理旧 ✓ 日期并写入新的\r\n  line = line.replace(\r\n    new RegExp(`\\\\s*${EMOJI.done}\\\\s*${DATE_YMD_RE.source}$`),\r\n    '',\r\n  );\r\n  return `${line.trim()} ${EMOJI.done} ${todayISO}`;\r\n}\r\n\r\n/* ---------- 周期任务 ---------- */\r\nexport function parseRecurrence(rawTask: string): RecurrenceInfo | null {\r\n  const m = rawTask.match(\r\n    /🔁\\s*every\\s+(\\d+)?\\s*(day|week|month|year)s?\\s*(when done)?/i,\r\n  );\r\n  if (!m) return null;\r\n  const interval = m[1] ? parseInt(m[1], 10) : 1;\r\n  const unit = m[2].toLowerCase() as RecurrenceInfo['unit'];\r\n  const whenDone = Boolean(m[3]);\r\n  return { interval, unit, whenDone };\r\n}\r\n\r\nexport function findBaseDateForRecurring(\r\n  rawTask: string,\r\n  whenDone: boolean,\r\n  todayISO: string,\r\n): string {\r\n  if (whenDone) return todayISO;\r\n\r\n  const pick = (emoji: string) => {\r\n    const r = new RegExp(`${emoji}\\\\s*(${DATE_YMD_RE.source})`);\r\n    const mt = rawTask.match(r);\r\n    return mt ? normalizeDateStr(mt[1]) : null;\r\n  };\r\n  return (\r\n    pick(EMOJI.due) ||\r\n    pick(EMOJI.scheduled) ||\r\n    pick(EMOJI.start) ||\r\n    todayISO\r\n  );\r\n}\r\n\r\nexport function generateNextRecurringTask(\r\n  rawTask: string,\r\n  baseDateISO: string,\r\n): string {\r\n  let next = rawTask\r\n    .replace(/^(\\s*-\\s*)\\[[ xX-]\\]/, '$1[ ]') // 复原为待办\r\n    .replace(new RegExp(`\\\\s*${EMOJI.done}\\\\s*${DATE_YMD_RE.source}`), '')\r\n    .replace(/\\(时间::\\d{2}:\\d{2}\\)/, '');\r\n\r\n  const rec = parseRecurrence(rawTask);\r\n  if (!rec) return next.trim();\r\n\r\n  const base = dayjs(baseDateISO, ['YYYY-MM-DD', 'YYYY/MM/DD']);\r\n  const nextDate = base.add(rec.interval, rec.unit);\r\n  const nextStr = nextDate.format('YYYY-MM-DD');\r\n\r\n  const replaceIf = (emoji: string) => {\r\n    const re = new RegExp(`${emoji}\\\\s*${DATE_YMD_RE.source}`);\r\n    if (re.test(next)) next = next.replace(re, `${emoji} ${nextStr}`);\r\n  };\r\n  replaceIf(EMOJI.due);\r\n  replaceIf(EMOJI.scheduled);\r\n  replaceIf(EMOJI.start);\r\n\r\n  return next.trim();\r\n}\r\n\r\n/* ---------- 一次性完成标记 + 生成下一条 ---------- */\r\nexport function markTaskDone(\r\n  rawLine: string,\r\n  todayISO: string,\r\n  nowTime: string,\r\n): { completedLine: string; nextTaskLine?: string } {\r\n  const completedLine = toggleToDone(rawLine, todayISO, nowTime);\r\n  const rec = parseRecurrence(rawLine);\r\n  if (!rec) return { completedLine };\r\n\r\n  const baseISO = findBaseDateForRecurring(rawLine, rec.whenDone, todayISO);\r\n  const nextTaskLine = generateNextRecurringTask(rawLine, baseISO);\r\n  return { completedLine, nextTaskLine };\r\n}\r\n","// taskService.ts —— 处理「勾选任务」的业务服务\r\nimport { DataStore } from './dataStore';\r\nimport { markTaskDone } from '@core/utils/mark';\r\nimport type { TFile } from 'obsidian';\r\nimport { dayjs } from '@core/utils/date';\r\n\r\nexport class TaskService {\r\n  static async completeTask(itemId: string): Promise<void> {\r\n    const ds = DataStore.instance;\r\n    if (!ds) throw new Error('DataStore not ready');\r\n\r\n    const [filePath, lineStr] = itemId.split('#');\r\n    const lineNo = Number(lineStr);\r\n    const file = ds.platform.app.vault.getAbstractFileByPath(\r\n      filePath,\r\n    );\r\n    if (!(file instanceof (ds.platform.app.vault as any).constructor.TFile))\r\n      return;\r\n\r\n    const content = await ds.platform.readFile(file as TFile);\r\n    const lines = content.split(/\\r?\\n/);\r\n    if (lineNo < 1 || lineNo > lines.length) return;\r\n\r\n    const rawLine = lines[lineNo - 1];\r\n    if (!/^\\s*-\\s*\\[ \\]/.test(rawLine)) return;\r\n\r\n    const todayISO = dayjs().format('YYYY-MM-DD');\r\n    const nowTime = dayjs().format('HH:mm');\r\n    const { completedLine, nextTaskLine } = markTaskDone(\r\n      rawLine,\r\n      todayISO,\r\n      nowTime,\r\n    );\r\n\r\n    lines[lineNo - 1] = completedLine;\r\n    if (nextTaskLine) lines.splice(lineNo, 0, nextTaskLine);\r\n\r\n    await ds.platform.writeFile(file as TFile, lines.join('\\n'));\r\n    await ds.scanFile(file as TFile);\r\n    ds.notifyChange();\r\n  }\r\n}\r\n","// dataStore.ts —— 与 Vault 交互的核心数据层\r\nimport { HeadingCache, TFile, TFolder } from 'obsidian';\r\nimport {\r\n  Item,\r\n  FilterRule,\r\n  SortRule,\r\n  readField,\r\n} from '@core/domain/schema';\r\nimport {\r\n  parseTaskLine,\r\n  parseBlockContent,\r\n} from '@core/utils/parser';\r\nimport { throttle } from '@core/utils/timing';\r\nimport { TaskService } from '@core/services/taskService';\r\nimport {\r\n  ObsidianPlatform,\r\n  TAbstractFile,\r\n} from '@platform/obsidian';\r\n\r\nexport class DataStore {\r\n  /* ---------------- 单例 ---------------- */\r\n  static instance: DataStore;\r\n\r\n  /* ---------------- 构造 ---------------- */\r\n  private platform: ObsidianPlatform;\r\n  /** 兼容旧代码：临时暴露 app，让旧逻辑继续工作 */\r\n  get app() {\r\n    return this.platform.app;\r\n  }\r\n\r\n  constructor(platform: ObsidianPlatform) {\r\n    this.platform = platform;\r\n    DataStore.instance = this;\r\n  }\r\n\r\n  /* ---------------- 私有数据 ---------------- */\r\n  private items: Item[] = [];\r\n  private fileIndex: Map<string, Item[]> = new Map();\r\n  private changeListeners: Set<() => void> = new Set();\r\n\r\n  /* ====================================================================== */\r\n  /*                                扫描                                    */\r\n  /* ====================================================================== */\r\n\r\n  /** 首次扫描全库 */\r\n  async scanAll() {\r\n    this.items = [];\r\n    this.fileIndex.clear();\r\n    const files = this.platform.getMarkdownFiles();\r\n    for (const file of files) await this.scanFile(file);\r\n  }\r\n\r\n  /** 向后兼容旧 API 名 */\r\n  async initialScan() {\r\n    return this.scanAll();\r\n  }\r\n\r\n  /** 扫描单文件并更新缓存 */\r\n  async scanFile(file: TFile): Promise<Item[]> {\r\n    try {\r\n      const content = await this.platform.readFile(file);\r\n      const lines = content.split(/\\r?\\n/);\r\n      const filePath = file.path;\r\n      const parentFolder = file.parent?.name || '';\r\n      const fileItems: Item[] = [];\r\n\r\n      const cache = this.app.metadataCache.getFileCache(file);\r\n      const headingsList: HeadingCache[] = cache?.headings || [];\r\n      let nextHeadingIndex = 0;\r\n      let currentSectionTags: string[] = [];\r\n      let currentHeader = '';\r\n\r\n      for (let i = 0; i < lines.length; i++) {\r\n        const line = lines[i];\r\n\r\n        /* --------------- 标题 ---------------- */\r\n        if (\r\n          nextHeadingIndex < headingsList.length &&\r\n          headingsList[nextHeadingIndex].position.start.line === i\r\n        ) {\r\n          const headingEntry = headingsList[nextHeadingIndex];\r\n          const headingText = headingEntry.heading;\r\n          const headingTags =\r\n            headingText.match(/#([\\p{L}\\p{N}_\\/-]+)/gu) || [];\r\n          currentSectionTags = headingTags\r\n            .map(t => t.replace('#', ''))\r\n            .filter(Boolean);\r\n          let cleanText = headingText;\r\n          for (const tag of headingTags)\r\n            cleanText = cleanText.replace(tag, '').trim();\r\n          currentHeader = cleanText || '';\r\n          nextHeadingIndex++;\r\n          continue;\r\n        }\r\n\r\n        /* --------------- 块 ---------------- */\r\n        if (line.trim() === '<!-- start -->') {\r\n          const endIdx = lines.indexOf('<!-- end -->', i + 1);\r\n          if (endIdx !== -1) {\r\n            const blockItem = parseBlockContent(\r\n              filePath,\r\n              lines,\r\n              i,\r\n              endIdx,\r\n              parentFolder,\r\n            );\r\n            if (blockItem) {\r\n              blockItem.created = file.stat.ctime;\r\n              blockItem.modified = file.stat.mtime;\r\n              if (currentHeader) blockItem.header = currentHeader;\r\n              blockItem.tags = Array.from(\r\n                new Set([...currentSectionTags, ...blockItem.tags]),\r\n              );\r\n\r\n              const name = file.name.toLowerCase().endsWith('.md')\r\n                ? file.name.slice(0, -3)\r\n                : file.name;\r\n              blockItem.filename = name;\r\n              fileItems.push(blockItem);\r\n            }\r\n            i = endIdx;\r\n            continue;\r\n          }\r\n        }\r\n\r\n        /* --------------- 任务 ---------------- */\r\n        const taskItem = parseTaskLine(\r\n          filePath,\r\n          line,\r\n          i + 1,\r\n          parentFolder,\r\n        );\r\n        if (taskItem) {\r\n          taskItem.tags = Array.from(\r\n            new Set([...currentSectionTags, ...taskItem.tags]),\r\n          );\r\n          taskItem.created = file.stat.ctime;\r\n          taskItem.modified = file.stat.mtime;\r\n          if (currentHeader) taskItem.header = currentHeader;\r\n\r\n          const name = file.name.toLowerCase().endsWith('.md')\r\n            ? file.name.slice(0, -3)\r\n            : file.name;\r\n          taskItem.filename = name;\r\n          fileItems.push(taskItem);\r\n        }\r\n      }\r\n\r\n      /* ---------- 替换旧索引 ---------- */\r\n      if (this.fileIndex.has(filePath)) {\r\n        this.items = this.items.filter(\r\n          it => it.id && !it.id.startsWith(filePath + '#'),\r\n        );\r\n      }\r\n      this.fileIndex.set(filePath, fileItems);\r\n      this.items.push(...fileItems);\r\n      return fileItems;\r\n    } catch (err) {\r\n      console.error('ThinkPlugin: 扫描文件失败', file.path, err);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  /** 删除某文件的全部 Items */\r\n  removeFileItems(filePath: string) {\r\n    if (this.fileIndex.has(filePath)) {\r\n      this.fileIndex.delete(filePath);\r\n      this.items = this.items.filter(\r\n        it => !it.id.startsWith(filePath + '#'),\r\n      );\r\n    }\r\n  }\r\n  /** 旧名字兼容 */\r\n  removeFile(path: string) {\r\n    this.removeFileItems(path);\r\n  }\r\n\r\n  /* ====================================================================== */\r\n  /*                                查询                                    */\r\n  /* ====================================================================== */\r\n\r\n  queryItems(\r\n    filters: FilterRule[] = [],\r\n    sortRules: SortRule[] = [],\r\n  ): Item[] {\r\n    let results = this.items.filter(item =>\r\n      (filters || []).every(rule => this._matchItem(item, rule)),\r\n    );\r\n\r\n    if (sortRules.length > 0) {\r\n      results.sort((a, b) => {\r\n        for (const rule of sortRules) {\r\n          const aVal = readField(a, rule.field);\r\n          const bVal = readField(b, rule.field);\r\n          if (aVal == null && bVal == null) continue;\r\n          if (aVal == null) return rule.dir === 'asc' ? 1 : -1;\r\n          if (bVal == null) return rule.dir === 'asc' ? -1 : 1;\r\n\r\n          if (\r\n            typeof aVal === 'number' &&\r\n            typeof bVal === 'number'\r\n          ) {\r\n            if (aVal !== bVal)\r\n              return rule.dir === 'asc'\r\n                ? aVal - bVal\r\n                : bVal - aVal;\r\n          } else {\r\n            const aStr = String(aVal);\r\n            const bStr = String(bVal);\r\n            if (aStr !== bStr)\r\n              return rule.dir === 'asc'\r\n                ? aStr.localeCompare(bStr)\r\n                : bStr.localeCompare(aStr);\r\n          }\r\n        }\r\n        return 0;\r\n      });\r\n    }\r\n    return results;\r\n  }\r\n  /** 旧 API */\r\n  query(filters: FilterRule[] = [], sortRules: SortRule[] = []) {\r\n    return this.queryItems(filters, sortRules);\r\n  }\r\n\r\n  /* ---------- 标记完成 ---------- */\r\n  async markItemDone(itemId: string): Promise<void> {\r\n    await TaskService.completeTask(itemId);\r\n  }\r\n\r\n  /* ====================================================================== */\r\n  /*                               事件派发                                 */\r\n  /* ====================================================================== */\r\n  private _emitChange() {\r\n    this.changeListeners.forEach(fn => {\r\n      try {\r\n        fn();\r\n      } catch (e) {\r\n        console.error('ThinkPlugin: 数据变化通知错误', e);\r\n      }\r\n    });\r\n  }\r\n  private _emitThrottled = throttle(\r\n    () => this._emitChange(),\r\n    250,\r\n  );\r\n\r\n  subscribe(listener: () => void) {\r\n    this.changeListeners.add(listener);\r\n  }\r\n  unsubscribe(listener: () => void) {\r\n    this.changeListeners.delete(listener);\r\n  }\r\n  notifyChange() {\r\n    this._emitThrottled();\r\n  }\r\n\r\n  /* ====================================================================== */\r\n  /*                               私有工具                                 */\r\n  /* ====================================================================== */\r\n\r\n  private _matchItem(item: Item, rule: FilterRule): boolean {\r\n    const fieldVal = readField(item, rule.field);\r\n    const cmpVal = rule.value;\r\n\r\n    if (rule.op === '=' || rule.op === '!=') {\r\n      const isEqual =\r\n        fieldVal != null &&\r\n        cmpVal != null &&\r\n        String(fieldVal) === String(cmpVal);\r\n      return rule.op === '=' ? isEqual : !isEqual;\r\n    }\r\n    if (rule.op === 'includes') {\r\n      if (fieldVal == null) return false;\r\n      if (Array.isArray(fieldVal))\r\n        return fieldVal.some(v =>\r\n          String(v).includes(String(cmpVal)),\r\n        );\r\n      return String(fieldVal).includes(String(cmpVal));\r\n    }\r\n    if (rule.op === 'regex') {\r\n      if (fieldVal == null) return false;\r\n      try {\r\n        const regex = new RegExp(String(cmpVal));\r\n        if (Array.isArray(fieldVal))\r\n          return fieldVal.some(v => regex.test(String(v)));\r\n        return regex.test(String(fieldVal));\r\n      } catch {\r\n        console.warn('ThinkPlugin: 无效的正则表达式', cmpVal);\r\n        return false;\r\n      }\r\n    }\r\n    if (rule.op === '>' || rule.op === '<') {\r\n      if (fieldVal == null) return false;\r\n\r\n      const itemNum = Number(fieldVal);\r\n      const cmpNum = Number(cmpVal);\r\n      if (!isNaN(itemNum) && !isNaN(cmpNum))\r\n        return rule.op === '>'\r\n          ? itemNum > cmpNum\r\n          : itemNum < cmpNum;\r\n\r\n      const itemTime = Date.parse(String(fieldVal));\r\n      const cmpTime = Date.parse(String(cmpVal));\r\n      if (!isNaN(itemTime) && !isNaN(cmpTime))\r\n        return rule.op === '>'\r\n          ? itemTime > cmpTime\r\n          : itemTime < cmpTime;\r\n\r\n      const aStr = String(fieldVal);\r\n      const bStr = String(cmpVal);\r\n      return rule.op === '>'\r\n        ? aStr > bStr\r\n        : aStr < bStr;\r\n    }\r\n    return false;\r\n  }\r\n}\r\n","// core/VaultWatcher.ts\r\nimport { Plugin, TFile } from 'obsidian';\r\nimport { DataStore } from '@core/services/dataStore';\r\n\r\n/** 监听 Vault 变化并与 DataStore 联动（节流由 DataStore 内部处理） */\r\nexport class VaultWatcher {\r\n  private plugin: Plugin;\r\n  private dataStore: DataStore;\r\n\r\n  constructor(plugin: Plugin, dataStore: DataStore) {\r\n    this.plugin    = plugin;\r\n    this.dataStore = dataStore;\r\n    this.registerEvents();\r\n  }\r\n\r\n  private registerEvents() {\r\n    const { app } = this.plugin;\r\n    const onVault = app.vault.on.bind(app.vault);\r\n    const rescan  = (f: TFile) =>\r\n      this.dataStore.scanFile(f).then(() => this.dataStore.notifyChange());\r\n\r\n    this.plugin.registerEvent(onVault('modify', f => {\r\n      if (f instanceof TFile && f.extension === 'md') rescan(f);\r\n    }));\r\n    this.plugin.registerEvent(onVault('create', f => {\r\n      if (f instanceof TFile && f.extension === 'md') rescan(f);\r\n    }));\r\n    this.plugin.registerEvent(onVault('delete', f => {\r\n      if (f instanceof TFile && f.extension === 'md') {\r\n        this.dataStore.removeFileItems(f.path);\r\n        this.dataStore.notifyChange();\r\n      }\r\n    }));\r\n    this.plugin.registerEvent(onVault('rename', (f, old) => {\r\n      if (f instanceof TFile && f.extension === 'md') {\r\n        this.dataStore.removeFileItems(old);\r\n        rescan(f);\r\n      }\r\n    }));\r\n  }\r\n}","var n,l,u,t,i,r,o,e,f,c,s,a,h,p={},v=[],y=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,w=Array.isArray;function d(n,l){for(var u in l)n[u]=l[u];return n}function g(n){n&&n.parentNode&&n.parentNode.removeChild(n)}function _(l,u,t){var i,r,o,e={};for(o in u)\"key\"==o?i=u[o]:\"ref\"==o?r=u[o]:e[o]=u[o];if(arguments.length>2&&(e.children=arguments.length>3?n.call(arguments,2):t),\"function\"==typeof l&&null!=l.defaultProps)for(o in l.defaultProps)void 0===e[o]&&(e[o]=l.defaultProps[o]);return m(l,e,i,r,null)}function m(n,t,i,r,o){var e={type:n,props:t,key:i,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:null==o?++u:o,__i:-1,__u:0};return null==o&&null!=l.vnode&&l.vnode(e),e}function b(){return{current:null}}function k(n){return n.children}function x(n,l){this.props=n,this.context=l}function S(n,l){if(null==l)return n.__?S(n.__,n.__i+1):null;for(var u;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e)return u.__e;return\"function\"==typeof n.type?S(n):null}function C(n){var l,u;if(null!=(n=n.__)&&null!=n.__c){for(n.__e=n.__c.base=null,l=0;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e){n.__e=n.__c.base=u.__e;break}return C(n)}}function M(n){(!n.__d&&(n.__d=!0)&&i.push(n)&&!$.__r++||r!=l.debounceRendering)&&((r=l.debounceRendering)||o)($)}function $(){for(var n,u,t,r,o,f,c,s=1;i.length;)i.length>s&&i.sort(e),n=i.shift(),s=i.length,n.__d&&(t=void 0,o=(r=(u=n).__v).__e,f=[],c=[],u.__P&&((t=d({},r)).__v=r.__v+1,l.vnode&&l.vnode(t),O(u.__P,t,r,u.__n,u.__P.namespaceURI,32&r.__u?[o]:null,f,null==o?S(r):o,!!(32&r.__u),c),t.__v=r.__v,t.__.__k[t.__i]=t,N(f,t,c),t.__e!=o&&C(t)));$.__r=0}function I(n,l,u,t,i,r,o,e,f,c,s){var a,h,y,w,d,g,_=t&&t.__k||v,m=l.length;for(f=P(u,l,_,f,m),a=0;a<m;a++)null!=(y=u.__k[a])&&(h=-1==y.__i?p:_[y.__i]||p,y.__i=a,g=O(n,y,h,i,r,o,e,f,c,s),w=y.__e,y.ref&&h.ref!=y.ref&&(h.ref&&B(h.ref,null,y),s.push(y.ref,y.__c||w,y)),null==d&&null!=w&&(d=w),4&y.__u||h.__k===y.__k?f=A(y,f,n):\"function\"==typeof y.type&&void 0!==g?f=g:w&&(f=w.nextSibling),y.__u&=-7);return u.__e=d,f}function P(n,l,u,t,i){var r,o,e,f,c,s=u.length,a=s,h=0;for(n.__k=new Array(i),r=0;r<i;r++)null!=(o=l[r])&&\"boolean\"!=typeof o&&\"function\"!=typeof o?(f=r+h,(o=n.__k[r]=\"string\"==typeof o||\"number\"==typeof o||\"bigint\"==typeof o||o.constructor==String?m(null,o,null,null,null):w(o)?m(k,{children:o},null,null,null):null==o.constructor&&o.__b>0?m(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o).__=n,o.__b=n.__b+1,e=null,-1!=(c=o.__i=L(o,u,f,a))&&(a--,(e=u[c])&&(e.__u|=2)),null==e||null==e.__v?(-1==c&&(i>s?h--:i<s&&h++),\"function\"!=typeof o.type&&(o.__u|=4)):c!=f&&(c==f-1?h--:c==f+1?h++:(c>f?h--:h++,o.__u|=4))):n.__k[r]=null;if(a)for(r=0;r<s;r++)null!=(e=u[r])&&0==(2&e.__u)&&(e.__e==t&&(t=S(e)),D(e,e));return t}function A(n,l,u){var t,i;if(\"function\"==typeof n.type){for(t=n.__k,i=0;t&&i<t.length;i++)t[i]&&(t[i].__=n,l=A(t[i],l,u));return l}n.__e!=l&&(l&&n.type&&!u.contains(l)&&(l=S(n)),u.insertBefore(n.__e,l||null),l=n.__e);do{l=l&&l.nextSibling}while(null!=l&&8==l.nodeType);return l}function H(n,l){return l=l||[],null==n||\"boolean\"==typeof n||(w(n)?n.some(function(n){H(n,l)}):l.push(n)),l}function L(n,l,u,t){var i,r,o,e=n.key,f=n.type,c=l[u],s=null!=c&&0==(2&c.__u);if(null===c&&null==n.key||s&&e==c.key&&f==c.type)return u;if(t>(s?1:0))for(i=u-1,r=u+1;i>=0||r<l.length;)if(null!=(c=l[o=i>=0?i--:r++])&&0==(2&c.__u)&&e==c.key&&f==c.type)return o;return-1}function T(n,l,u){\"-\"==l[0]?n.setProperty(l,null==u?\"\":u):n[l]=null==u?\"\":\"number\"!=typeof u||y.test(l)?u:u+\"px\"}function j(n,l,u,t,i){var r,o;n:if(\"style\"==l)if(\"string\"==typeof u)n.style.cssText=u;else{if(\"string\"==typeof t&&(n.style.cssText=t=\"\"),t)for(l in t)u&&l in u||T(n.style,l,\"\");if(u)for(l in u)t&&u[l]==t[l]||T(n.style,l,u[l])}else if(\"o\"==l[0]&&\"n\"==l[1])r=l!=(l=l.replace(f,\"$1\")),o=l.toLowerCase(),l=o in n||\"onFocusOut\"==l||\"onFocusIn\"==l?o.slice(2):l.slice(2),n.l||(n.l={}),n.l[l+r]=u,u?t?u.u=t.u:(u.u=c,n.addEventListener(l,r?a:s,r)):n.removeEventListener(l,r?a:s,r);else{if(\"http://www.w3.org/2000/svg\"==i)l=l.replace(/xlink(H|:h)/,\"h\").replace(/sName$/,\"s\");else if(\"width\"!=l&&\"height\"!=l&&\"href\"!=l&&\"list\"!=l&&\"form\"!=l&&\"tabIndex\"!=l&&\"download\"!=l&&\"rowSpan\"!=l&&\"colSpan\"!=l&&\"role\"!=l&&\"popover\"!=l&&l in n)try{n[l]=null==u?\"\":u;break n}catch(n){}\"function\"==typeof u||(null==u||!1===u&&\"-\"!=l[4]?n.removeAttribute(l):n.setAttribute(l,\"popover\"==l&&1==u?\"\":u))}}function F(n){return function(u){if(this.l){var t=this.l[u.type+n];if(null==u.t)u.t=c++;else if(u.t<t.u)return;return t(l.event?l.event(u):u)}}}function O(n,u,t,i,r,o,e,f,c,s){var a,h,p,v,y,_,m,b,S,C,M,$,P,A,H,L,T,j=u.type;if(null!=u.constructor)return null;128&t.__u&&(c=!!(32&t.__u),o=[f=u.__e=t.__e]),(a=l.__b)&&a(u);n:if(\"function\"==typeof j)try{if(b=u.props,S=\"prototype\"in j&&j.prototype.render,C=(a=j.contextType)&&i[a.__c],M=a?C?C.props.value:a.__:i,t.__c?m=(h=u.__c=t.__c).__=h.__E:(S?u.__c=h=new j(b,M):(u.__c=h=new x(b,M),h.constructor=j,h.render=E),C&&C.sub(h),h.props=b,h.state||(h.state={}),h.context=M,h.__n=i,p=h.__d=!0,h.__h=[],h._sb=[]),S&&null==h.__s&&(h.__s=h.state),S&&null!=j.getDerivedStateFromProps&&(h.__s==h.state&&(h.__s=d({},h.__s)),d(h.__s,j.getDerivedStateFromProps(b,h.__s))),v=h.props,y=h.state,h.__v=u,p)S&&null==j.getDerivedStateFromProps&&null!=h.componentWillMount&&h.componentWillMount(),S&&null!=h.componentDidMount&&h.__h.push(h.componentDidMount);else{if(S&&null==j.getDerivedStateFromProps&&b!==v&&null!=h.componentWillReceiveProps&&h.componentWillReceiveProps(b,M),!h.__e&&null!=h.shouldComponentUpdate&&!1===h.shouldComponentUpdate(b,h.__s,M)||u.__v==t.__v){for(u.__v!=t.__v&&(h.props=b,h.state=h.__s,h.__d=!1),u.__e=t.__e,u.__k=t.__k,u.__k.some(function(n){n&&(n.__=u)}),$=0;$<h._sb.length;$++)h.__h.push(h._sb[$]);h._sb=[],h.__h.length&&e.push(h);break n}null!=h.componentWillUpdate&&h.componentWillUpdate(b,h.__s,M),S&&null!=h.componentDidUpdate&&h.__h.push(function(){h.componentDidUpdate(v,y,_)})}if(h.context=M,h.props=b,h.__P=n,h.__e=!1,P=l.__r,A=0,S){for(h.state=h.__s,h.__d=!1,P&&P(u),a=h.render(h.props,h.state,h.context),H=0;H<h._sb.length;H++)h.__h.push(h._sb[H]);h._sb=[]}else do{h.__d=!1,P&&P(u),a=h.render(h.props,h.state,h.context),h.state=h.__s}while(h.__d&&++A<25);h.state=h.__s,null!=h.getChildContext&&(i=d(d({},i),h.getChildContext())),S&&!p&&null!=h.getSnapshotBeforeUpdate&&(_=h.getSnapshotBeforeUpdate(v,y)),L=a,null!=a&&a.type===k&&null==a.key&&(L=V(a.props.children)),f=I(n,w(L)?L:[L],u,t,i,r,o,e,f,c,s),h.base=u.__e,u.__u&=-161,h.__h.length&&e.push(h),m&&(h.__E=h.__=null)}catch(n){if(u.__v=null,c||null!=o)if(n.then){for(u.__u|=c?160:128;f&&8==f.nodeType&&f.nextSibling;)f=f.nextSibling;o[o.indexOf(f)]=null,u.__e=f}else{for(T=o.length;T--;)g(o[T]);z(u)}else u.__e=t.__e,u.__k=t.__k,n.then||z(u);l.__e(n,u,t)}else null==o&&u.__v==t.__v?(u.__k=t.__k,u.__e=t.__e):f=u.__e=q(t.__e,u,t,i,r,o,e,c,s);return(a=l.diffed)&&a(u),128&u.__u?void 0:f}function z(n){n&&n.__c&&(n.__c.__e=!0),n&&n.__k&&n.__k.forEach(z)}function N(n,u,t){for(var i=0;i<t.length;i++)B(t[i],t[++i],t[++i]);l.__c&&l.__c(u,n),n.some(function(u){try{n=u.__h,u.__h=[],n.some(function(n){n.call(u)})}catch(n){l.__e(n,u.__v)}})}function V(n){return\"object\"!=typeof n||null==n||n.__b&&n.__b>0?n:w(n)?n.map(V):d({},n)}function q(u,t,i,r,o,e,f,c,s){var a,h,v,y,d,_,m,b=i.props,k=t.props,x=t.type;if(\"svg\"==x?o=\"http://www.w3.org/2000/svg\":\"math\"==x?o=\"http://www.w3.org/1998/Math/MathML\":o||(o=\"http://www.w3.org/1999/xhtml\"),null!=e)for(a=0;a<e.length;a++)if((d=e[a])&&\"setAttribute\"in d==!!x&&(x?d.localName==x:3==d.nodeType)){u=d,e[a]=null;break}if(null==u){if(null==x)return document.createTextNode(k);u=document.createElementNS(o,x,k.is&&k),c&&(l.__m&&l.__m(t,e),c=!1),e=null}if(null==x)b===k||c&&u.data==k||(u.data=k);else{if(e=e&&n.call(u.childNodes),b=i.props||p,!c&&null!=e)for(b={},a=0;a<u.attributes.length;a++)b[(d=u.attributes[a]).name]=d.value;for(a in b)if(d=b[a],\"children\"==a);else if(\"dangerouslySetInnerHTML\"==a)v=d;else if(!(a in k)){if(\"value\"==a&&\"defaultValue\"in k||\"checked\"==a&&\"defaultChecked\"in k)continue;j(u,a,null,d,o)}for(a in k)d=k[a],\"children\"==a?y=d:\"dangerouslySetInnerHTML\"==a?h=d:\"value\"==a?_=d:\"checked\"==a?m=d:c&&\"function\"!=typeof d||b[a]===d||j(u,a,d,b[a],o);if(h)c||v&&(h.__html==v.__html||h.__html==u.innerHTML)||(u.innerHTML=h.__html),t.__k=[];else if(v&&(u.innerHTML=\"\"),I(\"template\"==t.type?u.content:u,w(y)?y:[y],t,i,r,\"foreignObject\"==x?\"http://www.w3.org/1999/xhtml\":o,e,f,e?e[0]:i.__k&&S(i,0),c,s),null!=e)for(a=e.length;a--;)g(e[a]);c||(a=\"value\",\"progress\"==x&&null==_?u.removeAttribute(\"value\"):null!=_&&(_!==u[a]||\"progress\"==x&&!_||\"option\"==x&&_!=b[a])&&j(u,a,_,b[a],o),a=\"checked\",null!=m&&m!=u[a]&&j(u,a,m,b[a],o))}return u}function B(n,u,t){try{if(\"function\"==typeof n){var i=\"function\"==typeof n.__u;i&&n.__u(),i&&null==u||(n.__u=n(u))}else n.current=u}catch(n){l.__e(n,t)}}function D(n,u,t){var i,r;if(l.unmount&&l.unmount(n),(i=n.ref)&&(i.current&&i.current!=n.__e||B(i,null,u)),null!=(i=n.__c)){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(n){l.__e(n,u)}i.base=i.__P=null}if(i=n.__k)for(r=0;r<i.length;r++)i[r]&&D(i[r],u,t||\"function\"!=typeof n.type);t||g(n.__e),n.__c=n.__=n.__e=void 0}function E(n,l,u){return this.constructor(n,u)}function G(u,t,i){var r,o,e,f;t==document&&(t=document.documentElement),l.__&&l.__(u,t),o=(r=\"function\"==typeof i)?null:i&&i.__k||t.__k,e=[],f=[],O(t,u=(!r&&i||t).__k=_(k,null,[u]),o||p,p,t.namespaceURI,!r&&i?[i]:o?null:t.firstChild?n.call(t.childNodes):null,e,!r&&i?i:o?o.__e:t.firstChild,r,f),N(e,u,f)}function J(n,l){G(n,l,J)}function K(l,u,t){var i,r,o,e,f=d({},l.props);for(o in l.type&&l.type.defaultProps&&(e=l.type.defaultProps),u)\"key\"==o?i=u[o]:\"ref\"==o?r=u[o]:f[o]=void 0===u[o]&&null!=e?e[o]:u[o];return arguments.length>2&&(f.children=arguments.length>3?n.call(arguments,2):t),m(l.type,f,i||l.key,r||l.ref,null)}function Q(n){function l(n){var u,t;return this.getChildContext||(u=new Set,(t={})[l.__c]=this,this.getChildContext=function(){return t},this.componentWillUnmount=function(){u=null},this.shouldComponentUpdate=function(n){this.props.value!=n.value&&u.forEach(function(n){n.__e=!0,M(n)})},this.sub=function(n){u.add(n);var l=n.componentWillUnmount;n.componentWillUnmount=function(){u&&u.delete(n),l&&l.call(n)}}),n.children}return l.__c=\"__cC\"+h++,l.__=n,l.Provider=l.__l=(l.Consumer=function(n,l){return n.children(l)}).contextType=l,l}n=v.slice,l={__e:function(n,l,u,t){for(var i,r,o;l=l.__;)if((i=l.__c)&&!i.__)try{if((r=i.constructor)&&null!=r.getDerivedStateFromError&&(i.setState(r.getDerivedStateFromError(n)),o=i.__d),null!=i.componentDidCatch&&(i.componentDidCatch(n,t||{}),o=i.__d),o)return i.__E=i}catch(l){n=l}throw n}},u=0,t=function(n){return null!=n&&null==n.constructor},x.prototype.setState=function(n,l){var u;u=null!=this.__s&&this.__s!=this.state?this.__s:this.__s=d({},this.state),\"function\"==typeof n&&(n=n(d({},u),this.props)),n&&d(u,n),null!=n&&this.__v&&(l&&this._sb.push(l),M(this))},x.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),M(this))},x.prototype.render=k,i=[],o=\"function\"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,e=function(n,l){return n.__v.__b-l.__v.__b},$.__r=0,f=/(PointerCapture)$|Capture$/i,c=0,s=F(!1),a=F(!0),h=0;export{x as Component,k as Fragment,K as cloneElement,Q as createContext,_ as createElement,b as createRef,_ as h,J as hydrate,t as isValidElement,l as options,G as render,H as toChildArray};\n//# sourceMappingURL=preact.module.js.map\n","import{options as r,Fragment as e}from\"preact\";export{Fragment}from\"preact\";var t=/[\"&<]/;function n(r){if(0===r.length||!1===t.test(r))return r;for(var e=0,n=0,o=\"\",f=\"\";n<r.length;n++){switch(r.charCodeAt(n)){case 34:f=\"&quot;\";break;case 38:f=\"&amp;\";break;case 60:f=\"&lt;\";break;default:continue}n!==e&&(o+=r.slice(e,n)),o+=f,e=n+1}return n!==e&&(o+=r.slice(e,n)),o}var o=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,f=0,i=Array.isArray;function u(e,t,n,o,i,u){t||(t={});var a,c,p=t;if(\"ref\"in p)for(c in p={},t)\"ref\"==c?a=t[c]:p[c]=t[c];var l={type:e,props:p,key:n,ref:a,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--f,__i:-1,__u:0,__source:i,__self:u};if(\"function\"==typeof e&&(a=e.defaultProps))for(c in a)void 0===p[c]&&(p[c]=a[c]);return r.vnode&&r.vnode(l),l}function a(r){var t=u(e,{tpl:r,exprs:[].slice.call(arguments,1)});return t.key=t.__v,t}var c={},p=/[A-Z]/g;function l(e,t){if(r.attr){var f=r.attr(e,t);if(\"string\"==typeof f)return f}if(t=function(r){return null!==r&&\"object\"==typeof r&&\"function\"==typeof r.valueOf?r.valueOf():r}(t),\"ref\"===e||\"key\"===e)return\"\";if(\"style\"===e&&\"object\"==typeof t){var i=\"\";for(var u in t){var a=t[u];if(null!=a&&\"\"!==a){var l=\"-\"==u[0]?u:c[u]||(c[u]=u.replace(p,\"-$&\").toLowerCase()),s=\";\";\"number\"!=typeof a||l.startsWith(\"--\")||o.test(l)||(s=\"px;\"),i=i+l+\":\"+a+s}}return e+'=\"'+n(i)+'\"'}return null==t||!1===t||\"function\"==typeof t||\"object\"==typeof t?\"\":!0===t?e:e+'=\"'+n(\"\"+t)+'\"'}function s(r){if(null==r||\"boolean\"==typeof r||\"function\"==typeof r)return null;if(\"object\"==typeof r){if(void 0===r.constructor)return r;if(i(r)){for(var e=0;e<r.length;e++)r[e]=s(r[e]);return r}}return n(\"\"+r)}export{u as jsx,l as jsxAttr,u as jsxDEV,s as jsxEscape,a as jsxTemplate,u as jsxs};\n//# sourceMappingURL=jsxRuntime.module.js.map\n","import{options as n}from\"preact\";var t,r,u,i,o=0,f=[],c=n,e=c.__b,a=c.__r,v=c.diffed,l=c.__c,m=c.unmount,s=c.__;function p(n,t){c.__h&&c.__h(r,n,o||t),o=0;var u=r.__H||(r.__H={__:[],__h:[]});return n>=u.__.length&&u.__.push({}),u.__[n]}function d(n){return o=1,h(D,n)}function h(n,u,i){var o=p(t++,2);if(o.t=n,!o.__c&&(o.__=[i?i(u):D(void 0,u),function(n){var t=o.__N?o.__N[0]:o.__[0],r=o.t(t,n);t!==r&&(o.__N=[r,o.__[1]],o.__c.setState({}))}],o.__c=r,!r.__f)){var f=function(n,t,r){if(!o.__c.__H)return!0;var u=o.__c.__H.__.filter(function(n){return!!n.__c});if(u.every(function(n){return!n.__N}))return!c||c.call(this,n,t,r);var i=o.__c.props!==n;return u.forEach(function(n){if(n.__N){var t=n.__[0];n.__=n.__N,n.__N=void 0,t!==n.__[0]&&(i=!0)}}),c&&c.call(this,n,t,r)||i};r.__f=!0;var c=r.shouldComponentUpdate,e=r.componentWillUpdate;r.componentWillUpdate=function(n,t,r){if(this.__e){var u=c;c=void 0,f(n,t,r),c=u}e&&e.call(this,n,t,r)},r.shouldComponentUpdate=f}return o.__N||o.__}function y(n,u){var i=p(t++,3);!c.__s&&C(i.__H,u)&&(i.__=n,i.u=u,r.__H.__h.push(i))}function _(n,u){var i=p(t++,4);!c.__s&&C(i.__H,u)&&(i.__=n,i.u=u,r.__h.push(i))}function A(n){return o=5,T(function(){return{current:n}},[])}function F(n,t,r){o=6,_(function(){if(\"function\"==typeof n){var r=n(t());return function(){n(null),r&&\"function\"==typeof r&&r()}}if(n)return n.current=t(),function(){return n.current=null}},null==r?r:r.concat(n))}function T(n,r){var u=p(t++,7);return C(u.__H,r)&&(u.__=n(),u.__H=r,u.__h=n),u.__}function q(n,t){return o=8,T(function(){return n},t)}function x(n){var u=r.context[n.__c],i=p(t++,9);return i.c=n,u?(null==i.__&&(i.__=!0,u.sub(r)),u.props.value):n.__}function P(n,t){c.useDebugValue&&c.useDebugValue(t?t(n):n)}function b(n){var u=p(t++,10),i=d();return u.__=n,r.componentDidCatch||(r.componentDidCatch=function(n,t){u.__&&u.__(n,t),i[1](n)}),[i[0],function(){i[1](void 0)}]}function g(){var n=p(t++,11);if(!n.__){for(var u=r.__v;null!==u&&!u.__m&&null!==u.__;)u=u.__;var i=u.__m||(u.__m=[0,0]);n.__=\"P\"+i[0]+\"-\"+i[1]++}return n.__}function j(){for(var n;n=f.shift();)if(n.__P&&n.__H)try{n.__H.__h.forEach(z),n.__H.__h.forEach(B),n.__H.__h=[]}catch(t){n.__H.__h=[],c.__e(t,n.__v)}}c.__b=function(n){r=null,e&&e(n)},c.__=function(n,t){n&&t.__k&&t.__k.__m&&(n.__m=t.__k.__m),s&&s(n,t)},c.__r=function(n){a&&a(n),t=0;var i=(r=n.__c).__H;i&&(u===r?(i.__h=[],r.__h=[],i.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(i.__h.forEach(z),i.__h.forEach(B),i.__h=[],t=0)),u=r},c.diffed=function(n){v&&v(n);var t=n.__c;t&&t.__H&&(t.__H.__h.length&&(1!==f.push(t)&&i===c.requestAnimationFrame||((i=c.requestAnimationFrame)||w)(j)),t.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),u=r=null},c.__c=function(n,t){t.some(function(n){try{n.__h.forEach(z),n.__h=n.__h.filter(function(n){return!n.__||B(n)})}catch(r){t.some(function(n){n.__h&&(n.__h=[])}),t=[],c.__e(r,n.__v)}}),l&&l(n,t)},c.unmount=function(n){m&&m(n);var t,r=n.__c;r&&r.__H&&(r.__H.__.forEach(function(n){try{z(n)}catch(n){t=n}}),r.__H=void 0,t&&c.__e(t,r.__v))};var k=\"function\"==typeof requestAnimationFrame;function w(n){var t,r=function(){clearTimeout(u),k&&cancelAnimationFrame(t),setTimeout(n)},u=setTimeout(r,35);k&&(t=requestAnimationFrame(r))}function z(n){var t=r,u=n.__c;\"function\"==typeof u&&(n.__c=void 0,u()),r=t}function B(n){var t=r;n.__c=n.__(),r=t}function C(n,t){return!n||n.length!==t.length||t.some(function(t,r){return t!==n[r]})}function D(n,t){return\"function\"==typeof t?t(n):t}export{q as useCallback,x as useContext,P as useDebugValue,y as useEffect,b as useErrorBoundary,g as useId,F as useImperativeHandle,_ as useLayoutEffect,T as useMemo,h as useReducer,A as useRef,d as useState};\n//# sourceMappingURL=hooks.module.js.map\n","// views/ModulePanel.tsx\r\n\r\n\r\n// 折叠组件：支持 Ctrl/⌘ + 点击标题一键折叠/展开全部模块\r\nimport { h } from 'preact';\r\nimport { useState, useRef, useEffect } from 'preact/hooks';\r\nimport { ModuleConfig } from '@core/domain/schema';\r\n\r\ninterface ModulePanelProps {\r\n  module: ModuleConfig;\r\n  children: any;\r\n}\r\n\r\nexport function ModulePanel({ module, children }: ModulePanelProps) {\r\n  const [collapsed, setCollapsed] = useState<boolean>(!!module.collapsed);\r\n  const rootRef = useRef<HTMLDivElement>(null);\r\n\r\n  const toggleCollapsed = () => setCollapsed(v => !v);\r\n\r\n  const onHeaderClick = (e: MouseEvent) => {\r\n    if (e.metaKey || e.ctrlKey) {\r\n      // 广播事件给所有模块\r\n      const want = !collapsed;\r\n      const ev = new CustomEvent('think-toggle-all', { detail: want });\r\n      document.querySelectorAll('.think-module').forEach(el => el.dispatchEvent(ev));\r\n    } else {\r\n      toggleCollapsed();\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const handler = (ev: any) => {\r\n      const want: boolean = ev.detail;\r\n      setCollapsed(want);\r\n    };\r\n    const el = rootRef.current;\r\n    if (!el) return;\r\n    el.addEventListener('think-toggle-all', handler as any);\r\n    return () => el.removeEventListener('think-toggle-all', handler as any);\r\n  }, []);\r\n\r\n  return (\r\n    <div class=\"think-module\" ref={rootRef}>\r\n      <div class=\"module-header\" onClick={onHeaderClick as any} title=\"点击折叠/展开；Ctrl/⌘ + 点击：全部折叠/展开\">\r\n        <span class=\"module-title\">{module.title}</span>\r\n        <span class=\"module-toggle\">{collapsed ? '▶' : '▼'}</span>\r\n      </div>\r\n      {!collapsed && <div class=\"module-content\">{children}</div>}\r\n    </div>\r\n  );\r\n}\r\n","// utils/obsidian.ts\r\nimport { DataStore } from '@core/services/dataStore';\r\n\r\nexport function makeObsUri(itemId: string): string {\r\n  const hashIndex = itemId.lastIndexOf('#');\r\n  const filePath = hashIndex >= 0 ? itemId.substring(0, hashIndex) : itemId;\r\n  const lineNo = hashIndex >= 0 ? itemId.substring(hashIndex + 1) : '';\r\n  const vaultName = encodeURIComponent(DataStore.instance['app'].vault.getName());\r\n  return `obsidian://advanced-uri?vault=${vaultName}&filepath=${encodeURIComponent(filePath)}${lineNo ? '&line=' + lineNo : ''}`;\r\n}","/** @jsxImportSource preact */\r\nimport { h } from 'preact';\r\n\r\ninterface Props {\r\n  done: boolean;\r\n  onMarkDone?: () => void;\r\n}\r\n\r\nexport function TaskCheckbox({ done, onMarkDone }: Props) {\r\n  const cls = 'task-checkbox' + (done ? ' done' : '');\r\n  return (\r\n    <input\r\n      type=\"checkbox\"\r\n      class={cls}\r\n      checked={done}\r\n      onClick={done ? e => e.preventDefault() : undefined}\r\n      onChange={() => !done && onMarkDone?.()}\r\n    />\r\n  );\r\n}\r\n","// views/TableView.tsx\r\n// 精简复选框逻辑，复用 TaskCheckbox\r\nimport { h } from 'preact';\r\nimport { JSX } from 'preact';\r\nimport { Item, readField } from '@core/domain/schema';\r\nimport { DataStore } from '@core/services/dataStore';\r\nimport { makeObsUri } from '@core/utils/obsidian';\r\nimport { EMPTY_LABEL } from '@core/domain/constants';\r\nimport { TaskCheckbox } from '@shared/components/TaskCheckbox';   // ★ 新增\r\n\r\ninterface TableViewProps {\r\n  items: Item[];\r\n  rowField: string;\r\n  colField: string;\r\n}\r\n\r\nexport function TableView({ items, rowField, colField }: TableViewProps) {\r\n  if (!rowField || !colField)\r\n    return <div>（TableView 需要配置 rowField 和 colField）</div>;\r\n\r\n  const rowVals: string[] = [];\r\n  const colVals: string[] = [];\r\n  const matrix: Record<string, Record<string, Item[]>> = {};\r\n\r\n  items.forEach(it => {\r\n    const r = String(readField(it, rowField) ?? EMPTY_LABEL);\r\n    const c = String(readField(it, colField) ?? EMPTY_LABEL);\r\n    if (!matrix[r]) {\r\n      matrix[r] = {};\r\n      rowVals.push(r);\r\n    }\r\n    if (!matrix[r][c]) matrix[r][c] = [];\r\n    matrix[r][c].push(it);\r\n    if (!colVals.includes(c)) colVals.push(c);\r\n  });\r\n\r\n  rowVals.sort();\r\n  colVals.sort();\r\n\r\n  return (\r\n    <table class=\"think-table\">\r\n      <thead>\r\n        <tr>\r\n          <th>{rowField}</th>\r\n          {colVals.map(c => (\r\n            <th key={c}>{c}</th>\r\n          ))}\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {rowVals.map(r => (\r\n          <tr key={r}>\r\n            <td>\r\n              <strong>{r}</strong>\r\n            </td>\r\n            {colVals.map(c => {\r\n              const cellItems = matrix[r]?.[c] || [];\r\n              return !cellItems.length ? (\r\n                <td key={c} class=\"empty\" />\r\n              ) : (\r\n                <td key={c}>\r\n                  {cellItems.map(it => (\r\n                    <div key={it.id}>{renderCellItem(it)}</div>\r\n                  ))}\r\n                </td>\r\n              );\r\n            })}\r\n          </tr>\r\n        ))}\r\n      </tbody>\r\n    </table>\r\n  );\r\n}\r\n\r\n/* ---------- 单元格内渲染 ---------- */\r\nfunction renderCellItem(item: Item) {\r\n  if (item.type === 'task') {\r\n    const isDone = item.status === 'done';\r\n    return (\r\n      <span>\r\n        <TaskCheckbox\r\n          done={isDone}\r\n          onMarkDone={() => DataStore.instance.markItemDone(item.id)}\r\n        />\r\n        {item.icon && <span class=\"task-icon\">{item.icon}</span>}\r\n        <a href={makeObsUri(item.id)} target=\"_blank\" rel=\"noopener\">\r\n          {item.title}\r\n        </a>\r\n      </span>\r\n    );\r\n  }\r\n  return (\r\n    <a href={makeObsUri(item.id)} target=\"_blank\" rel=\"noopener\">\r\n      {item.title}\r\n    </a>\r\n  );\r\n}","// config/categoryColorMap.ts\r\n\r\n// 类别到颜色的映射\r\nexport const CATEGORY_COLOR_MAP: Record<string, string> = {\r\n  打卡: '#d2cceb',\r\n  任务: '#caebf3',\r\n  计划: '#d8ecb2',\r\n  总结: '#E5D5B9',\r\n  事件: '#94e2d6',\r\n  感受: '#93daf0',\r\n  思考: '#f09393',\r\n  // ... 其它类别\r\n};\r\n\r\nexport function getCategoryColor(category: string): string {\r\n  return CATEGORY_COLOR_MAP[category] || '#e0e0e0';\r\n}\r\n","// views/BlockView.tsx\r\n// 主要改动：使用公共 TaskCheckbox 组件，删除重复逻辑\r\nimport { h, JSX } from 'preact';\r\nimport { Item, readField } from '@core/domain/schema';\r\nimport { getCategoryColor } from '@core/domain/categoryColorMap';\r\nimport { DataStore } from '@core/services/dataStore';\r\nimport { makeObsUri } from '@core/utils/obsidian';\r\nimport { TaskCheckbox } from '@shared/components/TaskCheckbox';   // ★ 新增\r\n\r\ninterface BlockViewProps {\r\n  items: Item[];\r\n  groupField?: string;\r\n  showMeta?: boolean;\r\n  fields?: string[];\r\n}\r\n\r\nexport function BlockView(props: BlockViewProps) {\r\n  const { groupField, showMeta = true, fields } = props;\r\n  let items = props.items;\r\n\r\n  /* ------------------------- 分组逻辑保持不变 ------------------------- */\r\n  let grouped: Record<string, Item[]> | null = null;\r\n  let groupKeys: string[] = [];\r\n  if (groupField) {\r\n    grouped = {};\r\n    for (const it of items) {\r\n      const key = String(readField(it, groupField) ?? '(none)');\r\n      if (!grouped[key]) {\r\n        grouped[key] = [];\r\n        groupKeys.push(key);\r\n      }\r\n      grouped[key].push(it);\r\n    }\r\n    groupKeys.sort();\r\n  }\r\n\r\n  /* ------------------------- 渲染任务 / Block ------------------------- */\r\n\r\n  const renderTaskLine = (item: Item) => {\r\n    const isDone = item.status === 'done';\r\n    return (\r\n      <div style=\"margin-bottom:4px;line-height:1.5;\">\r\n        <TaskCheckbox\r\n          done={isDone}\r\n          onMarkDone={() => DataStore.instance.markItemDone(item.id)}\r\n        />\r\n        <a\r\n          href={makeObsUri(item.id)}\r\n          target=\"_blank\"\r\n          rel=\"noopener\"\r\n          class={isDone ? 'task-done' : ''}\r\n        >\r\n          {item.title}\r\n        </a>\r\n        {item.icon && <span class=\"tag-pill\">{item.icon}</span>}\r\n        {item.tags.map(t => (\r\n          <span class=\"tag-pill\" key={t}>\r\n            {t}\r\n          </span>\r\n        ))}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const renderBlock = (item: Item) => (\r\n    <div\r\n      style=\"\r\n        display:grid;\r\n        grid-template-columns:auto minmax(180px,1fr);\r\n        align-items:start;\r\n        gap:8px;\r\n        margin-bottom:8px;\r\n      \"\r\n    >\r\n      {showMeta && (\r\n        <div style=\"font-size:90%;display:flex;flex-wrap:wrap;gap:4px;\">\r\n          <span\r\n            class=\"tag-pill\"\r\n            style={`background:${getCategoryColor(item.category)};`}\r\n          >\r\n            {item.category}\r\n          </span>\r\n          {item.date && <span class=\"tag-pill\">{item.date}</span>}\r\n          {item.extra['图标'] && (\r\n            <span class=\"tag-pill\">{item.extra['图标']}</span>\r\n          )}\r\n        </div>\r\n      )}\r\n      <div style=\"white-space:pre-wrap;line-height:1.5;\">\r\n        <a href={makeObsUri(item.id)} target=\"_blank\" rel=\"noopener\">\r\n          {item.content}\r\n        </a>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  const renderItem = (it: Item) =>\r\n    it.type === 'task' ? renderTaskLine(it) : renderBlock(it);\r\n\r\n  /* ------------------------- 输出 ------------------------- */\r\n  return (\r\n    <div>\r\n      {grouped\r\n        ? groupKeys.map(grp => (\r\n            <div key={grp}>\r\n              <h5>{grp}</h5>\r\n              {grouped![grp].map(renderItem)}\r\n            </div>\r\n          ))\r\n        : items.map(renderItem)}\r\n    </div>\r\n  );\r\n}","// views/ExcelView.tsx\r\n\r\nimport { h } from 'preact';\r\nimport { Item, getAllFields, readField } from '@core/domain/schema';\r\n\r\ninterface ExcelViewProps {\r\n  items: Item[];\r\n  fields?: string[];\r\n}\r\n\r\nfunction toText(v: any): string {\r\n  if (Array.isArray(v)) return v.join(', ');\r\n  return v == null ? '' : String(v);\r\n}\r\n\r\nexport function ExcelView({ items, fields }: ExcelViewProps) {\r\n  const cols = (fields && fields.length) ? fields : getAllFields(items);\r\n\r\n  return (\r\n    <div>\r\n      <table class=\"think-table\" style=\"min-width:100%; white-space:nowrap;\">\r\n        <thead>\r\n          <tr>{cols.map(c => <th key={c}>{c}</th>)}</tr>\r\n        </thead>\r\n        <tbody>\r\n          {items.map(it => (\r\n            <tr key={it.id}>\r\n              {cols.map(c => <td key={c}>{toText(readField(it, c))}</td>)}\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n}\r\n","// src/views/index.ts\r\n// 统一注册所有可用视图，并导出 ViewComponents 供 Dashboard.tsx 动态选择\r\n\r\nimport { TableView }   from './TableView';\r\nimport { BlockView }   from './BlockView';\r\nimport { ExcelView }   from './ExcelView';\r\n\r\n\r\n\r\n/* ------------------------------------------------------------------ */\r\n/* 视图注册表 —— key = 视图名称（外部配置使用）                        */\r\n/* ------------------------------------------------------------------ */\r\nexport const VIEW_REGISTRY = {\r\n  TableView,\r\n  BlockView,\r\n  ExcelView,\r\n} as const;\r\n\r\n/** Dashboard.tsx 动态调用用这个常量 */\r\nexport const ViewComponents = VIEW_REGISTRY;\r\n\r\n/** 所有可选视图名称（下拉框等用） */\r\nexport type ViewName = keyof typeof VIEW_REGISTRY;\r\nexport const VIEW_OPTIONS: ViewName[] = Object.keys(VIEW_REGISTRY) as ViewName[];\r\n","// src/utils/itemFilter.ts\r\n//-----------------------------------------------------------\r\n// 统一的筛选 / 排序 / 日期区间 / 关键字过滤助手\r\n//-----------------------------------------------------------\r\n\r\nimport { Item, FilterRule, SortRule, readField } from '@core/domain/schema';\r\n\r\n/* ---------- 过滤 ---------- */\r\nexport function filterByRules(items: Item[], rules: FilterRule[] = []) {\r\n  return rules.length ? items.filter(it => rules.every(r => matchRule(it, r))) : items;\r\n}\r\n\r\nfunction matchRule(item: Item, rule: FilterRule): boolean {\r\n  const v1 = readField(item, rule.field);\r\n  const v2 = rule.value;\r\n\r\n  switch (rule.op) {\r\n    case '='   : return String(v1) === String(v2);\r\n    case '!='  : return String(v1) !== String(v2);\r\n    case 'includes': return Array.isArray(v1)\r\n        ? v1.some(x => String(x).includes(String(v2)))\r\n        : String(v1).includes(String(v2));\r\n    case 'regex':\r\n      try { return new RegExp(String(v2)).test(String(v1)); }\r\n      catch { return false; }\r\n    case '>'   : return String(v1) > String(v2);\r\n    case '<'   : return String(v1) < String(v2);\r\n    default    : return false;\r\n  }\r\n}\r\n\r\n/* ---------- 排序 ---------- */\r\nexport function sortItems(items: Item[], rules: SortRule[] = []) {\r\n  if (!rules.length) return items;\r\n\r\n  return [...items].sort((a, b) => {\r\n    for (const r of rules) {\r\n      const av = readField(a, r.field);\r\n      const bv = readField(b, r.field);\r\n      if (av == null && bv == null) continue;\r\n      if (av == null) return r.dir === 'asc' ? 1 : -1;\r\n      if (bv == null) return r.dir === 'asc' ? -1 : 1;\r\n      const cmp = String(av).localeCompare(String(bv), 'zh');\r\n      if (cmp !== 0) return r.dir === 'asc' ? cmp : -cmp;\r\n    }\r\n    return 0;\r\n  });\r\n}\r\n\r\n/* ---------- 日期区间（改为毫秒级比较） ---------- */\r\nexport function filterByDateRange(\r\n  items: Item[], startISO?: string, endISO?: string\r\n) {\r\n  if (!startISO && !endISO) return items;\r\n  const sMs = startISO ? Date.parse(startISO) : null;\r\n  const eMs = endISO   ? Date.parse(endISO)   : null;\r\n\r\n  return items.filter(it => {\r\n    const t = (it.startMs ?? (it.startISO ? Date.parse(it.startISO) : NaN));\r\n    if (isNaN(t)) return true;\r\n    if (sMs !== null && t < sMs) return false;\r\n    if (eMs !== null && t > eMs) return false;\r\n    return true;\r\n  });\r\n}\r\n\r\n/* ---------- 关键字 ---------- */\r\nexport function filterByKeyword(items: Item[], kw: string) {\r\n  if (!kw.trim()) return items;\r\n  const s = kw.trim().toLowerCase();\r\n  return items.filter(it => (it.title + ' ' + it.content).toLowerCase().includes(s));\r\n}","/** @jsxImportSource preact */\r\nimport { h } from 'preact';\r\nimport { useState, useEffect } from 'preact/hooks';\r\nimport { DataStore } from '@core/services/dataStore';\r\nimport { DashboardConfig, ModuleConfig } from '@core/domain/schema';\r\nimport { ModulePanel } from './ModulePanel';\r\nimport type ThinkPlugin from '../main';\r\nimport { TFile, TFolder } from 'obsidian';\r\nimport { ViewComponents } from '@features/dashboard/ui';\r\nimport { getDateRange, dayjs } from '@core/utils/date';         // (#5)\r\nimport {\r\n  filterByRules,\r\n  sortItems,\r\n  filterByDateRange,\r\n  filterByKeyword,\r\n} from '@core/utils/itemFilter';\r\n\r\nconst QTXT = ['一', '二', '三', '四'];\r\n\r\ninterface Props {\r\n  config: DashboardConfig;\r\n  dataStore: DataStore;\r\n  plugin: ThinkPlugin;\r\n}\r\n\r\nexport function Dashboard({ config, dataStore, plugin }: Props) {\r\n  const [view, setView] = useState(config.initialView || '月');\r\n  const [date, setDate] = useState(\r\n    config.initialDate ? dayjs(config.initialDate) : dayjs(),\r\n  );\r\n  const [kw, setKw] = useState('');\r\n  const [, force] = useState(0);\r\n\r\n  /* 数据层变动后强制刷新 */\r\n  useEffect(() => {\r\n    const fn = () => force(v => v + 1);\r\n    dataStore.subscribe(fn);\r\n    return () => dataStore.unsubscribe(fn);\r\n  }, [dataStore]);\r\n\r\n  /* 小工具 */\r\n  const unit = (v: string) =>\r\n    ({ 年: 'year', 季: 'quarter', 月: 'month', 周: 'week', 天: 'day' } as any)[v] ??\r\n    'day';\r\n  const fmt = (d: any, v: string) =>\r\n    v === '年'\r\n      ? d.format('YYYY年')\r\n      : v === '季'\r\n      ? `${d.year()}年${QTXT[d.quarter() - 1]}季度`\r\n      : v === '月'\r\n      ? d.format('YYYY-MM')\r\n      : v === '周'\r\n      ? d.format('YYYY-[W]WW')\r\n      : d.format('YYYY-MM-DD');\r\n\r\n  const { startDate, endDate } = getDateRange(date, view);\r\n\r\n  /* ---------------- Module 渲染 ---------------- */\r\n  const renderModule = (m: ModuleConfig & { groups?: string[] }) => {\r\n    const V = (ViewComponents as any)[m.view];\r\n    if (!V)\r\n      return (\r\n        <ModulePanel module={m}>\r\n          <div>未知视图：{m.view}</div>\r\n        </ModulePanel>\r\n      );\r\n\r\n    /* ① 采集并过滤数据 */\r\n    let items = dataStore.queryItems();\r\n    items = filterByRules(items, m.filters || []);\r\n    items = filterByDateRange(\r\n      items,\r\n      startDate.format('YYYY-MM-DD'),\r\n      endDate.format('YYYY-MM-DD'),\r\n    );\r\n    items = filterByKeyword(items, kw);\r\n\r\n    /* ② 仪表盘级 path / tag */\r\n    if (config.tags?.length) {\r\n      items = items.filter(it =>\r\n        it.tags.some(t => config.tags!.some(x => t.includes(x))),\r\n      );\r\n    }\r\n    if (config.path?.trim()) {\r\n      const target = config.path.trim();\r\n      const af = (dataStore as any)['app'].vault.getAbstractFileByPath(target);\r\n      const keep = (p: string) =>\r\n        af instanceof TFolder\r\n          ? p.startsWith(target.endsWith('/') ? target : target + '/')\r\n          : af instanceof TFile\r\n          ? p.startsWith(target + '#')\r\n          : p.startsWith(target.endsWith('/') ? target : target + '/');\r\n      items = items.filter(it => keep(it.id));\r\n    }\r\n\r\n    /* ③ 排序 */\r\n    items = sortItems(items, m.sort || []);\r\n\r\n    /* ④ 视图 props 拼装 ------------------------------------ */\r\n    const vp: any = { ...(m.props || {}) };\r\n\r\n    if ((m as any).groups?.length) vp.groupField = (m as any).groups[0];\r\n    if (m.view === 'TableView') {\r\n      vp.rowField = (m as any).rowField || '';\r\n      vp.colField = (m as any).colField || '';\r\n    }\r\n    if (m.fields?.length) vp.fields = m.fields;\r\n\r\n    return (\r\n      <ModulePanel module={m}>\r\n        <V items={items} {...vp} />\r\n      </ModulePanel>\r\n    );\r\n  };\r\n\r\n  /* ---------------- 页面 ---------------- */\r\n  return (\r\n    <div>\r\n      {/* 顶栏 */}\r\n      <div class=\"tp-toolbar\" style=\"margin-bottom:8px;\">\r\n        {['年', '季', '月', '周', '天'].map(v => (\r\n          <button onClick={() => setView(v)} class={v === view ? 'active' : ''}>\r\n            {v}\r\n          </button>\r\n        ))}\r\n        <button disabled style=\"font-weight:bold;margin:0 4px;background:#fff;\">\r\n          {fmt(date, view)}\r\n        </button>\r\n        <button onClick={() => setDate(date.clone().subtract(1, unit(view)))}>←</button>\r\n        <button onClick={() => setDate(date.clone().add(1, unit(view)))}>→</button>\r\n        <button onClick={() => setDate(dayjs())}>＝</button>\r\n        <input\r\n          placeholder=\"快速过滤…\"\r\n          style=\"margin-left:4px;\"\r\n          value={kw}\r\n          onInput={e => setKw((e.target as HTMLInputElement).value)}\r\n        />\r\n        <button\r\n          style=\"margin-left:4px;\"\r\n          onClick={() => plugin.openSettingsForDashboard(config.name)}\r\n          title=\"在插件设置中编辑本仪表盘\"\r\n        >\r\n          ⚙︎\r\n        </button>\r\n      </div>\r\n\r\n      {/* 模块循环 */}\r\n      {config.modules.map(renderModule)}\r\n    </div>\r\n  );\r\n}\r\n","// src/core/CodeblockEmbedder.ts\r\n//-----------------------------------------------------------\r\n// 负责解析 ```think 代码块并渲染 Dashboard\r\n//-----------------------------------------------------------\r\n\r\nimport { render, h } from 'preact';\r\n\r\nimport { CODEBLOCK_LANG }   from '@core/domain/constants';\r\nimport { DashboardConfig }  from '@core/domain/schema';\r\nimport { DataStore }        from '@core/services/dataStore';\r\n\r\nimport { Dashboard }        from '@features/dashboard/ui/Dashboard';   // 新路径\r\nimport type ThinkPlugin     from '../main';\r\n\r\nexport class CodeblockEmbedder {\r\n  constructor(\r\n    private plugin: ThinkPlugin,\r\n    private dataStore: DataStore,\r\n  ) {\r\n    this.registerProcessor();\r\n  }\r\n\r\n  /* ---------- 注册代码块处理器 ---------- */\r\n  private registerProcessor() {\r\n    this.plugin.registerMarkdownCodeBlockProcessor(\r\n      CODEBLOCK_LANG,\r\n      (source, el) => {\r\n        let configName: string | undefined;\r\n        let inlineDash: DashboardConfig | undefined;\r\n\r\n        /* ① 解析代码块 JSON 参数 ----------------------------- */\r\n        try {\r\n          const input = source.trim() ? JSON.parse(source) : {};\r\n\r\n          if (Array.isArray(input.modules)) {\r\n            //   内联模式：在代码块里直接写 modules\r\n            inlineDash = {\r\n              name: input.name || '__inline__',\r\n              path: input.path || '',\r\n              tags: input.tags || [],\r\n              initialView: input.initialView || '月',\r\n              initialDate: input.initialDate || '',\r\n              modules: input.modules,\r\n            };\r\n          } else {\r\n            //   引用模式：{ \"config\": \"默认仪表盘\" }\r\n            configName = input.config || input.dashboard || input.name;\r\n          }\r\n        } catch (e) {\r\n          console.warn('ThinkPlugin: 仪表盘代码块 JSON 解析失败', e);\r\n        }\r\n\r\n        /* ② 内联仪表盘直接渲染 -------------------------------- */\r\n        if (inlineDash) {\r\n          this.mount(el, inlineDash);\r\n          return;\r\n        }\r\n\r\n        /* ③ 找不到 name → 默认第一个 ------------------------- */\r\n        if (!configName && this.plugin.dashboards.length)\r\n          configName = this.plugin.dashboards[0].name;\r\n\r\n        const dash = this.plugin.dashboards.find(d => d.name === configName);\r\n        if (!dash) {\r\n          el.createDiv({ text: `找不到名称为 \"${configName}\" 的仪表盘配置` });\r\n          return;\r\n        }\r\n        this.mount(el, dash);\r\n      },\r\n    );\r\n  }\r\n\r\n  /* ---------- 在元素上挂载 Preact Dashboard ---------- */\r\n  private mount(el: HTMLElement, dash: DashboardConfig) {\r\n    render(\r\n      h(Dashboard, {\r\n        config:    dash,\r\n        dataStore: this.dataStore,\r\n        plugin:    this.plugin,\r\n      }),\r\n      el,\r\n    );\r\n    this.plugin.activeDashboards.push({ container: el, configName: dash.name });\r\n  }\r\n}","// src/features/dashboard/index.ts\r\nimport type { ThinkContext } from '@platform/context';\r\n\r\nimport { VaultWatcher }     from '@core/VaultWatcher';\r\nimport { CodeblockEmbedder } from '@core/CodeblockEmbedder';\r\n\r\n/** Dashboard Feature 的入口 —— 把所有与仪表盘相关的监听 / 代码块注册都放这里 */\r\nexport function setup(ctx: ThinkContext) {\r\n  const { plugin, dataStore } = ctx;\r\n\r\n  /* ① 监听 Vault 变化 —— 实时刷新仪表盘 */\r\n  new VaultWatcher(plugin, dataStore);\r\n\r\n  /* ② 注册 ```think``` 代码块 —— 在阅读视图渲染 Dashboard */\r\n  new CodeblockEmbedder(plugin, dataStore);\r\n\r\n  /* 如需 SettingsTab，可继续在这里 plugin.addSettingTab(...) */\r\n}","// src/utils/templates.ts\r\nimport { EMOJI } from '@core/domain/constants';\r\nimport { normalizeDateStr } from './date';\r\n\r\n/* ------------------------------------------------------------------ */\r\n/*  公共工具                                                           */\r\n/* ------------------------------------------------------------------ */\r\n\r\n/** 取路径最后一段：a/b/c -> c */\r\nexport function lastSegment(path: string) {\r\n  return (path || '').split('/').filter(Boolean).pop() || path || '';\r\n}\r\n\r\n/* ------------------------------------------------------------------ */\r\n/*  任务行：模板渲染                                                   */\r\n/* ------------------------------------------------------------------ */\r\nexport function makeTaskLine(opts: {\r\n  themePath?: string;\r\n  template?: string;                         // 例如 \"{{任务状态}} {{icon}} {{内容}} ...\"\r\n  fields: Record<string, string | number | boolean | null | undefined>;\r\n}): string {\r\n  const { template = '{{前缀}}{{内容}}', fields } = opts;\r\n\r\n  /** 字段安全化 */\r\n  const safe: Record<string, string> = {};\r\n  Object.entries(fields || {}).forEach(([k, v]) => { safe[k] = v == null ? '' : String(v); });\r\n  if (!('前缀' in safe))      safe['前缀'] = '';\r\n  if (!('任务前缀' in safe))  safe['任务前缀'] = safe['前缀'];\r\n\r\n  /** 替换占位符：支持 {{key}} 和 {{@key}} */\r\n  const PLACEHOLDER = /\\{\\{\\s*@?([^}]+?)\\s*\\}\\}/g;\r\n  let line = template.replace(PLACEHOLDER, (_m, p1) => {\r\n    const key = String(p1).trim();\r\n    return key in safe ? safe[key] : '';\r\n  });\r\n\r\n  /** 若模板没有任何前缀占位符，则在最前面补一个 */\r\n  const hasPrefixSlot = /\\{\\{\\s*@?(?:前缀|任务前缀)\\s*\\}\\}/.test(template);\r\n  if (!hasPrefixSlot && !line.startsWith('- [')) {\r\n    const fallback = safe['前缀'] || '- [ ] ';\r\n    line = fallback + line;\r\n  }\r\n\r\n  /** 压缩多余空格并返回 */\r\n  return line.replace(/[ \\t]+/g, ' ').trim();\r\n}\r\n\r\n/* ------------------------------------------------------------------ */\r\n/*  块：计划 / 总结 / 思考 / 打卡                                       */\r\n/* ------------------------------------------------------------------ */\r\nexport function makeBlock(opts: {\r\n  category: string;                          // 计划 / 总结 / 思考 / 打卡\r\n  dateISO?: string;\r\n  themeLabel?: string;                       // 主题:: 顶层显示\r\n  icon?: string;\r\n  content: string;                           // 可多行\r\n  tags?: string[];                           // 标签:: a, b\r\n  extra?: Record<string,string>;             // 周期 / 分类 ...\r\n  fieldsOrder?: string[];                    // 自定义字段顺序\r\n}) {\r\n  /* 默认顺序；可通过 fieldsOrder 覆盖 */\r\n  const order = opts.fieldsOrder ?? ['分类','日期','主题','图标','标签','周期','分类','内容'];\r\n\r\n  /** 组装所有可能出现的字段 */\r\n  const dict: Record<string,string> = {\r\n    '分类': opts.category,\r\n    '日期': opts.dateISO ? normalizeDateStr(opts.dateISO) : '',\r\n    '主题': opts.themeLabel ?? '',\r\n    '图标': opts.icon ?? '',\r\n    '标签': opts.tags?.join(', ') ?? '',\r\n    ...opts.extra,                            // 周期 / 分类 等\r\n    '内容': (opts.content || '').trim()\r\n  };\r\n\r\n  /** helper */\r\n  const kv = (k:string,v?:string)=> v ? `${k}:: ${v}` : '';\r\n\r\n  const lines: string[] = ['<!-- start -->'];\r\n\r\n  /* 按顺序输出 */\r\n  order.forEach(f => {\r\n    if (f==='内容' && dict['内容'].includes('\\n')) {\r\n      const [first,...rest] = dict['内容'].split('\\n');\r\n      lines.push('内容:: '+ first, ...rest);\r\n    } else {\r\n      const line = kv(f, dict[f]);\r\n      if (line) lines.push(line);\r\n    }\r\n  });\r\n\r\n  lines.push('<!-- end -->');\r\n  return lines.join('\\n');\r\n}\r\n\r\n/* ------------------------------------------------------------------ */\r\n/*  旧版任务行（带 emoji & #标签）                                     */\r\n/* ------------------------------------------------------------------ */\r\nexport function makeTaskLineLegacy(opts: {\r\n  prefix: '- [ ] ' | '- [x] ' | '- [-] ' | '';\r\n  title: string;\r\n  themePath?: string;\r\n  icon?: string;\r\n  due?: string;\r\n  start?: string;\r\n  scheduled?: string;\r\n  createdISO?: string;\r\n  timeHHMM?: string;\r\n  duration?: string | number;\r\n  repeat?: 'day' | 'week' | 'month' | 'year' | null;\r\n  markDate?: string;\r\n  statusEmoji?: string;\r\n}) {\r\n  const tagStr  = opts.themePath ? ` #${opts.themePath}` : '';\r\n  const iconStr = opts.icon ? `${opts.icon} ` : '';\r\n  const pieces: string[] = [];\r\n\r\n  pieces.push(`${opts.prefix}${iconStr}${opts.title}${tagStr}`.trim());\r\n\r\n  if (opts.timeHHMM) pieces.push(`(时间::${opts.timeHHMM})`);\r\n  if (opts.duration !== undefined && opts.duration !== '')\r\n    pieces.push(`(时长::${String(opts.duration)})`);\r\n\r\n  const addDate = (emoji: string, d?: string) => {\r\n    if (d) pieces.push(`${emoji} ${normalizeDateStr(d)}`);\r\n  };\r\n  addDate(EMOJI.created,   opts.createdISO);\r\n  addDate(EMOJI.start,     opts.start);\r\n  addDate(EMOJI.scheduled, opts.scheduled);\r\n  addDate(EMOJI.due,       opts.due);\r\n\r\n  if (opts.repeat)\r\n    pieces.push(`${EMOJI.repeat} every ${opts.repeat}${opts.repeat === 'day' ? '' : 's'}`);\r\n\r\n  if (opts.statusEmoji && opts.markDate)\r\n    pieces.push(`${opts.statusEmoji} ${normalizeDateStr(opts.markDate)}`);\r\n\r\n  return pieces.join(' ').trim();\r\n}","// src/services/inputService.ts\r\nimport { App, TFile, TFolder } from 'obsidian';\r\nimport { lastSegment } from '@core/utils/templates';\r\nimport type ThinkPlugin from '../main';\r\n\r\ntype InputSettings = Record<string, any>;\r\n\r\nexport interface TaskThemeConfig {\r\n  path: string;\r\n  icon?: string;\r\n  file: string;\r\n  fields: string[];\r\n  fieldOptions?: Record<string, string[]>;\r\n  template?: string;\r\n}\r\n\r\nexport class InputService {\r\n  constructor(private app: App, private plugin: ThinkPlugin) {}\r\n\r\n  /* ------------------------------------------------------------------ */\r\n  /*  读取插件设置                                                      */\r\n  /* ------------------------------------------------------------------ */\r\n  private get settings(): InputSettings {\r\n    return this.plugin.inputSettings || { base: {}, themes: [] };\r\n  }\r\n\r\n  /* ------------------------------------------------------------------ */\r\n  /*  路径解析                                                          */\r\n  /* ------------------------------------------------------------------ */\r\n  private apply(template: string, themePath: string): string {\r\n    return template.replace(/\\{\\{\\s*主题\\s*\\}\\}/g, lastSegment(themePath));\r\n  }\r\n\r\n  private resolveFilePath(\r\n    themePath: string,\r\n    kind: 'task' | 'block',\r\n    blockName?: string,\r\n  ): string | null {\r\n    const s = this.settings;\r\n    const theme = (s.themes || []).find((t: any) => t.path === themePath) || null;\r\n\r\n    if (kind === 'task') {\r\n      const file = theme?.task?.file ?? s.base?.task?.file;\r\n      return file ? this.apply(file, themePath) : null;\r\n    }\r\n\r\n    const tBlk = theme?.blocks?.[blockName!];\r\n    const bBlk = s.base?.blocks?.[blockName!];\r\n    const file = tBlk?.file ?? bBlk?.file;\r\n    return file ? this.apply(file, themePath) : null;\r\n  }\r\n\r\n  /* ------------------------------------------------------------------ */\r\n  /*  文件 / 目录保证                                                   */\r\n  /* ------------------------------------------------------------------ */\r\n  private async ensureFolder(path: string) {\r\n    const segs = path.split('/').filter(Boolean);\r\n    let cur = '';\r\n    for (const seg of segs) {\r\n      cur = cur ? `${cur}/${seg}` : seg;\r\n      const af = this.app.vault.getAbstractFileByPath(cur);\r\n      if (!af) await this.app.vault.createFolder(cur).catch(() => {});\r\n      else if (af instanceof TFile) throw new Error(`路径冲突：${cur} 是文件`);\r\n    }\r\n  }\r\n\r\n  private async getOrCreateFile(fp: string) {\r\n    const af = this.app.vault.getAbstractFileByPath(fp);\r\n    if (af instanceof TFile) return af;\r\n    if (af instanceof TFolder) throw new Error(`目标是文件夹：${fp}`);\r\n    const folder = fp.includes('/') ? fp.slice(0, fp.lastIndexOf('/')) : '';\r\n    if (folder) await this.ensureFolder(folder);\r\n    return await this.app.vault.create(fp, '');\r\n  }\r\n\r\n  /* ------------------------------------------------------------------ */\r\n  /*  在 ## 主题标题块下追加内容                                        */\r\n  /* ------------------------------------------------------------------ */\r\n  private async appendUnderHeader(file: TFile, header: string, payload: string) {\r\n    const esc = header.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\r\n    const regex = new RegExp(`^##\\\\s+${esc}\\\\s*$`, 'm');\r\n    const text = await this.app.vault.read(file);\r\n    const lines = text.split('\\n');\r\n\r\n    if (!regex.test(text)) {\r\n      if (lines.length && lines[lines.length - 1].trim() !== '') lines.push('');\r\n      lines.push(`## ${header}`, '');\r\n    }\r\n\r\n    const idxHeader = lines.findIndex(l => regex.test(l));\r\n    let idxInsert = idxHeader + 1;\r\n    while (idxInsert < lines.length && !/^##\\s+/.test(lines[idxInsert])) idxInsert++;\r\n\r\n    lines.splice(idxInsert, 0, payload);\r\n    await this.app.vault.modify(file, lines.join('\\n'));\r\n  }\r\n\r\n  /* ------------------------------------------------------------------ */\r\n  /*  写入 API                                                          */\r\n  /* ------------------------------------------------------------------ */\r\n  async writeTask(themePath: string, fileHint: string | null, payload: string): Promise<string> {\r\n    const fp = fileHint ?? this.resolveFilePath(themePath, 'task');\r\n    if (!fp) throw new Error('未配置任务写入文件路径');\r\n    const file = await this.getOrCreateFile(fp);\r\n    await this.appendUnderHeader(file, themePath, payload);\r\n    return fp;\r\n  }\r\n\r\n  async writeBlock(\r\n    themePath: string,\r\n    blockName: string,\r\n    fileHint: string | null,\r\n    payload: string,\r\n  ): Promise<string> {\r\n    const fp = fileHint ?? this.resolveFilePath(themePath, 'block', blockName);\r\n    if (!fp) throw new Error(`未配置 ${blockName} 写入文件路径`);\r\n    const file = await this.getOrCreateFile(fp);\r\n    await this.appendUnderHeader(file, themePath, payload);\r\n    return fp;\r\n  }\r\n\r\n  /* ------------------------------------------------------------------ */\r\n  /*  分类 / 主题检索                                                   */\r\n  /* ------------------------------------------------------------------ */\r\n  /** 返回启用 task 的顶级分类 */\r\n  getTaskTopCategories(): string[] {\r\n    const set = new Set<string>();\r\n    (this.settings.themes || []).forEach((t: any) => {\r\n      if (t.task?.enabled) set.add(t.path.split('/')[0]);\r\n    });\r\n    return [...set].sort((a, b) => a.localeCompare(b, 'zh'));\r\n  }\r\n\r\n  /** 返回启用指定 block 的顶级分类（计划 / 总结 / 思考 / 打卡） */\r\n  getBlockTopCategories(blockName: string): string[] {\r\n    const set = new Set<string>();\r\n    (this.settings.themes || []).forEach((t: any) => {\r\n      if (t.blocks?.[blockName]?.enabled === true) {\r\n        set.add(t.path.split('/')[0]);\r\n      }\r\n    });\r\n    return [...set].sort((a, b) => a.localeCompare(b, 'zh'));\r\n  }\r\n\r\n  /** 返回指定顶级分类下启用 task 的完整主题配置 */\r\n  listTaskThemesByTop(top: string): TaskThemeConfig[] {\r\n    const { themes = [], base = {} } = this.settings;\r\n    const baseTask = base.task ?? {};\r\n\r\n    return themes\r\n      .filter(\r\n        (t: any) =>\r\n          (t.path === top || t.path.startsWith(top + '/')) && (t.task?.enabled ?? false),\r\n      )\r\n      .map((t: any) => {\r\n        const task = t.task ?? {};\r\n        return {\r\n          path: t.path,\r\n          icon: t.icon,\r\n          file: task.file ?? baseTask.file ?? `${t.path}.md`,\r\n          fields: task.fields ?? baseTask.fields ?? [],\r\n          fieldOptions: task.fieldOptions ?? baseTask.fieldOptions ?? {},\r\n          template: task.template ?? baseTask.template,\r\n        };\r\n      });\r\n  }\r\n\r\n  /** 返回指定顶级分类下启用指定 block 的主题（只含 path/icon） */\r\n  listBlockThemesByTop(top: string, blockName: string) {\r\n    return (this.settings.themes || [])\r\n      .filter(\r\n        (t: any) =>\r\n          (t.path === top || t.path.startsWith(top + '/')) &&\r\n          (t.blocks?.[blockName]?.enabled ?? false),\r\n      )\r\n      .map((t: any) => ({ path: t.path, icon: t.icon }))\r\n      .sort((a, b) => a.path.localeCompare(b.path, 'zh'));\r\n  }\r\n}","\r\n/** @jsxImportSource preact */\r\n// 公共表单小组件：Field / Radio 组件\r\n\r\nimport { h } from 'preact';\r\n\r\nexport function Field({ label, children }: { label: string; children: any }) {\r\n  return (\r\n    <div style=\"margin-bottom:12px;width:100%;\">\r\n      <div style=\"margin-bottom:4px;font-weight:600;\">{label}</div>\r\n      <div style=\"display:flex;flex-wrap:wrap;gap:8px;width:100%;\">{children}</div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport function Radio(\r\n  { value, checked, onChange, label, name }:\r\n  { value: string; checked: boolean; onChange: () => void; label?: string; name?: string }\r\n) {\r\n  return (\r\n    <label style=\"display:flex;align-items:center;gap:4px;cursor:pointer;\">\r\n      <input\r\n        type=\"radio\"\r\n        name={name}\r\n        value={value}\r\n        checked={checked}\r\n        onChange={onChange}\r\n        style=\"appearance:radio;-webkit-appearance:radio;\"\r\n      />\r\n      <span>{label ?? value}</span>\r\n    </label>\r\n  );\r\n}","/** @jsxImportSource preact */\r\nimport { App, Modal, Notice } from 'obsidian';\r\nimport { h, render } from 'preact';\r\nimport { useState } from 'preact/hooks';\r\nimport type ThinkPlugin from '../../main';\r\nimport { InputService, TaskThemeConfig } from '@core/services/inputService';\r\nimport { makeTaskLine } from '@core/utils/templates';\r\nimport { todayISO, nowHHMM } from '@core/utils/date';               // (#5)\r\nimport { Field, Radio } from '@shared/components/FieldRadio';              // (#1)\r\n\r\n/* ===================================================================== */\r\nexport class QuickTaskModal extends Modal {\r\n  constructor(private plugin: ThinkPlugin) { super(plugin.app); }\r\n  onOpen()  { render(<TaskForm app={this.app} plugin={this.plugin} close={() => this.close()}/>, this.contentEl); }\r\n  onClose() { this.contentEl.empty(); }\r\n}\r\n\r\n/* -------------------- 主表单 -------------------- */\r\nfunction TaskForm({ app, plugin, close }:{app:App;plugin:ThinkPlugin;close:()=>void}) {\r\n  const svc = new InputService(app, plugin);\r\n\r\n  /* ---------- 分类 & 主题 ---------- */\r\n  const [top,setTop] = useState(svc.getTaskTopCategories()[0] || '');\r\n  const [themes,setThemes] = useState<TaskThemeConfig[]>(svc.listTaskThemesByTop(top));\r\n  const [theme,setTheme]   = useState<TaskThemeConfig|null>(themes[0] || null);\r\n\r\n  /* ---------- 动态字段 ---------- */\r\n  const options = theme?.fieldOptions ?? {};\r\n  const init:Record<string,string> = {};\r\n  (theme?.fields||[]).forEach(f=>{\r\n    init[f] = f==='日期' ? todayISO() :\r\n              f==='时间' ? nowHHMM() :\r\n              options[f]?.[0] ?? '';\r\n  });\r\n  const [form,setForm] = useState(init);\r\n  const update = (k:string,v:string)=>setForm(o=>({...o,[k]:v}));\r\n\r\n  /* ---------- 保存 ---------- */\r\n  async function save(){\r\n    const title = form['内容']?.trim() || form['任务内容']?.trim();\r\n    if(!title){ new Notice('请填写任务内容'); return; }\r\n\r\n    /* 状态到前缀映射 */\r\n    let taskPrefix = '';\r\n    switch(form['任务状态']){\r\n      case '✅': taskPrefix='- [x] '; break;\r\n      case '📅':\r\n      case '🛫': taskPrefix='- [ ] '; break;\r\n      default  : taskPrefix='';\r\n    }\r\n\r\n    const line = makeTaskLine({\r\n      themePath: theme!.path,\r\n      template : theme?.template,\r\n      fields   : {\r\n        ...form,\r\n        任务前缀 : taskPrefix,\r\n        前缀     : taskPrefix,\r\n        icon     : theme?.icon ?? ''\r\n      }\r\n    });\r\n\r\n    try{\r\n      const targetPath = await svc.writeTask(theme!.path,null,line);\r\n      new Notice(`✅ 已保存任务 → ${targetPath}`);\r\n      plugin.dataStore?.notifyChange?.();\r\n      close();\r\n    }catch(e:any){\r\n      new Notice(`❌ 保存失败：${e.message??e}`);\r\n    }\r\n  }\r\n\r\n  /* ---------- 渲染 ---------- */\r\n  return (\r\n    <div class=\"think-modal\">\r\n      <h3 style=\"margin-bottom:1rem;\">快速录入 · 任务</h3>\r\n\r\n      <Field label=\"大类\">\r\n        {svc.getTaskTopCategories().map(c=>(\r\n          <Radio key={c} value={c} label={c} checked={top===c}\r\n                 onChange={()=>{\r\n                   setTop(c);\r\n                   const ts = svc.listTaskThemesByTop(c);\r\n                   setThemes(ts); setTheme(ts[0]||null);\r\n                 }}/>\r\n        ))}\r\n      </Field>\r\n\r\n      {theme && (\r\n        <Field label=\"主题\">\r\n          {themes.map(t=>(\r\n            <Radio key={t.path} name=\"theme\" value={t.path} label={t.path.split('/').pop()??t.path}\r\n                   checked={theme.path===t.path} onChange={()=>setTheme(t)}/>\r\n          ))}\r\n        </Field>\r\n      )}\r\n\r\n      {theme?.fields.map(f=>{\r\n        const choices = options[f];\r\n        return (\r\n          <Field key={f} label={f}>\r\n            {choices?.length?choices.map(v=>(\r\n              <Radio key={v} name={f} value={v} label={v} checked={form[f]===v}\r\n                     onChange={()=>update(f,v)}/>\r\n            )):(\r\n              <input style=\"width:100%;\" type={f==='日期'?'date':f==='时间'?'time':'text'}\r\n                     value={form[f]} onInput={e=>update(f,(e.target as HTMLInputElement).value)}/>\r\n            )}\r\n          </Field>\r\n        );\r\n      })}\r\n\r\n      <div style=\"display:flex;justify-content:flex-end;margin-top:1rem;gap:.5rem;\">\r\n        <button class=\"mod-cta\" onClick={save}>提交 ↩︎</button>\r\n        <button onClick={close}>取消</button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","/** @jsxImportSource preact */\r\nimport { App, Modal, Notice } from 'obsidian';\r\nimport { h, render } from 'preact';\r\nimport { useState } from 'preact/hooks';\r\nimport type ThinkPlugin from '../../main';\r\nimport { InputService } from '@core/services/inputService';\r\nimport { makeBlock } from '@core/utils/templates';\r\nimport { todayISO } from '@core/utils/date';                   // (#5)\r\nimport { Field, Radio } from '@shared/components/FieldRadio';        // (#1)\r\n\r\nconst lastSeg = (p:string)=>p.split('/').pop()??p;\r\n\r\n/* ---------------- Modal ---------------- */\r\nexport class QuickBlockModal extends Modal{\r\n  constructor(private plugin:ThinkPlugin){ super(plugin.app); }\r\n  onOpen(){ render(<Form app={this.app} plugin={this.plugin} close={()=>this.close()}/>,this.contentEl); }\r\n  onClose(){ this.contentEl.empty(); }\r\n}\r\n\r\nfunction Form({app,plugin,close}:{app:App;plugin:ThinkPlugin;close:()=>void}){\r\n  const svc = new InputService(app,plugin);\r\n\r\n  const [cat,setCat] = useState<'计划'|'总结'|'思考'>('思考');\r\n  const [topCats,setTopCats] = useState(svc.getBlockTopCategories(cat));\r\n  const [top,setTop] = useState(topCats[0]??'');\r\n\r\n  const buildThemes = ()=>svc.listBlockThemesByTop(top,cat);\r\n  const [themes,setThemes] = useState(buildThemes());\r\n  const [theme,setTheme]   = useState(themes[0]?.path||top);\r\n  const themeIcon          = themes.find(t=>t.path===theme)?.icon??'';\r\n\r\n  /* 其他字段 */\r\n  const baseBlk = plugin.inputSettings?.base?.blocks?.[cat] ?? {};\r\n  const opts    = baseBlk.fieldOptions ?? {};\r\n  const periods = Array.isArray(opts['周期']) ? opts['周期'] : [];\r\n  const types   = Array.isArray(opts['分类']) ? opts['分类'] : [];\r\n\r\n  const [date,setDate] = useState(todayISO());\r\n  const [txt,setTxt]   = useState('');\r\n  const [period,setPeriod] = useState(cat!=='思考'&&periods.includes('周')?'周':'');\r\n  const [type,setType]     = useState(cat==='思考'&&types.includes('思考')?'思考':'');\r\n\r\n  const refresh=(newCat=cat,newTop:string|null=null)=>{\r\n    const tops = svc.getBlockTopCategories(newCat);\r\n    setTopCats(tops);\r\n    const resolved=newTop??tops[0]??'';\r\n    setTop(resolved);\r\n    const ts = svc.listBlockThemesByTop(resolved,newCat);\r\n    setThemes(ts); setTheme(ts[0]?.path||resolved);\r\n    setPeriod(newCat!=='思考'&&periods.includes('周')?'周':'');\r\n    setType  (newCat==='思考'&&types.includes('思考')?'思考':'');\r\n  };\r\n\r\n  async function save(){\r\n    if(!txt.trim()){ new Notice('请填写内容'); return; }\r\n    const extra:Record<string,string> = {};\r\n    if(cat!=='思考'&&period) extra['周期']=period;\r\n    if(cat==='思考'&&type)   extra['分类']=type;\r\n\r\n    const block = makeBlock({\r\n      category:cat,\r\n      dateISO :date,\r\n      themeLabel:top,\r\n      icon:themeIcon,\r\n      content:txt,\r\n      extra\r\n    });\r\n\r\n    try{\r\n      await svc.writeBlock(theme,cat,null,block);\r\n      new Notice('✅ 已保存');\r\n      plugin.dataStore?.notifyChange?.();\r\n      close();\r\n    }catch(e:any){\r\n      new Notice('❌ 保存失败：'+(e.message??e));\r\n    }\r\n  }\r\n\r\n  /* -------- 渲染 -------- */\r\n  return(\r\n    <div class=\"think-modal\">\r\n      <h3 style=\"margin-bottom:1rem;\">快速录入 · {cat}</h3>\r\n\r\n      <Field label=\"类别\">\r\n        {(['计划','总结','思考'] as const).map(c=>(\r\n          <Radio key={c} checked={cat===c} label={c} onChange={()=>{setCat(c);refresh(c,null);}}/>\r\n        ))}\r\n      </Field>\r\n\r\n      <Field label=\"大类\">\r\n        {topCats.map(t=>(\r\n          <Radio key={t} checked={top===t} label={t} onChange={()=>{setTop(t);refresh(cat,t);}}/>\r\n        ))}\r\n      </Field>\r\n\r\n      <Field label=\"主题\">\r\n        {themes.map(t=>(\r\n          <Radio key={t.path} name=\"theme\" checked={theme===t.path}\r\n                 label={lastSeg(t.path)} onChange={()=>setTheme(t.path)}/>\r\n        ))}\r\n      </Field>\r\n\r\n      {cat!=='思考'&&periods.length>0&&(\r\n        <Field label=\"周期\">\r\n          {periods.map(p=>(\r\n            <Radio key={p} name=\"period\" checked={period===p} label={p}\r\n                   onChange={()=>setPeriod(p)}/>\r\n          ))}\r\n        </Field>\r\n      )}\r\n\r\n      {cat==='思考'&&types.length>0&&(\r\n        <Field label=\"思考分类\">\r\n          {types.map(tp=>(\r\n            <Radio key={tp} name=\"type\" checked={type===tp} label={tp}\r\n                   onChange={()=>setType(tp)}/>\r\n          ))}\r\n        </Field>\r\n      )}\r\n\r\n      <Field label=\"日期\">\r\n        <input type=\"date\" value={date}\r\n               onChange={e=>setDate((e.target as HTMLInputElement).value)}\r\n               style=\"min-width:140px;\"/>\r\n      </Field>\r\n\r\n      <Field label=\"内容\">\r\n        <textarea rows={6} style=\"width:100%;\" placeholder=\"输入内容…\"\r\n                  value={txt} onInput={e=>setTxt((e.target as HTMLTextAreaElement).value)}/>\r\n      </Field>\r\n\r\n      <div style=\"display:flex;gap:8px;justify-content:flex-end;margin-top:8px;\">\r\n        <button class=\"mod-cta\" onClick={save}>提交 ↩︎</button>\r\n        <button onClick={close}>取消</button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","/** @jsxImportSource preact */\r\nimport { App, Modal, Notice } from 'obsidian';\r\nimport { h, render } from 'preact';\r\nimport { useState, useEffect } from 'preact/hooks';\r\nimport type ThinkPlugin from '../../main';\r\nimport { InputService } from '@core/services/inputService';\r\nimport { makeBlock } from '@core/utils/templates';\r\nimport { todayISO } from '@core/utils/date';                  // (#5)\r\nimport { Field, Radio } from '@shared/components/FieldRadio';       // (#1)\r\n\r\nconst lastSeg = (p:string)=>p.split('/').pop()??p;\r\n\r\n/* ---------------- Modal ---------------- */\r\nexport class QuickHabitModal extends Modal{\r\n  constructor(private plugin:ThinkPlugin){ super(plugin.app); }\r\n  onOpen(){ render(<HabitForm app={this.app} plugin={this.plugin} close={()=>this.close()}/>,this.contentEl); }\r\n  onClose(){ this.contentEl.empty(); }\r\n}\r\n\r\nfunction HabitForm({app,plugin,close}:{app:App;plugin:ThinkPlugin;close:()=>void}){\r\n  const svc = new InputService(app,plugin);\r\n\r\n  const tops = svc.getBlockTopCategories('打卡');\r\n  const [top,setTop] = useState(tops[0]??'');\r\n\r\n  const buildThemes=()=>svc.listBlockThemesByTop(top,'打卡');\r\n  const [themes,setThemes] = useState(buildThemes());\r\n  const [themePath,setThemePath] = useState(themes[0]?.path||top);\r\n\r\n  function getStarMax(path:string):number{\r\n    const th = (plugin.inputSettings?.themes||[]).find((t:any)=>t.path===path);\r\n    const blk = th?.blocks?.['打卡']||{};\r\n    if(typeof blk.starCount==='number') return blk.starCount;\r\n    if(Array.isArray(blk.emojiMapping))  return blk.emojiMapping.length;\r\n    if(Array.isArray(blk.imageMapping))  return blk.imageMapping.length;\r\n    return 5;\r\n  }\r\n  const [starMax,setStarMax] = useState(getStarMax(themePath));\r\n\r\n  const [dateISO,setDateISO] = useState(todayISO());\r\n  const [content,setContent] = useState('');\r\n  const [score,setScore]     = useState(1);\r\n\r\n  /* 同步 starMax */\r\n  useEffect(()=>{\r\n    const mx = getStarMax(themePath);\r\n    setStarMax(mx);\r\n    if(score>mx) setScore(mx);\r\n  },[themePath]);\r\n\r\n  function chooseTop(t:string){\r\n    setTop(t);\r\n    const ts = svc.listBlockThemesByTop(t,'打卡');\r\n    setThemes(ts);\r\n    setThemePath(ts[0]?.path||t);\r\n  }\r\n\r\n  async function onSubmit(){\r\n    if(!content.trim()){ new Notice('请填写内容'); return; }\r\n\r\n    const block = makeBlock({\r\n      category:'打卡',\r\n      dateISO,\r\n      themeLabel:top,\r\n      content,\r\n      extra:{'评分':String(score)}\r\n    });\r\n\r\n    try{\r\n      await svc.writeBlock(themePath,'打卡',null,block);\r\n      new Notice('✅ 已保存打卡');\r\n      plugin.dataStore?.notifyChange?.();\r\n      close();\r\n    }catch(e:any){\r\n      new Notice('❌ 保存失败：'+(e.message??e));\r\n    }\r\n  }\r\n\r\n  /* -------- 渲染 -------- */\r\n  return(\r\n    <div class=\"think-modal\">\r\n      <h3 style=\"margin-bottom:1rem;\">快速录入 · 打卡</h3>\r\n\r\n      <Field label=\"大类\">\r\n        {tops.map(t=>(\r\n          <Radio key={t} value={t} checked={top===t} onChange={()=>chooseTop(t)} label={t}/>\r\n        ))}\r\n      </Field>\r\n\r\n      <Field label=\"主题\">\r\n        {themes.map(t=>(\r\n          <Radio key={t.path} name=\"theme\" value={t.path} label={lastSeg(t.path)}\r\n                 checked={themePath===t.path} onChange={()=>setThemePath(t.path)}/>\r\n        ))}\r\n      </Field>\r\n\r\n      <Field label=\"日期\">\r\n        <input type=\"date\" value={dateISO} onChange={e=>setDateISO((e.target as HTMLInputElement).value)}\r\n               style={{width:'100%'}}/>\r\n      </Field>\r\n\r\n      <Field label={`评分 (1~${starMax})`}>\r\n        <input type=\"number\" min={1} max={starMax} value={score}\r\n               onInput={e=>setScore(Number((e.target as HTMLInputElement).value))}\r\n               style={{width:'100%'}}/>\r\n      </Field>\r\n\r\n      <Field label=\"内容\">\r\n        <textarea rows={5} placeholder=\"备注…\" style={{width:'100%'}}\r\n                  value={content} onInput={e=>setContent((e.target as HTMLTextAreaElement).value)}/>\r\n      </Field>\r\n\r\n      <div style=\"display:flex;gap:8px;justify-content:flex-end;margin-top:8px;\">\r\n        <button class=\"mod-cta\" onClick={onSubmit}>提交 ↩︎</button>\r\n        <button onClick={close}>取消</button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import type { ThinkContext } from '@platform/context';\r\nimport { QuickTaskModal }   from '../ui/QuickTaskModal';\r\nimport { QuickBlockModal }  from '../ui/QuickBlockModal';\r\nimport { QuickHabitModal }  from '../ui/QuickHabitModal';\r\n\r\nexport function registerQuickInputCommands(ctx: ThinkContext) {\r\n  const { app, plugin } = ctx;\r\n\r\n  plugin.addCommand({\r\n    id: 'think-quick-input-task',\r\n    name: '快速录入 · 任务',\r\n    callback: () => new QuickTaskModal(plugin).open(),\r\n  });\r\n  plugin.addCommand({\r\n    id: 'think-quick-input-block',\r\n    name: '快速录入 · 计划/总结/思考',\r\n    callback: () => new QuickBlockModal(plugin).open(),\r\n  });\r\n  plugin.addCommand({\r\n    id: 'think-quick-input-habit',\r\n    name: '快速录入 · 打卡',\r\n    callback: () => new QuickHabitModal(plugin).open(),\r\n  });\r\n}\r\n","import type { ThinkContext } from '@platform/context';\r\nimport { registerQuickInputCommands } from './logic/registerCommands';\r\n\r\nexport function setup(ctx: ThinkContext) {\r\n  registerQuickInputCommands(ctx);\r\n}\r\n","// src/main.ts\r\nimport { App, Plugin, TFile, Notice } from 'obsidian';\r\n\r\nimport { ObsidianPlatform } from '@platform/obsidian';\r\nimport { DataStore } from '@core/services/dataStore';\r\n\r\nimport * as DashboardFeature   from '@features/dashboard';\r\nimport * as QuickInputFeature  from '@features/quick-input';\r\n\r\nimport type { DashboardConfig }  from '@core/domain/schema';\r\nimport type { InputSettings }    from '@core/utils/inputSettings';\r\n\r\n// ---------- 插件级类型 & 默认值 ---------- //\r\n\r\ninterface ThinkSettings {\r\n  dashboards:     DashboardConfig[];\r\n  inputSettings:   InputSettings;\r\n}\r\n\r\nconst DEFAULT_SETTINGS: ThinkSettings = {\r\n  dashboards:     [],                // 先给空数组，至少不再 undefined\r\n  inputSettings:  { base: {}, themes: [] },\r\n};\r\n\r\n// 供各 Feature 使用的上下文对象\r\nexport interface ThinkContext {\r\n  app:       App;\r\n  plugin:    ThinkPlugin;\r\n  platform:  ObsidianPlatform;\r\n  dataStore: DataStore;\r\n}\r\n\r\n// ---------- 主插件类 ---------- //\r\n\r\nexport default class ThinkPlugin extends Plugin {\r\n  // public 成员可给其它模块直接拿\r\n  platform!:  ObsidianPlatform;\r\n  dataStore!: DataStore;\r\n\r\n  /** 统一包裹的用户设置 */\r\n  private _settings!: ThinkSettings;\r\n\r\n  /* —— 快捷 getter（避免到处写 this._settings.xxx） —— */\r\n  get dashboards()    { return this._settings.dashboards; }\r\n  get inputSettings() { return this._settings.inputSettings; }\r\n\r\n  /** 已挂载的 Dashboard 容器，用于卸载时清理 */\r\n  activeDashboards: { container: HTMLElement; configName: string }[] = [];\r\n\r\n  // ===== 生命钩子 ===== //\r\n\r\n  async onload(): Promise<void> {\r\n    console.log('ThinkPlugin load');\r\n\r\n    /* 0. 读配置 ---------------------------------------------------- */\r\n    await this.loadSettings();\r\n\r\n    /* 1. 初始化 Platform & Core ----------------------------------- */\r\n    this.platform  = new ObsidianPlatform(this.app);\r\n    this.dataStore = new DataStore(this.platform);\r\n    await this.dataStore.initialScan();\r\n\r\n    /* 2. 注册各 Feature ------------------------------------------- */\r\n    const ctx: ThinkContext = {\r\n      app:       this.app,\r\n      plugin:    this,\r\n      platform:  this.platform,\r\n      dataStore: this.dataStore,\r\n    };\r\n\r\n    // —— Dashboard & Quick-Input 都导出了 setup(ctx) —— //\r\n    DashboardFeature.setup?.(ctx);\r\n    QuickInputFeature.setup?.(ctx);\r\n\r\n    /* 3. 其它：可在这里加设置页等 ------------------------------- */\r\n    // this.addSettingTab(new SettingsTab(this));\r\n  }\r\n\r\n  onunload(): void {\r\n    console.log('ThinkPlugin unload');\r\n    // 卸载所有动态挂载的 Dashboard 视图\r\n    this.activeDashboards.forEach(({ container }) => container.empty());\r\n  }\r\n\r\n  // ===== 设置读写 ===== //\r\n\r\n  /** 把空洞位用默认值补齐，再挂到 this._settings */\r\n  private async loadSettings() {\r\n    const stored = (await this.loadData()) as Partial<ThinkSettings> | null;\r\n    this._settings = Object.assign({}, DEFAULT_SETTINGS, stored);\r\n  }\r\n\r\n  async saveSettings() {\r\n    await this.saveData(this._settings);\r\n  }\r\n\r\n  // ===== 提供给其它模块的快捷 API（可按需增加） ===== //\r\n\r\n  /**\r\n   * 更新仪表盘配置并持久化\r\n   */\r\n  async upsertDashboard(cfg: DashboardConfig) {\r\n    const list = this._settings.dashboards;\r\n    const idx  = list.findIndex(d => d.name === cfg.name);\r\n    idx >= 0 ? (list[idx] = cfg) : list.push(cfg);\r\n    await this.saveSettings();\r\n    new Notice(`已保存仪表盘「${cfg.name}」`);\r\n  }\r\n\r\n  /**\r\n   * 打开设置页并定位到 Dashboard 区域（留空：直接打开顶部）\r\n   */\r\n  openSettingsForDashboard(name?: string) {\r\n    this.openSettingTab();\r\n    // 可在 SettingsTab 内部根据 name 做滚动定位\r\n  }\r\n}"],"names":["ObsidianPlatform","app","file","content","path","initial","af","event","cb","CORE_FIELDS","getAllFields","items","set","it","k","readField","item","field","DATE_YMD","DATE_YMD_RE","TAG_RE","KV_IN_PAREN","RE_TASK_PREFIX","RE_DONE_BOX","RE_CANCEL_BOX","t","e","module","this","n","r","i","s","a","o","c","f","h","d","l","$","y","M","m","v","u","g","D","p","S","_","w","O","b","Y","L","dayjs","quarterOfYear","weekOfYear","customParse","todayISO","nowHHMM","normalizeDateStr","raw","DATE_FMT","extractDate","line","em","list","getDateRange","view","CODEBLOCK_LANG","EMOJI","EMPTY_LABEL","cleanTaskText","text","result","main","pick","emoji","pickPriority","parseTaskLine","filePath","rawLine","lineNo","parentFolder","lineText","status","tags","recurrence","recMatch","extra","key","value","lowerKey","num","parsed","doneDate","cancelledDate","dueDate","scheduledDate","startDate","createdDate","priority","icon","afterPrefix","iconMatch","titleSrc","parseBlockContent","lines","startIdx","endIdx","contentLines","title","category","date","themeValue","contentText","contentStarted","iconVal","kv","lower","throttle","fn","wait","last","timer","args","now","toggleToDone","nowTime","pre","parseRecurrence","rawTask","interval","unit","whenDone","findBaseDateForRecurring","mt","generateNextRecurringTask","baseDateISO","next","rec","nextStr","replaceIf","re","markTaskDone","completedLine","baseISO","nextTaskLine","TaskService","itemId","ds","DataStore","lineStr","platform","files","fileItems","headingsList","nextHeadingIndex","currentSectionTags","currentHeader","headingText","headingTags","cleanText","tag","blockItem","name","taskItem","err","filters","sortRules","results","rule","aVal","bVal","aStr","bStr","listener","fieldVal","cmpVal","isEqual","regex","itemNum","cmpNum","itemTime","cmpTime","VaultWatcher","plugin","dataStore","onVault","rescan","TFile","old","x","C","N","I","P","B","A","T","j","F","H","E","V","z","q","G","ModulePanel","children","collapsed","setCollapsed","useState","rootRef","useRef","toggleCollapsed","onHeaderClick","want","ev","el","useEffect","handler","jsxs","jsx","makeObsUri","hashIndex","TaskCheckbox","done","onMarkDone","cls","TableView","rowField","colField","rowVals","colVals","matrix","cellItems","renderCellItem","isDone","CATEGORY_COLOR_MAP","getCategoryColor","BlockView","props","groupField","showMeta","fields","grouped","groupKeys","renderTaskLine","renderBlock","renderItem","grp","toText","ExcelView","cols","VIEW_REGISTRY","ViewComponents","filterByRules","rules","matchRule","v1","v2","sortItems","av","bv","cmp","filterByDateRange","startISO","endISO","sMs","eMs","filterByKeyword","kw","QTXT","Dashboard","config","setView","setDate","setKw","force","fmt","endDate","renderModule","target","keep","TFolder","vp","CodeblockEmbedder","source","configName","inlineDash","input","dash","render","setup","ctx","lastSegment","makeTaskLine","opts","template","safe","PLACEHOLDER","_m","p1","makeBlock","order","dict","first","rest","InputService","themePath","kind","blockName","theme","tBlk","bBlk","segs","cur","seg","fp","folder","header","payload","esc","idxInsert","fileHint","top","themes","base","baseTask","task","Field","label","Radio","checked","onChange","QuickTaskModal","Modal","TaskForm","close","svc","setTop","setThemes","setTheme","options","init","form","setForm","update","save","Notice","taskPrefix","targetPath","ts","choices","lastSeg","QuickBlockModal","Form","cat","setCat","topCats","setTopCats","buildThemes","themeIcon","periods","types","txt","setTxt","period","setPeriod","type","setType","refresh","newCat","newTop","tops","resolved","block","tp","QuickHabitModal","HabitForm","setThemePath","getStarMax","blk","starMax","setStarMax","dateISO","setDateISO","setContent","score","setScore","mx","chooseTop","onSubmit","registerQuickInputCommands","DEFAULT_SETTINGS","ThinkPlugin","Plugin","DashboardFeature.setup","QuickInputFeature.setup","container","stored","cfg","idx"],"mappings":"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","x_google_ignoreList":[3,4,5,6,16,17,18]}