### 1 Â· æˆ‘ä»¬å·²ç»å®Œæˆçš„æ ¸å¿ƒè°ƒæ•´

| è°ƒæ•´ç‚¹                               | ç›®çš„                    | å…³é”®æ”¹åŠ¨                                                                      |
| --------------------------------- | --------------------- | ------------------------------------------------------------------------- |
| **æŠ½è±¡ Obsidian API â†’ `@platform`** | è®©æ ¸å¿ƒé€»è¾‘ä¸å†ç›´æ¥ä¾èµ– Obsidianã€‚ | `src/platform/obsidian.ts` å°è£… `readFile / writeFile / getMarkdownFiles â€¦` |
| **ä¸šåŠ¡æ ¸å¿ƒä¸‹æ²‰ â†’ `@core`**              | æå‡å¯æµ‹è¯•æ€§ï¼›ä»¥åè¿ç§»å¹³å°æ›´ç®€å•ã€‚     | `dataStore / taskService / utils â€¦` ç§»åˆ° `src/core/**`ï¼Œå¹¶ç”¨åˆ«å `@core/*` å¼•ç”¨    |
| **UI ç»„ä»¶æ’ä»¶åŒ– â†’ `@features`**        | æ¯ä¸ªåŠŸèƒ½ç‹¬ç«‹ï¼Œå¯æŒ‰éœ€è£å‰ªã€å¯åœã€‚      | Dashboardã€Quick-Input ç»„ä»¶ç§»è‡³ `src/features/*/ui` å¹¶æš´éœ² `setup()`              |
| **å…±äº«å±‚ â†’ `@shared`**               | å…¬ç”¨æ ·å¼ & å°ç»„ä»¶ä¸€å¤„ç»´æŠ¤ã€‚       | `TaskCheckbox / FieldRadio / styles.css â€¦`                                |
| **`main.ts` é‡å†™**                  | ä¿æŒâ€œè–„å£³â€ï¼Œåªåšè£…é… & è®¾ç½®è¯»å†™    | åˆ›å»º `ThinkContext`ï¼Œåœ¨ `setup()` æ—¶ç»Ÿä¸€æ³¨å…¥                                       |

> *ç»“æœï¼šé¡¹ç›®å·²å®Œå…¨ç¬¦åˆ**Core + Platform + Features + Shared** å››å±‚æ¶æ„ï¼Œä»£ç å—è§£æ & Dashboard æ¸²æŸ“æ¢å¤æ­£å¸¸ã€‚*

---

### 2 Â· æ¥ä¸‹æ¥å»ºè®®çš„æ”¶å°¾äº‹é¡¹

| ä¼˜å…ˆçº§ | ä»»åŠ¡                          | æ“ä½œè¦ç‚¹                                                                                                                                    |
| --- | --------------------------- | --------------------------------------------------------------------------------------------------------------------------------------- |
| â˜…â˜…â˜… | **è¿ç§»/ç²¾ç®€æ—§çš„ src/ui\***        | Â· å°†ä»æ®‹ç•™åœ¨ `src/ui` ä¸‹çš„é…ç½®é¡µã€ä¸»é¢˜è¡¨å•ç­‰ï¼ŒæŒ‰â€œFeature or Sharedâ€è§„åˆ™æŒªåˆ°ä½<br>Â· æ›´æ–° importï¼›ç„¶ååˆ é™¤åŸæ–‡ä»¶                                                           |
| â˜…â˜…  | **SettingsTab â†’ Feature åŒ–** | - å»ºè®®åœ¨ `src/features/settings/` æ–°å»º `ui/SettingsTab.tsx`<br>- åœ¨ `index.ts` æš´éœ² `setup(ctx)` âœ `plugin.addSettingTab(new SettingsTab(ctx))` |
| â˜…â˜…  | **ç»Ÿä¸€ ESLint è¾¹ç•Œè§„åˆ™**          | ä½¿ç”¨ `eslint-plugin-boundaries` ç¦æ­¢è·¨ Feature ç›´æ¥ import                                                                                     |
| â˜…   | **å•å…ƒæµ‹è¯•è¡¥è´§**                  | `core` å±‚å¯ç”¨ vitest / jest ç›´æ¥è·‘ï¼›`platform` æ¥å£ç”¨ mock                                                                                        |
| â˜…   | **CIï¼štsc + vite build**     | ç¡®ä¿ PR / commit é˜¶æ®µè§¦å‘ç¼–è¯‘ï¼›æ—©å‘ç°è·¯å¾„/ç±»å‹é”™è¯¯                                                                                                        |
| â˜†   | **æ–‡æ¡£æ¢³ç†**                    | åœ¨ `README` æ·»åŠ ã€Œå¦‚ä½•å†™æ–° Feature / å¦‚ä½•æ‰©å±• Platformã€è¯´æ˜                                                                                           |

---

### 3 Â· ä»å­˜åœ¨çš„å†å²é—ç•™ & æ˜“è¸©å‘

| ç±»åˆ«                 | è¯¦æƒ…                                                                       | è§„é¿æ–¹æ¡ˆ                                                                                                 |
| ------------------ | ------------------------------------------------------------------------ | ---------------------------------------------------------------------------------------------------- |
| **è·¯å¾„é—æ¼**           | æ—§æ–‡ä»¶çš„ç›¸å¯¹ importï¼ˆ`../views/...`ï¼‰è‹¥æœªè·‘å®Œè„šæœ¬ä¼šåœ¨ build æ—¶æŠ¥ *Could not resolve*       | Â· ç»§ç»­è¡¥å…… `moved-paths.json`<br>Â· æˆ– VS Code `Find in Files` æœ `../views`ã€`../data`                      |
| **æ ·å¼åŠ è½½é¡ºåº**         | ç»Ÿä¸€æ”¹èµ° `@shared/styles/styles.css` åï¼Œå±€éƒ¨ CSS å¯èƒ½è¢«è¦†ç›–                          | - è°ƒæ•´ `styles.css` ä¸­çš„é€‰æ‹©å™¨æƒé‡æˆ–æ‹†åˆ†æˆæ¨¡å—åŒ– CSS                                                                 |
| **æœªæŠ½è±¡çš„æ–¹æ³•**         | è‹¥æœªæ¥æ ¸å¿ƒå±‚éœ€è¦ `app.workspace.â€¦` ç­‰æ¥å£ï¼Œè¦è®°å¾—åœ¨ `platform/obsidian.ts` å†åŠ åŒ…è£…          | ä¿æŒ **core ç¦æ­¢ç›´æ¥ import obsidian** çš„åŸåˆ™                                                                 |
| **State åŒæ­¥**       | Dashboard å†…éƒ¨ä»ç›´æ¥è¯»å– `plugin.dashboards`ï¼›è‹¥è®¾ç½®é¡µæ”¹åŠ¨åæ²¡ `notifyChange` ä¼šå¯¼è‡´ UI ä¸åˆ·æ–° | Â· åœ¨ `upsertDashboard()` åè°ƒç”¨ `dataStore.notifyChange()`<br>Â· æˆ–ç»™ Dashboard åŠ  `useEffect` è®¢é˜… Setting å˜æ›´ |
| **Quick-Input éªŒè¯** | Modal é‡Œå¯¹å­—æ®µçš„åˆ¤ç©ºã€æ—¥æœŸæ ¼å¼ä»è¾ƒè„†å¼±                                                   | å¼•å…¥ `zod / yup` åœ¨ UI å±‚åšä¸€æ¬¡ schema æ ¡éªŒ                                                                   |
| **Tree-Shake**     | vite build å·²è®¾ `moduleSideEffects:false`ï¼›åŠ¡å¿…ç¡®è®¤ç¬¬ä¸‰æ–¹åŒ…æ²¡æœ‰å‰¯ä½œç”¨å¯¼å…¥ï¼ˆä¾‹å¦‚ dayjs æ’ä»¶ï¼‰     | è‹¥å‡ºé—®é¢˜ï¼Œå¯åœ¨ `package.json#sideEffects` ç™½åå•ä¿ç•™                                                             |

---

> **ä¸€å¥è¯æ€»ç»“**ï¼š
> **æ ¸å¿ƒ(æ— å¹³å°ä¾èµ–) â†’ å¹³å°(Obsidian API) â†’ æ’ä»¶åŒ–ç‰¹æ€§(Feature) â†’ å…±äº«å±‚(Shared)** çš„çºµå‘åˆ†å±‚å·²ç»æ‰“å¥½åœ°åŸºï¼›
> å‰©ä½™å·¥ä½œä¸»è¦æ˜¯**æ‰«å°¾è¿ç§» / è§„åˆ™å›ºåŒ– / è‡ªåŠ¨åŒ–ä¿éšœ**ï¼Œç¡®ä¿ä»¥åå†æ·»åŠ åŠŸèƒ½æ—¶ä¸ä¼šé‡è¹ˆè€¦åˆçš„è€è·¯ã€‚



éå¸¸å¥½ï¼Œè¿™æ˜¯ä¸€ä¸ªæ¸…æ™°çš„é—®é¢˜ç±»å‹æ€»ç»“è¡¨ã€‚ç°åœ¨ä½ å·²ç»ä¿®å¤äº†ä¸€ç³»åˆ—æ„å»ºå’Œè¿è¡Œæ—¶é”™è¯¯ï¼Œæˆ‘ä»¬æ¥ **åŸºäºä½ å½“å‰é¡¹ç›®ç»“æ„å’ŒçŠ¶æ€**ï¼Œ**é‡æ–°æ¢³ç†è¿™äº›é—®é¢˜çš„å«ä¹‰ã€æˆå› å’Œæœ€ç»ˆè§£å†³æ–¹å¼**ï¼Œä»¥ä¾¿ä½ åç»­æŸ¥é˜…ä¸å¤ç”¨ã€‚

---

## âœ… æ›´æ–°åçš„é—®é¢˜è¯´æ˜ä¸è§£å†³æ–¹æ¡ˆ

| é—®é¢˜ç±»å‹                     | è¯´æ˜ä¸å½“å‰è§£å†³æ–¹æ¡ˆ                                                                                                                                                                           |
| ------------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| âŒ æ„å»ºæŠ¥é”™ï¼šæ‰¾ä¸åˆ° `./mui-theme` | åŸå› ï¼šä½ å°† `mui-theme.ts` ä» `src/ui/` ç§»åŠ¨åˆ°äº† `src/shared/styles/`ï¼Œä½†å¼•ç”¨è·¯å¾„æœªæ›´æ–°ã€‚<br>âœ… å·²æ”¹ä¸ºï¼š<br>`import { theme } from '@shared/styles/mui-theme';`                                               |
| ğŸ§¨ ç»„ä»¶æœªè¢«å¯¼å‡º                | ä¾‹å¦‚ `DashboardConfigForm` è¢« `SettingsTab` å¼•ç”¨ä½†æœªæš´éœ²ã€‚<br>âœ… ä½ å·²åœ¨ `features/dashboard/ui/index.ts` ä¸­è¡¥å……å¯¼å‡ºï¼š<br>`export * from './DashboardConfigForm';`                                       |
| ğŸ” è·¨ Feature å¼•ç”¨          | åŸæœ¬ `features/settings` ç›´æ¥ import `features/dashboard/ui/DashboardConfigForm`ã€‚<br>âœ… å·²é€šè¿‡ index.ts æš´éœ²ï¼Œå¹¶é€šè¿‡ alias å¼•å…¥ï¼š<br>`import { DashboardConfigForm } from '@features/dashboard/ui';` |
| â—å¾ªç¯ä¾èµ–é£é™©                  | è‹¥åœ¨ `features/settings/ui/SettingsTab.tsx` ä¸­ç›´æ¥ `import ThinkPlugin from '../main'` ä¼šé€ æˆå¾ªç¯ä¾èµ–ã€‚<br>âœ… å·²é€šè¿‡ `type ThinkPlugin from '@root/main'` é¿å…å®å¼•ç”¨ï¼Œä»…ä½œç±»å‹æ ‡æ³¨ã€‚                              |
| ğŸ’¥ Obsidian ä½ç‰ˆæœ¬å…¼å®¹æ€§       | ä½ ä½¿ç”¨äº† API å¦‚ `registerMarkdownCodeBlockProcessor()`ã€`app.setting.setTabById()` ç­‰ï¼Œ<br>è¿™äº›éœ€è¦ Obsidian v0.15.0+ã€‚<br>âœ… è‹¥éœ€æ”¯æŒæ—§ç‰ˆæœ¬ï¼Œéœ€æ·»åŠ  Polyfill æˆ–é¿å…è°ƒç”¨ã€‚                                         |

---

## ğŸ“ å½“å‰ç»“æ„æ¨è & è¯´æ˜

| æ–‡ä»¶æˆ–æ¨¡å—                      | æ¨èä½ç½®                        | è¯´æ˜                                               |
| -------------------------- | --------------------------- | ------------------------------------------------ |
| æ ·å¼ä¸ä¸»é¢˜ `mui-theme.ts`       | `src/shared/styles/`        | å…¨å±€æ ·å¼ã€themeã€å˜é‡ç­‰å½’ä¸º `shared` å±‚                      |
| è®¾ç½®é¡µç›¸å…³ç»„ä»¶                    | `src/features/settings/ui`  | ä¸æ’ä»¶è®¾ç½®ç›¸å…³çš„ `Tab`ã€è¡¨æ ¼ã€è¡¨å•ç»„ä»¶é›†ä¸­åœ¨æ­¤                       |
| å„¿ç«¥ç»„ä»¶ `DashboardConfigForm` | `src/features/dashboard/ui` | ä¸“å±äº Dashboard é…ç½®é€»è¾‘çš„ UIï¼Œ**ä¸åº”è¢«è®¾ç½®é¡µç›´æ¥æŒæœ‰**ï¼Œå·²é€šè¿‡å¯¼å‡ºæš´éœ²ç»™å¤–éƒ¨ |
| ä¸»æ’ä»¶ç±» `main.ts`             | `src/main.ts`               | åº”é¿å…å…¶ä»–æ¨¡å—ä¾èµ–æ­¤æ–‡ä»¶ï¼Œä»¥å…å¾ªç¯ä¾èµ–ï¼›é€šè¿‡ context ä¼ å…¥å³å¯              |

---

## âœ… å½“å‰å·²ä¿®å¤çš„æ„å»º/è¿è¡Œé—®é¢˜ä¸€è§ˆ

| é—®é¢˜                                      | ä¿®å¤æ–¹å¼                                                     |
| --------------------------------------- | -------------------------------------------------------- |
| `Cannot find module './mui-theme'`      | æ”¹ä¸º `@shared/styles/mui-theme`                            |
| `render is not defined`                 | æ·»åŠ  `import { render } from 'preact'`                     |
| `h is not defined`                      | æ·»åŠ  `import { h } from 'preact'`ï¼ˆæˆ–ä¸€èµ·å¼•å…¥ï¼‰                   |
| `this.openSettingTab is not a function` | æ”¹ä¸º `this.app.setting.open()` + `setTabById(...)`         |
| `SettingsTab` æ— æ³•å®šä½                      | åœ¨å…¶ç±»ä¸­æ·»åŠ  `this.id = 'think-settings'`                      |
| `DashboardConfigForm` æœªå¯¼å‡º               | åœ¨ `index.ts` ä¸­æ‰‹åŠ¨ `export * from './DashboardConfigForm'` |

---

## âœ… ç»Ÿä¸€ import å»ºè®®ï¼ˆåˆ«åä½¿ç”¨ï¼‰

| å¼•å…¥æ¨¡å—              | æ¨èå†™æ³•                                                           |
| ----------------- | -------------------------------------------------------------- |
| å¼•å…¥ä¸»æ’ä»¶ç±»ç±»å‹          | `import type ThinkPlugin from '@root/main'`                    |
| å¼•å…¥ Dashboard è¡¨å•ç»„ä»¶ | `import { DashboardConfigForm } from '@features/dashboard/ui'` |
| å¼•å…¥ Input è¡¨æ ¼ç»„ä»¶     | `import { InputSettingsTable } from './InputSettingsTable'`    |
| å¼•å…¥æ ·å¼ä¸»é¢˜            | `import { theme } from '@shared/styles/mui-theme'`             |

---

å¦‚ä½ éœ€è¦ï¼Œæˆ‘å¯ä»¥ç»§ç»­å¸®ä½ ï¼š

* ç”Ÿæˆ `vscode` è‡ªåŠ¨è¡¥å…¨å‹å¥½çš„ tsconfig è·¯å¾„é…ç½®ï¼›
* å†™ä¸€ä¸ªè¿ç§»æ£€æµ‹è„šæœ¬ï¼Œæ‰¾å‡ºæ‰€æœ‰æœªæ›´æ–°çš„ importï¼›
* ä¼˜åŒ– Dashboard æ¨¡å—çš„æ‡’åŠ è½½é€»è¾‘ã€‚

éœ€è¦ç»§ç»­å—ï¼Ÿ



è¿™æ˜¯å¯¹ä½ é¡¹ç›®å½“å‰çŠ¶æ€çš„è¿›ä¸€æ­¥â€œä»£ç è´¨é‡ä¸è¿è¡Œæ—¶é²æ£’æ€§â€å¢å¼ºå»ºè®®ã€‚æˆ‘ä»¬æ¥é€é¡¹åˆ¤æ–­ï¼š

---

## âœ… å¿…è¦æ€§è¯„ä¼°ä¸€è§ˆ

| é—®é¢˜ç±»å‹                  | ä¿®æ”¹å¿…è¦æ€§         | è¯´æ˜                                                                                                                                                                                                                                  |
| --------------------- | ------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **1. State åŒæ­¥é—®é¢˜**     | âœ… **å¼ºçƒˆæ¨è**    | `plugin.dashboards` æ˜¯**å…±äº«çŠ¶æ€æº**ï¼Œç›®å‰ dashboard ç»„ä»¶æ²¡æœ‰ç›‘å¬è¿™ä¸ªå˜åŒ–ï¼Œ<br>ç”¨æˆ·åœ¨è®¾ç½®é¡µä¿å­˜åï¼Œè‹¥ dashboard ä»æ˜¾ç¤ºæ—§å†…å®¹ï¼Œä¼šå½±å“ä½“éªŒä¸ä¿¡ä»»æ„Ÿã€‚                                                                                                                                  |
| **2. Quick-Input éªŒè¯** | ğŸ”¶ **è§†æƒ…å†µæ¨è**  | ç°åœ¨ä½ åªå¯¹â€œæ˜¯å¦ä¸ºç©ºâ€åšäº†ç®€å•åˆ¤æ–­ï¼Œä½†æ²¡åšæ ¼å¼ã€åˆæ³•å€¼æ ¡éªŒã€‚<br>å¦‚æœç”¨æˆ·ç²˜è´´äº†ä¸€æ®µéæ³• JSONã€æ—¥æœŸå†™é”™ã€å›¾æ ‡å­—æ®µè¿‡é•¿ï¼Œç¨‹åºä¼š**æ‚„æ‚„å¤±è´¥**æˆ–å‡ºé”™ã€‚<br>å»ºè®®ç”¨ `zod` æˆ– `yup` åš**è½»é‡ schema æ ¡éªŒ**ï¼ˆå¯é€‰ï¼Œä½†æœ‰ä»·å€¼ï¼‰ã€‚                                                                                                     |
| **3. Tree-Shake è®¾ç½®**  | ğŸŸ¡ **å»ºè®®ç¡®è®¤å³å¯** | `vite.config.ts` ä¸­ `treeshake: { moduleSideEffects: false }` é»˜è®¤æ˜¯åˆç†çš„ã€‚<br>ä½†ä½ å¼•å…¥äº†å¦‚ `dayjs/plugin/xxx` è¿™ç±»å‰¯ä½œç”¨æ¨¡å—ï¼Œ**ä¸å½“ä½¿ç”¨ä¼šè¢«è¯¯åˆ **ã€‚<br>å»ºè®®ä½ æ£€æŸ¥æ˜¯å¦ç”¨äº†å‰¯ä½œç”¨åˆå§‹åŒ–é€»è¾‘ï¼ˆå¦‚ `dayjs.extend()`ï¼‰ã€‚<br>è‹¥æœ‰ï¼Œå¯ä»¥åœ¨ `package.json` æ·»åŠ  `sideEffects: [ "dayjs/plugin/**" ]`ã€‚ |

---

## ğŸ§  å»ºè®®çš„ä¼˜å…ˆçº§æ’åºï¼ˆå«æ“ä½œè¯´æ˜ï¼‰

| ä¼˜å…ˆçº§      | é¡¹ç›®                   | æ“ä½œå»ºè®®                                                                                                                                     |
| -------- | -------------------- | ---------------------------------------------------------------------------------------------------------------------------------------- |
| â­ ç¬¬ 1 é¡ºä½ | **Dashboard çŠ¶æ€åŒæ­¥**   | åœ¨ `plugin.upsertDashboard()` åæ·»åŠ ï¼š<br>`this.dataStore.notifyChange();`<br>æˆ– Dashboard å†…éƒ¨åŠ  `useEffect(() => { dataStore.subscribe(...) })` |
| â­ ç¬¬ 2 é¡ºä½ | **Quick-Input æ ¡éªŒä¼˜åŒ–** | ä½¿ç”¨ `zod` å†™ä¸€ä»½è¾“å…¥æ ¡éªŒ schemaï¼ˆæ”¯æŒé»˜è®¤å€¼ã€å­—æ®µ trimã€éæ³•æç¤ºï¼‰ï¼Œå¹¶åœ¨ `onSubmit` å‰éªŒè¯                                                                            |
| ç¬¬ 3 é¡ºä½   | **Tree-Shake å®‰å…¨æ€§**   | è‹¥ä½¿ç”¨äº†å‰¯ä½œç”¨æ¨¡å—ï¼ˆå¦‚ dayjs çš„ plugin extendï¼‰ï¼Œè¯·åœ¨ `package.json` æ·»åŠ ï¼š<br>`"sideEffects": [ "dayjs/plugin/**" ]`                                       |

---

## ğŸ§© ç¤ºæ„ä»£ç ç‰‡æ®µï¼ˆå¯é€‰ï¼‰

### âœ… 1. Dashboard æ›´æ–°åé€šçŸ¥åˆ·æ–°

```ts
async upsertDashboard(cfg: DashboardConfig) {
  const list = this._settings.dashboards;
  const idx = list.findIndex(d => d.name === cfg.name);
  idx >= 0 ? (list[idx] = cfg) : list.push(cfg);
  await this.saveSettings();
  this.dataStore.notifyChange();  // ğŸ‘ˆ æ·»åŠ è¿™ä¸ª
  new Notice(`å·²ä¿å­˜ä»ªè¡¨ç›˜ã€Œ${cfg.name}ã€`);
}
```

### âœ… 2. Quick-Input zod schema ç¤ºä¾‹

```ts
import { z } from 'zod';

const taskSchema = z.object({
  å†…å®¹: z.string().min(1, 'è¯·å¡«å†™å†…å®¹'),
  æ—¥æœŸ: z.string().regex(/^\d{4}-\d{2}-\d{2}$/, 'æ—¥æœŸæ ¼å¼é”™è¯¯'),
  å›¾æ ‡: z.string().max(2).optional(),
});
```

ç„¶ååœ¨ `submit()` ä¸­ï¼š

```ts
const result = taskSchema.safeParse(fields);
if (!result.success) {
  new Notice('è¾“å…¥æœ‰è¯¯ï¼š' + result.error.issues[0].message);
  return;
}
```

---

å¦‚ä½ å¸Œæœ›æˆ‘ç›´æ¥ç”Ÿæˆ `QuickTaskModal.tsx` çš„æ ¡éªŒå¢å¼ºä»£ç ï¼Œå¯ä»¥ç»§ç»­è¯´ã€‚ä¹Ÿå¯ä»¥è‡ªåŠ¨åŠ  dashboard useEffect åˆ·æ–°é€»è¾‘ã€‚æ˜¯å¦ç»§ç»­ï¼Ÿ

### æ€»ä½“æ¶æ„é€Ÿè§ˆ

è¯¥æ’ä»¶æŒ‰â€œæ ¸å¿ƒå±‚ (core) â†’ ç‰¹æ€§å±‚ (features) â†’ å…±äº«å±‚ (shared)â€ä¸‰å±‚åˆ†åŒ…ï¼š

| å±‚çº§              | ä½œç”¨                                                    | å…³é”®ç‚¹ |
| --------------- | ----------------------------------------------------- | --- |
| **platform**    | æŠ½è±¡å¯¹ Obsidian API çš„æœ€è–„åŒ…è£…ï¼Œåªæš´éœ²æ’ä»¶çœŸæ­£ç”¨åˆ°çš„æ–‡ä»¶/äº‹ä»¶è¯»å†™æ–¹æ³•ã€‚           |     |
| **core**        | ä¸ä¾èµ– UIï¼Œè´Ÿè´£æ•°æ®æ¨¡å‹ã€è§£æã€æŒä¹…åŒ–ä¸äº‹ä»¶åˆ†å‘ï¼Œæ˜¯æ‰€æœ‰åŠŸèƒ½çš„åŸºç¡€ã€‚                   |     |
| **features/**\* | æ¯ä¸ªå­ç›®å½•ä»£è¡¨ä¸€é¡¹åŠŸèƒ½ï¼ˆä»ªè¡¨ç›˜ã€å¿«é€Ÿå½•å…¥ã€è®¾ç½®ç­‰ï¼‰ï¼Œå†…éƒ¨å†æ‹†å…¥å£ `index.ts` + UI å­ç›®å½•ã€‚ |     |
| **shared**      | è¢«å¤šåŠŸèƒ½å…¬ç”¨çš„å°ç»„ä»¶ã€æ ·å¼ä¸å·¥å…·å‡½æ•°ã€‚                                   |     |

> ä¸»å…¥å£ `src/main.ts` åœ¨ `onload` é‡Œå®Œæˆï¼šåŠ è½½è®¾ç½® â†’ åˆå§‹åŒ–å¹³å°ä¸ DataStore â†’ æŠŠä¸Šä¸‹æ–‡æ³¨å…¥å„ Featureã€‚

---

### å„æ–‡ä»¶ä¸€å¥è¯è¯´æ˜

> **æç¤º**ï¼šä»¥â€œæ–‡ä»¶è·¯å¾„ â†’ åŠŸèƒ½æè¿°â€çš„æ ¼å¼ï¼Œæ–¹ä¾¿å¿«é€Ÿæ£€ç´¢ã€‚

* **src/main.ts** â†’ æ’ä»¶ä¸»ç±» `ThinkPlugin`ï¼šç”Ÿå‘½å‘¨æœŸã€è®¾ç½®åŠ è½½ä¿å­˜ã€ç‰¹æ€§åˆå§‹åŒ–å…¥å£ã€‚
* **core/CodeblockEmbedder.ts** â†’ æ³¨å†Œ `think` ä»£ç å—å¤„ç†å™¨å¹¶æ¸²æŸ“ Dashboard ç»„ä»¶ã€‚
* **core/VaultWatcher.ts** â†’ ç›‘å¬ Vault CRUD äº‹ä»¶å¹¶è§¦å‘ DataStore å¢é‡æ‰«æä¸åˆ·æ–°ã€‚
* **core/index.ts** â†’ æ±‡æ€» re-exportï¼Œä¾›å¤–éƒ¨ä¸€è¡Œå¯¼å…¥ core å„æ¨¡å—ã€‚
* **core/domain/constants.ts** â†’ å®šä¹‰ä»£ç å—è¯­è¨€åã€ç¬¦å·å¸¸é‡ã€å…¨å±€æ ·å¼ç­‰ã€‚
* **core/domain/categoryColorMap.ts** â†’ ç±»åˆ«-é¢œè‰²æ˜ å°„è¡¨ä¸æŸ¥è¯¢å‡½æ•°ã€‚
* **core/domain/schema.ts** â†’ å®šä¹‰ Itemã€DashboardConfig ç­‰æ ¸å¿ƒæ•°æ®ç»“æ„åŠå­—æ®µå·¥å…·ã€‚
* **core/services/dataStore.ts** â†’ æ‰«æ Markdownâ†’è§£æ Itemâ†’ç¼“å­˜â†’æä¾›æŸ¥è¯¢/è®¢é˜… API çš„æ ¸å¿ƒæ•°æ®å±‚ã€‚
* **core/services/taskService.ts** â†’ è´Ÿè´£å‹¾é€‰ä»»åŠ¡è¡Œï¼Œä¿®æ”¹æ–‡ä»¶æ–‡æœ¬å¹¶ç”Ÿæˆä¸‹ä¸€æ¡å‘¨æœŸä»»åŠ¡ã€‚
* **core/services/inputService.ts** â†’ æ ¹æ®æ’ä»¶â€œè¾“å…¥è®¾ç½®â€å†™å…¥ä»»åŠ¡/å—å†…å®¹åˆ°æŒ‡å®šæ–‡ä»¶å¹¶æä¾›ä¸»é¢˜æŸ¥è¯¢å·¥å…·ã€‚
* **core/utils/**\* â†’ æ—¥æœŸã€æ­£åˆ™ã€æ¨¡æ¿ã€èŠ‚æµç­‰çº¯å‡½æ•°å·¥å…·åº“ï¼ˆæ¯ä¸ªæ–‡ä»¶å„è‡ªå°è£…å•ä¸€èŒèƒ½ï¼‰ã€‚

  * `date.ts` â†’ dayjs å°è£…ä¸æ—¥æœŸæ ¼å¼åŒ–/åŒºé—´è®¡ç®—ã€‚
  * `templates.ts` â†’ ç”Ÿæˆä»»åŠ¡è¡Œä¸å—æ–‡æœ¬çš„æ¨¡æ¿å‡½æ•°ã€‚
  * `parser.ts` â†’ è§£æä»»åŠ¡è¡Œä¸ `<!-- start -->â€¦<!-- end -->` å—ä¸º Itemã€‚
  * `itemFilter.ts` â†’ é€šç”¨è¿‡æ»¤ã€æ’åºã€å…³é”®å­—ã€æ—¥æœŸåŒºé—´å·¥å…·ã€‚
  * `mark.ts` â†’ ä»»åŠ¡å®Œæˆ/å‘¨æœŸä»»åŠ¡ç®—æ³•ã€‚
  * `timing.ts` â†’ throttle èŠ‚æµå®ç°ã€‚
  * å…¶ä½™ utils æ–‡ä»¶åŒç†ï¼Œå‡æä¾›ç‹¬ç«‹å°åŠŸèƒ½ã€‚
* **platform/obsidian.ts** â†’ å¯¹ Obsidian API çš„æç®€åŒ…è£…ç±» `ObsidianPlatform`ã€‚
* **features/dashboard/index.ts** â†’ Dashboard ç‰¹æ€§å…¥å£ï¼šæ³¨å†Œ VaultWatcher ä¸ CodeblockEmbedderã€‚
* **features/dashboard/ui/Dashboard.tsx** â†’ é¡¶çº§ Dashboard ç»„ä»¶ï¼šè§†å›¾åˆ‡æ¢ã€è¿‡æ»¤ã€æ¨¡å—å¾ªç¯ã€‚
* **features/dashboard/ui/ModulePanel.tsx** â†’ æ¯ä¸ªä»ªè¡¨ç›˜æ¨¡å—çš„æŠ˜å é¢æ¿å®¹å™¨ã€‚
* **features/dashboard/ui/BlockView\.tsx** â†’ Block/Task åˆ—è¡¨è§†å›¾ï¼Œæ”¯æŒåˆ†ç»„åŠå‹¾é€‰ã€‚
* **features/dashboard/ui/TableView\.tsx** â†’ è¡ŒÃ—åˆ—äºŒç»´è¡¨æ ¼è§†å›¾ã€‚
* **features/dashboard/ui/ExcelView\.tsx** â†’ æ‰å¹³è¡¨æ ¼è§†å›¾ï¼Œä¾¿äºå¯¼è¡¨ã€‚
* **features/dashboard/ui/index.ts** â†’ è§†å›¾æ³¨å†Œè¡¨ä¸å¯¼å‡ºï¼›å« DashboardConfigForm è¡¨å•ã€‚
* **features/dashboard/ui/DashboardConfigForm.tsx** â†’ GUI è¡¨å•ï¼Œæ‰€è§å³æ‰€å¾—ç¼–è¾‘ä»ªè¡¨ç›˜ JSONã€‚
* **features/quick-input/index.ts** â†’ å¿«é€Ÿå½•å…¥ç‰¹æ€§å…¥å£ï¼Œæ³¨å†Œä¸‰æ¡å‘½ä»¤ã€‚
* **features/quick-input/logic/registerCommands.ts** â†’ æŠŠä¸‰ç§å¿«é€Ÿå½•å…¥ Modal ç»‘å®šåˆ°å‘½ä»¤é¢æ¿ã€‚
* **features/quick-input/ui/QuickTaskModal.tsx** â†’ â€œå¿«é€Ÿå½•å…¥Â·ä»»åŠ¡â€ å¼¹çª—ï¼Œæ¨¡æ¿åŒ–ç”Ÿæˆä»»åŠ¡è¡Œå¹¶å†™å…¥ã€‚
* **features/quick-input/ui/QuickBlockModal.tsx** â†’ â€œå¿«é€Ÿå½•å…¥Â·è®¡åˆ’/æ€»ç»“/æ€è€ƒâ€ å¼¹çª—ã€‚
* **features/quick-input/ui/QuickHabitModal.tsx** â†’ â€œå¿«é€Ÿå½•å…¥Â·æ‰“å¡â€ å¼¹çª—ã€‚
* **features/settings/index.ts** â†’ è®¾ç½®é¡µç‰¹æ€§å…¥å£ä¸ç±»å‹å¯¼å‡ºã€‚
* **features/settings/ui/SettingsTab.ts** â†’ Obsidian SettingTabï¼ŒåŒ…å«ä»ªè¡¨ç›˜ç®¡ç†ä¸è¾“å…¥è®¾ç½®ã€‚
* **features/settings/ui/InputSettingsTable.tsx** â†’ å¯æŠ˜å çš„è¾“å…¥è®¾ç½®è¡¨æ ¼ï¼Œæ”¯æŒå›¾æ ‡/JSON å•å…ƒæ ¼ç¼–è¾‘ã€‚
* **shared/components/TaskCheckbox.tsx** â†’ é€šç”¨å¤é€‰æ¡†ç»„ä»¶ï¼Œå°è£…ä»»åŠ¡å‹¾é€‰é€»è¾‘ã€‚
* **shared/components/FieldRadio.tsx** â†’ è¡¨å•è¾…åŠ©ç»„ä»¶ Field ä¸å•é€‰ Radioã€‚
* **shared/styles/mui-theme.ts** â†’ å…¨å±€ MUI ä¸»é¢˜ï¼šiOS-é£æ ¼è°ƒè‰²ä¸å°ºå¯¸ã€‚
* **shared/styles/styles.css** â†’ æ’ä»¶è‡ªå¸¦æ ·å¼è¡¥ä¸ï¼ˆå¤é€‰æ¡†çš®è‚¤ã€è¡¨æ ¼å­—å·ç­‰ï¼‰ã€‚
* **shared/components/index.ts**ã€**shared/index.ts** â†’ ç»Ÿä¸€å¯¼å‡º shared ç»„ä»¶ä¸æ ·å¼ã€‚

> **æœªåˆ—å‡ºçš„ `*.tsx/ts`**ï¼ˆå¦‚è‹¥å­˜åœ¨ï¼‰å‡éµå¾ªåŒä¸€è§„å¾‹ï¼šUI ç»„ä»¶æ”¾ ui æ–‡ä»¶å¤¹ã€çº¯ä¸šåŠ¡/å·¥å…·æ”¾ utils æˆ– servicesï¼Œæ–‡ä»¶åå³èŒè´£åï¼Œä¸€ç›®äº†ç„¶ã€‚
